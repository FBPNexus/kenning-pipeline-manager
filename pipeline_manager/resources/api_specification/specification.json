{
    "frontend_endpoints": {
        "graph_get": {
            "description": "Returns dataflow used by frontend",
            "params": {
                "$ref": "common_types#/$defs/null_or_empty"
            },
            "returns": {
                "$ref": "common_types#/$defs/dataflow_object"
            }
        },
        "node_get": {
            "description": "Procedure to read node state",
            "params": {
                "allOf": [{ "$ref": "common_types#/$defs/node_object" }]
            },
            "returns": {
                "type": "object",
                "properties": {
                    "node": {
                        "description": "State of the node",
                        "type": "object"
                    }
                },
                "additionalProperties": false,
                "required": ["node"]
            }
        },
        "properties_get": {
            "description": "Procedure to alter values of a node",
            "params": {
                "allOf": [{ "$ref": "common_types#/$defs/node_object" }],
                "type": "object",
                "properties": {
                    "properties": {
                        "type": ["array", "null"],
                        "description": "Properties which values are going to be read specified by either a name of id. If undefined then all properties are returned",
                        "items": {
                            "type": "object",
                            "oneOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "description": "Id of the property to read",
                                            "type": "string"
                                        }
                                    },
                                    "required": ["id"],
                                    "additionalProperties": false
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "name": {
                                            "description": "Name of the property to read",
                                            "type": "string"
                                        }
                                    },
                                    "required": ["name"],
                                    "additionalProperties": false
                                }
                            ]
                        }
                    }
                },
                "unevaluatedProperties": false
            },
            "returns": {
                "type": "array",
                "items": {
                    "type": "object",
                    "description": "Values of the searched properties",
                    "properties": {
                        "id": {
                            "description": "Id of the property",
                            "type": "string"
                        },
                        "name": {
                            "description": "Name of the property",
                            "type": "string"
                        },
                        "value": {
                            "description": "Value of the property. Its type depends on the property"
                        }
                    },
                    "required": ["id", "name", "value"],
                    "additionalProperties": false
                }
            }
        },
        "properties_change": {
            "description": "Procedure to alter properties of a node",
            "params": {
                "$ref": "common_types#/$defs/properties_diff"
            },
            "returns": {
                "$ref": "common_types#/$defs/null_or_empty"
            }
        },
        "position_change": {
            "description": "Procedure to alter position of a node",
            "params": {
                "$ref": "common_types#/$defs/position_diff"
            },
            "returns": {
                "$ref": "common_types#/$defs/null_or_empty"
            }
        },
        "nodes_change": {
            "description": "Procedure to add and delete nodes",
            "params": {
                "$ref": "common_types#/$defs/nodes_diff"
            },
            "returns": {
                "$ref": "common_types#/$defs/null_or_empty"
            }
        },
        "connections_change": {
            "description": "Procedure to add and delete connections",
            "params": {
                "$ref": "common_types#/$defs/connections_diff"
            },
            "returns": {
                "$ref": "common_types#/$defs/null_or_empty"
            }
        },
        "graph_change": {
            "description": "Procedure to add and delete nodes",
            "params": {
                "$ref": "common_types#/$defs/dataflow_object"
            },
            "returns": {
                "$ref": "common_types#/$defs/null_or_empty"
            }
        },
        "progress_change": {
            "description": "Notification with progress of job ran by external application",
            "params": {
                "description": "Parameters for notification",
                "type": "object",
                "properties": {
                    "progress": {
                        "description": "Progress of job ran be external application",
                        "type": "number"
                    }
                },
                "required": [
                    "progress"
                ],
                "additionalProperties": false
            },
            "returns": null
        },
        "metadata_change": {
            "description": "Updates the editor's metadata",
            "params": {
                "$ref": "common_types#/$defs/metadata"
            },
            "returns": null
        },
        "viewport_center": {
            "description": "Center the editor",
            "params": {
                "$ref": "common_types#/$defs/null_or_empty"
            },
            "returns": null
        }
    },
    "backend_endpoints": {
        "status_get": {
            "description": "Returns status of connection with external application",
            "params": {
                "$ref": "common_types#/$defs/null_or_empty"
            },
            "returns": {
                "description": "Describtion of backend status",
                "type": "object",
                "properties": {
                    "status": {
                        "description": "Status",
                        "type": "object",
                        "properties": {
                            "connected": {
                                "description": "Connection with external application",
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "connected"
                        ],
                        "additionalProperties": false
                    }
                },
                "required": [
                    "status"
                ],
                "additionalProperties": false
            }
        },
        "external_app_connect": {
            "description": "Request to wait till connection with external application is established",
            "params": {
                "$ref": "common_types#/$defs/null_or_empty"
            },
            "returns": {
                "$ref": "common_types#/$defs/empty"
            }
        },
        "connected_frontends_get": {
            "description": "Request the number of connected fronteds",
            "params": {
                "$ref": "common_types#/$defs/null_or_empty"
            },
            "returns": {
                "type": "object",
                "properties": {
                    "connections": {
                        "type": "number",
                        "description": "Number of connections"
                    }
                },
                "additionalProperties": false,
                "required": [
                    "connections"
                ]
            }
        }
    },
    "external_endpoints": {
        "specification_get": {
            "description": "Request specification used by external application",
            "params": {
                "$ref": "common_types#/$defs/null_or_empty"
            },
            "returns": {
                "$ref": "common_types#/$defs/external_endpoint_return_type"
            }
        },
        "dataflow_import": {
            "description": "Request to convert dataflow in external app to Pipeline Manager format and import it",
            "params": {
                "description": "Parameters for request",
                "type": "object",
                "properties": {
                    "external_application_dataflow": {
                        "description": "JSON with dataflow in external application format",
                        "type": "object"
                    }
                },
                "required": [
                    "external_application_dataflow"
                ],
                "additionalProperties": false
            },
            "returns": {
                "$ref": "common_types#/$defs/external_endpoint_return_type"
            }
        },
        "dataflow_validate": {
            "description": "Request external application to validate dataflow",
            "params": {
                "$ref": "common_types#/$defs/dataflow_object"
            },
            "returns": {
                "$ref": "common_types#/$defs/external_endpoint_return_type"
            }
        },
        "dataflow_run": {
            "description": "Request external application to run dataflow",
            "params": {
                "$ref": "common_types#/$defs/dataflow_object"
            },
            "returns": {
                "$ref": "common_types#/$defs/external_endpoint_return_type"
            }
        },
        "dataflow_stop": {
            "description": "Request external application to run dataflow",
            "params": {
                "$ref": "common_types#/$defs/null_or_empty"
            },
            "returns": {
                "$ref": "common_types#/$defs/external_endpoint_return_type"
            }
        },
        "dataflow_export": {
            "description": "Request external application to export dataflow",
            "params": {
                "$ref": "common_types#/$defs/dataflow_object"
            },
            "returns": {
                "$ref": "common_types#/$defs/external_endpoint_return_type"
            }
        },
        "frontend_on_connect": {
            "description": "Request send when Pipeline Manager frontend connects to backend",
            "params": {
                "$ref": "common_types#/$defs/null_or_empty"
            },
            "returns": {
                "$ref": "common_types#/$defs/null_or_empty"
            }
        },
        "properties_on_change": {
            "description": "Request send when properties of any node changes",
            "params": {
                "$ref": "common_types#/$defs/properties_diff"
            },
            "returns": {
                "$ref": "common_types#/$defs/null_or_empty"
            }
        },
        "position_on_change": {
            "description": "Request send when position of any node changes",
            "params": {
                "$ref": "common_types#/$defs/position_diff"
            },
            "returns": {
                "$ref": "common_types#/$defs/null_or_empty"
            }
        },
        "nodes_on_change": {
            "description": "Request send when node was added or deleted",
            "params": {
                "$ref": "common_types#/$defs/nodes_diff"
            },
            "returns": {
                "$ref": "common_types#/$defs/null_or_empty"
            }
        },
        "connections_on_change": {
            "description": "Request send when connection was added or deleted",
            "params": {
                "$ref": "common_types#/$defs/connections_diff"
            },
            "returns": {
                "$ref": "common_types#/$defs/null_or_empty"
            }
        },
        "graph_on_change": {
            "description": "Request send when whole dataflow changed, e.g. when dataflow is loaded",
            "params": {
                "$ref": "common_types#/$defs/dataflow_object"
            },
            "returns": {
                "$ref": "common_types#/$defs/null_or_empty"
            }
        },
        "metadata_on_change": {
            "description": "Request send when metadata was changed",
            "params": {
                "$ref": "common_types#/$defs/metadata"
            },
            "returns": {
                "$ref": "common_types#/$defs/null_or_empty"
            }
        },
        "viewport_on_center": {
            "description": "Request send when editor was centerd",
            "params": {
                "$ref": "common_types#/$defs/null_or_empty"
            },
            "returns": {
                "$ref": "common_types#/$defs/null_or_empty"
            }
        }
    }
}
