"use strict";(self.webpackChunkpipeline_manager=self.webpackChunkpipeline_manager||[]).push([[601],{95733:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(20641);const o={id:"app"},i={},s=(0,n(66262).A)(i,[["render",function(e,t){const n=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.bF)(n)])}]])},95774:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(20641),o=n(53751),i=n(90033),s=n(50953),r=n(63491),l=n(58365);const c=(0,a.pM)({props:{position:{type:Object,required:!0},rightclickCallback:{required:!0,type:Function}},setup(e){const{graph:t}=(0,r.uU)(),{viewModel:n}=(0,r.if)(),o=(0,a.EW)((()=>({cx:(e.position.x+t.value.panning.x)*t.value.scaling+"px",cy:(e.position.y+t.value.panning.y)*t.value.scaling+"px",r:7.5*t.value.scaling+"px"}))),i=(0,l.A)((0,s.KR)(e.position)),c=()=>{i.onPointerUp(),document.removeEventListener("pointermove",i.onPointerMove),document.removeEventListener("pointerup",c)};return{styles:o,startDrag:e=>{n.value.editor.readonly||(i.onPointerDown(e),document.addEventListener("pointermove",i.onPointerMove),document.addEventListener("pointerup",c))}}}}),d=(0,n(66262).A)(c,[["render",function(e,t,n,s,r,l){return(0,a.uX)(),(0,a.CE)("g",{onPointerdown:[t[0]||(t[0]=(0,o.D$)(((...t)=>e.startDrag&&e.startDrag(...t)),["left"])),t[1]||(t[1]=(0,o.D$)(((...t)=>e.rightclickCallback&&e.rightclickCallback(...t)),["right","exact"]))],class:"anchor"},[(0,a.Lk)("circle",{style:(0,i.Tr)(e.styles)},null,4)],32)}]])},75906:(e,t,n)=>{n.d(t,{A:()=>ct});var a=n(20641),o=n(53751);const i={id:"container"};var s=n(50953),r=n(90033);const l=e=>((0,a.Qi)("data-v-45b20100"),e=e(),(0,a.jt)(),e),c={class:"wrapper"},d={class:"container"},u={class:"dropdown-wrapper"},p=l((()=>(0,a.Lk)("hr",null,null,-1))),v=l((()=>(0,a.Lk)("hr",null,null,-1))),h=l((()=>(0,a.Lk)("hr",null,null,-1))),m=l((()=>(0,a.Lk)("hr",null,null,-1))),g={key:0},f={key:1},b=["id","onClick","onPointerover","onPointerleave"],C=l((()=>(0,a.Lk)("div",{class:"progress-bar"},null,-1))),y=[l((()=>(0,a.Lk)("span",null,"Return from subgraph editor",-1)))],w={key:0},k={key:1},E={key:0},A={key:1},S={key:0},I={key:1},N=[l((()=>(0,a.Lk)("span",null,"Backend status",-1)))],x={class:"backend-status"},L=l((()=>(0,a.Lk)("span",null,"Client status:",-1))),M={key:0,class:"connected"},P={key:1,class:"disconnected"},F=[l((()=>(0,a.Lk)("span",null,"Hide notifications",-1)))],O=[l((()=>(0,a.Lk)("span",null,"Show notifications",-1)))],T=l((()=>(0,a.Lk)("div",{class:"progress-bar"},null,-1)));var H=n(88781),X=n(9459),W=n.n(X),_=n(63491),R=n(12206),V=n(52931),B=n(45788),$=n(49196),D=n(57441),Q=n(11369),q=n(25157),G=n(30005),K=n(51246),U=n(42980),j=n(70060);const z=["for"],J=["id"],Y=["id","value"],Z={props:{text:{type:String,required:!0},id:{type:String},type:{type:String,default:"file"},eventFunction:{type:Function,required:!0}}};var ee=n(66262);const te=(0,ee.A)(Z,[["render",function(e,t,n,o,i,s){return(0,a.uX)(),(0,a.CE)("div",null,["file"===n.type?((0,a.uX)(),(0,a.CE)("label",{key:0,for:n.id},(0,r.v_)(n.text),9,z)):(0,a.Q3)("",!0),"file"===n.type?((0,a.uX)(),(0,a.CE)("input",{key:1,id:n.id,type:"file",onChange:t[0]||(t[0]=(...e)=>n.eventFunction&&n.eventFunction(...e))},null,40,J)):((0,a.uX)(),(0,a.CE)("input",{key:2,id:n.id,type:"button",onClick:t[1]||(t[1]=(...e)=>n.eventFunction&&n.eventFunction(...e)),value:n.text},null,8,Y))])}],["__scopeId","data-v-74c292ef"]]);var ne=n(71954),ae=n(53612),oe=n(6565),ie=n(93617),se=n(35127),re=n(881),le=n(96335);const ce={class:"notifications"},de={class:"info"},ue={class:"panel"};var pe=n(72409),ve=n(33305);const he={components:{Cross:pe.A,Notification:ve.A},computed:{notifications:()=>se.xv.notifications,notificationsLength:()=>se.xv.notifications.length},data:()=>({notificationStore:se.xv}),methods:{removeAll(){se.xv.remove()}}},me=(0,ee.A)(he,[["render",function(e,t,n,o,i,s){const l=(0,a.g2)("Cross"),c=(0,a.g2)("Notification");return(0,a.uX)(),(0,a.CE)("div",ce,[(0,a.Lk)("div",de,[(0,a.Lk)("span",null,"Notifications ("+(0,r.v_)(i.notificationStore.notifications.length)+")",1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>this.removeAll&&this.removeAll(...e)),tabindex:"-1"},[(0,a.bF)(l),(0,a.eW)(" Clear all ")])]),(0,a.Lk)("div",ue,[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.notificationsLength,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e},[(0,a.bF)(c,{type:s.notifications[s.notificationsLength-e].type,message:`${s.notifications[s.notificationsLength-e].message}`,index:s.notificationsLength-e,border:"border"},null,8,["type","message","index"])])))),128))])])])}],["__scopeId","data-v-fd15cad8"]]),ge={class:"settings-panel"},fe=(0,a.Lk)("div",{class:"setting-header"},[(0,a.Lk)("span",null,"Settings")],-1),be={class:"panel"},Ce={class:"option-label"},ye={class:"__properties"},we=(0,a.Lk)("div",{class:"option-label"},"Hide Layers:",-1);var ke=n(96422);const Ee={props:{viewModel:{required:!0}},setup(e){const t=(0,le.A)(),n=(e,n)=>{t.notifyAboutChange("metadata_on_change",{metadata:{[e]:n}})},o=(0,a.EW)((()=>{const t=new _.mk("Connection style",e.viewModel.connectionRenderer.style,[{text:"Curved",value:"curved"},{text:"Orthogonal",value:"orthogonal"}]).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.connectionRenderer.style=t,n("connectionStyle",t)})),t.componentName="SelectInterface",t})),i=(0,a.EW)((()=>{const t=new _.b("Randomized offset",e.viewModel.connectionRenderer.randomizedOffset).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.connectionRenderer.randomizedOffset=t,n("randomizedOffset",t)})),t.componentName="CheckboxInterface",t})),r=(0,a.EW)((()=>{const t=new _.qO("Background grid size",e.viewModel.settings.background.gridSize).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.settings.background.gridSize=t,n("backgroundSize",t)})),t.componentName="IntegerInterface",t})),l=(0,a.EW)((()=>{const t=new _.qO("Node movement step",e.viewModel.movementStep).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.movementStep=t,n("movementStep",t)})),t.componentName="IntegerInterface",t})),c=(0,a.EW)((()=>{const{layoutManager:t}=e.viewModel.editor,a=t.getAvailableAlgorithms().map((e=>({text:e,value:e}))),o=new _.mk("Autolayout algorithm",t.usedAlgorithm,a).setPort(!1);return o.events.setValue.subscribe(this,(e=>{t.useAlgorithm(e),n("layout",e)})),o.componentName="SelectInterface",o})),d=(0,a.EW)((()=>{const t=new _.aw("Apply autolayout",(()=>{e.viewModel.editor.applyAutolayout()}));return t.componentName="ButtonInterface",t})),u=(0,a.EW)((()=>{const n=new _.aw("Center",(()=>{e.viewModel.editor.centerZoom(),t.notifyAboutChange("viewport_on_center")}));return n.componentName="ButtonInterface",n})),p=(0,a.EW)((()=>{const t=new _.aw("Clean editor",(()=>{e.viewModel.editor.deepCleanEditor()}));return t.componentName="ButtonInterface",t})),v=(0,a.EW)((()=>{const t=(0,s.KR)([]);return e.viewModel.layers.forEach((n=>{const a=new _.b(n.name,!1).setPort(!1);a.events.setValue.subscribe(this,(()=>{e.viewModel.ignoredLayers.has(n.name)?e.viewModel.ignoredLayers.delete(n.name):e.viewModel.ignoredLayers.add(n.name)})),a.componentName="CheckboxInterface",t.value.push(a)})),t.value})),h=(0,a.EW)((()=>{const t=new _.mk("Verbosity of notifications",e.viewModel.logLevel,Object.keys(ie.E).map((e=>e.toUpperCase()))).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.logLevel=t})),t.componentName="SelectInterface",t})),m=(0,a.EW)((()=>e.viewModel.editor.readonly?[]:[h.value,o.value,c.value,d.value,r.value,p.value,l.value,i.value])),g=(0,a.EW)((()=>[u.value].concat(m.value)));return{getOptionName:ke.BW,settingOptions:g,disableLayersOptions:v}}},Ae=(0,ee.A)(Ee,[["render",function(e,t,n,i,s,l){return(0,a.uX)(),(0,a.CE)("div",ge,[fe,(0,a.Lk)("div",be,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.settingOptions,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id},[(0,a.Lk)("div",Ce,(0,r.v_)(i.getOptionName(e)?`${e.name}:`:""),1),((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.component),{intf:e,tabindex:"-1"},null,8,["intf"]))])))),128)),(0,a.bo)((0,a.Lk)("div",ye,[we,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.disableLayersOptions,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id},[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.component),{intf:e,tabindex:"-1"},null,8,["intf"]))])))),128))],512),[[o.aG,0!==i.disableLayersOptions.length]])])])}]]),Se={class:"popup-menu"},Ie={class:"__header"},Ne=(0,a.Lk)("div",{class:"__header-title"}," Save configuration ",-1);var xe=n(3455),Le=n(40861);const Me=(0,a.pM)({props:{modelValue:{type:Boolean,default:!1},viewModel:{required:!0,type:Object},saveConfiguration:{required:!0,type:Object}},components:{Cross:pe.A},emits:["update:modelValue"],setup(e,{emit:t}){const n=(0,a.EW)((()=>{if(void 0===e.saveConfiguration.readonly)return;const t=new _.b("Make graph read only",e.saveConfiguration.readonly).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.saveConfiguration.readonly=t})),t.componentName="CheckboxInterface",t})),o=(0,a.EW)((()=>{if(void 0===e.saveConfiguration.hideHud)return;const t=new _.b("Disable HUD",e.saveConfiguration.hideHud).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.saveConfiguration.hideHud=t})),t.componentName="CheckboxInterface",t})),i=(0,a.EW)((()=>{if(void 0===e.saveConfiguration.position)return;const t=new _.b("Preserve current view location",e.saveConfiguration.position).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.saveConfiguration.position=t})),t.componentName="CheckboxInterface",t})),r=(0,a.EW)((()=>{const e=new xe.A("File name","save").setPort(!1);return e.componentName="InputInterface",e.setComponent((0,s.IG)(Le.A)),e})),l=()=>{e.modelValue&&t("update:modelValue",!1)},c=(0,a.EW)((()=>{const t=new _.aw("Save",(()=>{e.saveConfiguration.saveCallback(),l()}));return t.componentName="ButtonInterface",t}));return{additionalOptions:(0,a.EW)((()=>{const e=[];return[n,o,i].forEach((t=>{void 0!==t.value&&e.push(t.value)})),e})),dataflowname:r,save:c,close:l}}}),Pe=(0,ee.A)(Me,[["render",function(e,t,n,o,i,s){const r=(0,a.g2)("Cross");return(0,a.uX)(),(0,a.CE)("div",Se,[(0,a.Lk)("div",Ie,[Ne,(0,a.bF)(r,{tabindex:"-1",class:"__close",onClick:e.close},null,8,["onClick"])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.additionalOptions,(e=>((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.component),{key:e.id,intf:e},null,8,["intf"])))),128)),(0,a.eW)(" File name: "),((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.dataflowname.component),{intf:e.dataflowname,class:"__name-option",modelValue:e.saveConfiguration.saveName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.saveConfiguration.saveName=t)},null,8,["intf","modelValue"])),((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.save.component),{intf:e.save},null,8,["intf"]))])}]]),Fe={class:"blur-panel"},Oe={},Te=(0,ee.A)(Oe,[["render",function(e,t){return(0,a.uX)(),(0,a.CE)("div",Fe,[(0,a.RG)(e.$slots,"default")])}]]);var He=n(73510);const Xe=(e,t)=>{const n=document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=t,n.click()},We={saveName:"specification",saveCallback(){const e=new Blob([JSON.stringify(oe.Ay.getEditorManagerInstance().saveSpecification(),null,4)],{type:"application/json"});Xe(e,this.saveName),ie.A.showToast("info","Specification saved")},reset(){this.saveName="specification"}},_e={readonly:!1,hideHud:!1,position:!1,saveName:"save",saveCallback(){const e=new Blob([JSON.stringify(oe.Ay.getEditorManagerInstance().saveDataflow(this.readonly,this.hideHud,this.position),null,4)],{type:"application/json"});Xe(e,this.saveName),ie.A.showToast("info","Dataflow saved")},saveCallbackCustomFormat(e){const t=document.createElement("a");let n;"string"==typeof e?(n="application/octet-stream",t.href=`data:${n};base64,${e}`):(n="application/json",t.href=window.URL.createObjectURL(new Blob([JSON.stringify(e)],{type:n}))),t.download=this.saveName,t.click(),ie.A.showToast("info",`File saved successfully: ${this.saveName}`)},reset(){this.readonly=!1,this.hideHud=!1,this.position=!1,this.saveName="save"}};var Re=n(36429),Ve=n(49641),Be=n(41857);const $e={components:{Logo:V.A,Arrow:B.A,Run:Q.A,CassetteStop:j.A,Validate:q.A,Backend:G.A,Bell:K.A,DropdownItem:te,Expand:$.A,Collapse:D.A,Notifications:me,Magnifier:ae.A,Cogwheel:ne.A,Settings:Ae,Cube:U.A,SaveMenu:Pe,BlurPanel:Te,CustomSidebar:He.A},computed:{dataflowGraphName(){return this.editorManager.editor.graphName},editorTitle(){if(void 0===this.graphName)return this.appName;const e=this.graphName.trim();return""===e?this.appName:e},preview(){const e=new URLSearchParams(window.location.search);return!!e.has("preview")&&"true"===e.get("preview")},hideHud(){return this.editorManager.editor.hideHud},readonly(){return this.editorManager.editor.readonly},settingsOpen(){return this.panels.settings.isOpen},notificationsOpen(){return this.panels.notifications.isOpen},paletteOpen(){return this.panels.palette.isOpen},backendStatusOpen(){return this.panels.backendStatus.isOpen},notificationsTooltipClasses(){return{last:!this.hideHud}},backendStatusTooltipClasses(){return{last:this.hideHud&&this.externalApplicationManager.backendAvailable}},settingsTooltipClasses(){return{last:this.hideHud&&!this.externalApplicationManager.backendAvailable}},navbarItems(){const{navbarItems:e}=this.editorManager.baklavaView;return e.forEach((e=>{void 0===Re.A[e.iconName]?(e.icon=(0,s.IG)(Re.A.Placeholder),e.iconName=this.editorManager.baklavaView.cache[`./${e.iconName}`]):e.icon=(0,s.IG)(Re.A[e.iconName])})),e},leftButtonsQuantity(){return 2+(this.externalApplicationManager.backendAvailable?this.navbarItems.length:0)+(this.editorManager.editor.isInSubgraph()?1:0)},rightButtonsQuantity(){return 3+(this.externalApplicationManager.backendAvailable?1:0)},isNavBarCompressed(){return this.isMounted&&this.windowWidth<(this.leftButtonsQuantity+this.rightButtonsQuantity)*this.buttonWidth+this.searchbarWidthMultiplcity*this.buttonWidth+.5*this.buttonWidth},mobileClasses(){return{"compressed-mobile":this.isNavBarCompressed}},nodesearchInputStyles(){return{width:this.searchbarWidthMultiplcity*this.buttonWidth+"px"}},leftContainerStyles(){return this.isNavBarCompressed?{"flex-grow":this.leftButtonsQuantity}:{}},rightContainerStyles(){return this.isNavBarCompressed?{"flex-grow":this.rightButtonsQuantity,"justify-content":"right"}:{"justify-content":"right"}},activeNavbarItems(){return this.activeNavbarItemsNames}},watch:{dataflowGraphName(e){this.graphName=e,We.reset(),_e.reset()},graphName(e){this.editorManager.updateSubgraphName(e),We.reset(),_e.reset()},searchEditorNodesQuery(e){const{viewModel:t}=(0,_.if)();t.value.editor.searchQuery=""!==e?e.toLowerCase():void 0},navbarItems(e){this.activeNavbarItemsNames=e.map((e=>e.procedureName))}},data(){const e=oe.Ay.getEditorManagerInstance(),t=e.baklavaView.editor.graphName??"",n={NODE_ENV:"production",VUE_APP_STATIC:"true",VUE_APP_VERBOSE:"false",VUE_APP_GRAPH_DEVELOPMENT_MODE:"false",BASE_URL:""}.VUE_APP_EDITOR_TITLE??"Pipeline Manager",o=new xe.A("Graph name","").setPort(!1);o.componentName="InputInterface",o.setComponent((0,s.IG)(Le.A));const i=(0,s.KR)("");return re.A.setHook(this.updateActiveNavbarItems),(0,a.Gt)("hoveredOver",(()=>{})),{appName:n,graphName:t,editorManager:e,editorTitleInterface:o,externalApplicationManager:(0,le.A)(),activeNavbarItemsNames:[],saveConfiguration:_e,saveGraphConfiguration:_e,saveSpecificationConfiguration:We,saveMenuShow:!1,editTitle:!1,notificationStore:se.xv,showSearch:!1,crossIcon:(0,s.IG)(Re.A.Cross),searchEditorNodesQuery:i,navbarGuard:!1,isMounted:!1,windowWidth:0,buttonWidth:0,searchbarWidthMultiplcity:4,hoverInfo:{isHovered:!1,hoveredPanel:void 0},panels:{notifications:{isOpen:!1,class:".notifications",iconRef:"notifications",showTransform:"-495px, 0px",hideTransform:"0px, 0px"},palette:{isOpen:!this.$isMobile,class:".baklava-node-palette",iconRef:"palette",showTransform:"0px, 0px",hideTransform:"-450px, 0px"},backendStatus:{isOpen:!1,class:".backend-status",iconRef:"backend",showTransform:"-89%, 0px",hideTransform:"-89%, -180px"},settings:{isOpen:!1,class:".settings-panel",iconRef:"settings",showTransform:"-495px, 0px",hideTransform:"0px, 0px"},nodesearch:{isOpen:!1},fullscreen:{isOpen:R.api.isFullscreen}}}},methods:{loadSpecification(e){const t=oe.Ay.validateSpecification(e);Array.isArray(t)&&t.length?ie.A.terminalLog("error","Specification is invalid",t):this.editorManager.updateEditorSpecification(e).then((({errors:e,warnings:t})=>{Array.isArray(t)&&t.length&&ie.A.terminalLog("warning","Issue when loading specification",t),Array.isArray(e)&&e.length&&ie.A.terminalLog("error","Specification is invalid",e)}))},createNewGraphCallback(){(0,Be.nb)(),this.editorManager.editor.deepCleanEditor(!1),(0,Be.wH)()},loadSpecificationCallback(){const e=document.getElementById("load-spec-button").files[0];if(!e)return;const t=new FileReader;t.onload=()=>{this.loadSpecification(t.result)},t.readAsText(e),document.getElementById("load-spec-button").value=""},togglePanel(e,t=!1){const n=document.querySelector(e.class),a=this.$refs[e.iconRef];e.isOpen=!t&&!e.isOpen;const o=e.isOpen;n&&(n.style.transition=`transform ${o?"0.4":"0.2"}s`,n.style.transform=`translate(${o?e.showTransform:e.hideTransform})`,a.classList.toggle("open",o))},toggleFullscreen(){R.api.isEnabled?R.api.toggle():ie.A.showToast("error","Fullscreen is not supported")},clickOutside(e,t){const n=this.$refs[t.iconRef];if(!n)return;const a=e.target;a instanceof Node&&(n.contains(a)||n===a)||this.togglePanel(t,!0)},loadDataflow(e){this.editorManager.loadDataflow(e).then((({errors:e,warnings:t})=>{if(Array.isArray(t)&&t.length&&ie.A.terminalLog("warning","Issue when loading dataflow",t),Array.isArray(e)&&e.length){const t="Dataflow is invalid";ie.A.terminalLog("error",t,e)}}))},loadDataflowCallback(){const e=document.getElementById("load-dataflow-button").files[0];if(!e)return;const t=new FileReader;t.onload=async()=>{let e=null;try{e=W().parse(t.result)}catch(e){return void(e instanceof SyntaxError?ie.A.terminalLog("error","Not a proper JSON file",e.toString()):ie.A.terminalLog("error","Unknown error",e.toString()))}await this.externalApplicationManager.notifyAboutChange("graph_on_change",{dataflow:e}),this.loadDataflow(e)},t.readAsText(e),document.getElementById("load-dataflow-button").value=""},async requestDataflowAction(e){if(!this.externalApplicationManager.backendAvailable)return;if(this.isInProgress(e.procedureName)&&this.isStoppable(e.procedureName))return void await this.externalApplicationManager.requestDataflowStop(e.procedureName);const t=this.activeNavbarItemsNames.includes(e.procedureName);t&&!this.isInProgress(e.procedureName)?await this.externalApplicationManager.requestDataflowAction(e.procedureName):t&&ie.A.terminalLog("warning",`${e.name} cannot be stopped`)},async requestDataflowExport(e=!0){if(!this.externalApplicationManager.backendAvailable)return;const t=await this.externalApplicationManager.requestDataflowExport();!1!==t&&(this.saveConfiguration={..._e},this.saveConfiguration.saveName=t.filename??_e.saveName,e?(this.saveConfiguration.readonly=void 0,this.saveConfiguration.hideHud=void 0,this.saveConfiguration.position=void 0,this.saveConfiguration.saveCallback=()=>{this.saveConfiguration.saveCallbackCustomFormat(t.content),this.saveConfiguration=_e},this.saveMenuShow=!0):this.saveConfiguration.saveCallbackCustomFormat(t.content))},importDataflow(){if(!this.externalApplicationManager.backendAvailable)return;const e=document.getElementById("request-dataflow-button").files[0];if(!e)return;const t=new FileReader;t.onload=async()=>{await this.externalApplicationManager.importDataflow(t.result)},t.readAsText(e)},exportToPng(){const e=document.querySelector(".inner-editor");(0,H.$E)(e,{filter:e=>!e.classList?.contains("baklava-node-palette"),imagePlaceholder:Ve.L}).then((e=>{const t=document.createElement("a");t.download="dataflow.png",t.href=e,t.dataset.downloadurl=[e,t.download,t.href].join(":"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})).catch((e=>{ie.A.showToast("error",`Export to PNG failed: ${e}`)}))},exportToSvg(){const e=document.querySelector(".inner-editor");(0,H.YI)(e,{filter:e=>!e.classList?.contains("baklava-node-palette"),imagePlaceholder:Ve.L}).then((e=>{const t=document.createElement("a");t.download="dataflow.svg",t.href=e,t.dataset.downloadurl=[e,t.download,t.href].join(":"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})).catch((e=>{ie.A.showToast("error",`Export to SVG failed: ${e}`)}))},onClickNodeSearch(){this.togglePanel(this.panels.nodesearch),this.panels.nodesearch.isOpen&&this.$nextTick((()=>this.$refs.searchbarInput.focus()))},openNavbar(){this.navbarGuard=!0,this.$refs.navbar.classList.add("isHovered")},handleMouseLeave(e){this.$refs.navbar.classList.contains("isHovered")&&(!this.hideHud&&!this.$isMobile||this.editorManager.baklavaView.displayedGraph.sidebar.visible||e.target.closest(".baklava-node-palette")||(this.navbarGuard?this.navbarGuard=!1:(this.togglePanel(this.panels.palette,!0),this.$refs.navbar.classList.remove("isHovered"))))},updateHoverInfo(e,t=!1){(!t||this.activeNavbarItemsNames.includes(e)||this.isInProgress(e))&&(this.hoverInfo.hoveredPanel=e,this.hoverInfo.isHovered=!0)},resetHoverInfo(e){this.hoverInfo.hoveredPanel===e&&(this.hoverInfo.hoveredPanel=void 0,this.hoverInfo.isHovered=!1)},isHovered(e){return this.hoverInfo.hoveredPanel===e&&this.hoverInfo.isHovered},isInProgress:e=>re.A.get(e).inProgress,isStoppable(e){return this.externalApplicationManager.appCapabilities.stoppable_methods?.includes(e)??!0},getNavbarActionTooltip(e){return this.isStoppable(e.procedureName)&&this.isInProgress(e.procedureName)?void 0!==e.stopName?e.stopName:`Stop ${e.name}`:e.name},updateActiveNavbarItems(){const{navbarItems:e}=this;let t=new Set(e.map((e=>e.procedureName)));e.filter((e=>this.isInProgress(e.procedureName))).forEach((e=>{t=new Set((e.allowToRunInParallelWith??[]).filter((e=>t.has(e)))).add(e.procedureName)})),this.activeNavbarItemsNames=Array.from(t)},returnFromSubgraph(){this.editorManager.returnFromSubgraph(),this.resetHoverInfo("subgraphReturn")}},async mounted(){this.isMounted=!0,this.buttonWidth=this.$refs.palette.offsetWidth,this.windowWidth=window.innerWidth,window.addEventListener("resize",(()=>{this.windowWidth=window.innerWidth,this.$refs.palette&&(this.buttonWidth=this.$refs.palette.offsetWidth)})),document.addEventListener("fullscreenchange",(()=>{this.panels.fullscreen.isOpen=!R.api.isFullscreen})),this.externalApplicationManager.backendAvailable&&this.externalApplicationManager.startStatusInterval()}},De=(0,ee.A)($e,[["render",function(e,t,n,i,s,l){const H=(0,a.g2)("SaveMenu"),X=(0,a.g2)("BlurPanel"),W=(0,a.g2)("Logo"),_=(0,a.g2)("DropdownItem"),R=(0,a.g2)("Cube"),V=(0,a.g2)("CassetteStop"),B=(0,a.g2)("Arrow"),$=(0,a.g2)("Magnifier"),D=(0,a.g2)("Expand"),Q=(0,a.g2)("Collapse"),q=(0,a.g2)("Cogwheel"),G=(0,a.g2)("Backend"),K=(0,a.g2)("Bell"),U=(0,a.g2)("Notifications"),j=(0,a.g2)("Settings"),z=(0,a.g2)("CustomSidebar"),J=(0,a.gN)("click-outside");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(o.eB,{name:"fade",onClick:t[1]||(t[1]=(0,o.D$)((e=>s.saveMenuShow=!1),["self"]))},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(X,null,{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(H,{modelValue:s.saveMenuShow,"onUpdate:modelValue":t[0]||(t[0]=e=>s.saveMenuShow=e),viewModel:s.editorManager.baklavaView,saveConfiguration:s.saveConfiguration},null,8,["modelValue","viewModel","saveConfiguration"]),[[o.aG,s.saveMenuShow]])])),_:1},512),[[o.aG,s.saveMenuShow]])])),_:1}),(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",c,[(0,a.bo)((0,a.Lk)("div",{ref:"navbar",class:(0,r.C4)(["wrapper prevent-select",l.hideHud||e.$isMobile?"wrapper-hidden":"wrapper-hud"]),onPointerenter:t[28]||(t[28]=e=>e.target.classList.add("isHovered"))},[(0,a.Lk)("div",d,[(0,a.Lk)("div",{style:(0,r.Tr)(l.leftContainerStyles)},[(0,a.Lk)("div",{class:(0,r.C4)(["logo",l.mobileClasses]),onPointerover:t[2]||(t[2]=()=>l.updateHoverInfo("logo")),onPointerleave:t[3]||(t[3]=()=>l.resetHoverInfo("logo"))},[(0,a.bF)(W,{hover:l.isHovered("logo")},null,8,["hover"]),(0,a.Lk)("div",u,[this.editorManager.specificationLoaded?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[l.readonly?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(_,{key:0,id:"create-new-graph-button",text:"Create new graph",type:"'button'",eventFunction:l.createNewGraphCallback},null,8,["eventFunction"])),this.externalApplicationManager.externalApplicationConnected?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[p,(0,a.bF)(_,{text:"Load file",id:"request-dataflow-button",eventFunction:l.importDataflow},null,8,["eventFunction"]),(0,a.bF)(_,{text:"Save file",type:"button",eventFunction:async()=>l.requestDataflowExport(!1)},null,8,["eventFunction"]),(0,a.bF)(_,{text:"Save file as...",type:"button",eventFunction:async()=>l.requestDataflowExport(!0)},null,8,["eventFunction"])],64)):(0,a.Q3)("",!0),v],64)):(0,a.Q3)("",!0),this.externalApplicationManager.backendAvailable||l.hideHud?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.bF)(_,{text:"Load specification",id:"load-spec-button",eventFunction:l.loadSpecificationCallback},null,8,["eventFunction"]),this.editorManager.specificationLoaded?((0,a.uX)(),(0,a.Wv)(_,{key:0,text:"Save specification as...",type:"'button'",eventFunction:()=>{s.saveMenuShow=!s.saveMenuShow,s.saveConfiguration=s.saveSpecificationConfiguration}},null,8,["eventFunction"])):(0,a.Q3)("",!0),h],64)),this.editorManager.specificationLoaded?((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[l.hideHud?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(_,{key:0,id:"load-dataflow-button",text:"Load graph file",eventFunction:l.loadDataflowCallback},null,8,["eventFunction"])),(0,a.bF)(_,{type:"'button'",text:"Save graph file",eventFunction:()=>s.saveGraphConfiguration.saveCallback()},null,8,["eventFunction"]),(0,a.bF)(_,{type:"'button'",text:"Save graph as file as...",eventFunction:()=>{s.saveMenuShow=!s.saveMenuShow,s.saveConfiguration=s.saveGraphConfiguration}},null,8,["eventFunction"]),m],64)):(0,a.Q3)("",!0),(0,a.bF)(_,{type:"'button'",text:"Export graph to PNG",eventFunction:l.exportToPng},null,8,["eventFunction"]),(0,a.bF)(_,{type:"'button'",text:"Export graph to HTML-based SVG",eventFunction:l.exportToSvg},null,8,["eventFunction"])])],34),l.hideHud||l.readonly?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",{key:0,ref:"palette",class:(0,r.C4)(["hoverbox",l.mobileClasses]),role:"button",onClick:t[4]||(t[4]=()=>l.togglePanel(s.panels.palette)),onPointerover:t[5]||(t[5]=()=>l.updateHoverInfo("palette")),onPointerleave:t[6]||(t[6]=()=>l.resetHoverInfo("palette"))},[(0,a.bF)(R,{hover:l.isHovered("palette"),class:"small_svg"},null,8,["hover"]),(0,a.Lk)("div",{class:(0,r.C4)(["tooltip",l.mobileClasses])},[l.paletteOpen?((0,a.uX)(),(0,a.CE)("span",g,"Hide node browser")):((0,a.uX)(),(0,a.CE)("span",f,"Show node browser"))],2)],34)),this.externalApplicationManager.backendAvailable?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(l.navbarItems,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.name,id:`navbar-button-${e.procedureName}`,class:(0,r.C4)([l.activeNavbarItems.includes(e.procedureName)||l.isInProgress(e.procedureName)?"hoverbox":"box",l.mobileClasses,{"button-in-progress":l.isInProgress(e.procedureName)}]),role:"button",onClick:async()=>l.requestDataflowAction(e),onPointerover:()=>l.updateHoverInfo(e.procedureName,!0),onPointerleave:()=>l.resetHoverInfo(e.procedureName)},[l.isStoppable(e.procedureName)&&l.isInProgress(e.procedureName)?((0,a.uX)(),(0,a.Wv)(V,{key:0,class:"small_svg",hover:l.isHovered(e.procedureName)},null,8,["hover"])):((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.icon),{key:1,class:"small_svg",hover:l.isHovered(e.procedureName),imgURI:e.iconName},null,8,["hover","imgURI"])),C,(0,a.Lk)("div",{class:(0,r.C4)(["tooltip",l.mobileClasses])},[(0,a.Lk)("span",null,(0,r.v_)(l.getNavbarActionTooltip(e)),1)],2)],42,b)))),128)):(0,a.Q3)("",!0),this.editorManager.editor.isInSubgraph()?((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,r.C4)(["hoverbox",l.mobileClasses]),role:"button",onClick:t[7]||(t[7]=(...e)=>l.returnFromSubgraph&&l.returnFromSubgraph(...e)),onPointerover:t[8]||(t[8]=()=>l.updateHoverInfo("subgraphReturn")),onPointerleave:t[9]||(t[9]=()=>l.resetHoverInfo("subgraphReturn"))},[(0,a.bF)(B,{rotate:"down",hover:l.isHovered("subgraphReturn"),color:"white",class:"small_svg"},null,8,["hover"]),(0,a.Lk)("div",{class:(0,r.C4)(["tooltip",l.mobileClasses])},y,2)],34)):(0,a.Q3)("",!0)],4),s.editTitle&&!s.panels.nodesearch.isOpen?(0,a.bo)(((0,a.uX)(),(0,a.Wv)((0,a.$y)(s.editorTitleInterface.component),{key:0,intf:s.editorTitleInterface,class:(0,r.C4)(["editorTitleInput",l.mobileClasses]),modelValue:s.graphName,"onUpdate:modelValue":t[10]||(t[10]=e=>s.graphName=e)},null,8,["intf","class","modelValue"])),[[J,()=>{s.editTitle=!1}]]):(0,a.Q3)("",!0),s.editTitle||s.panels.nodesearch.isOpen?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",{key:1,class:(0,r.C4)(["editorTitle",l.mobileClasses]),onDblclick:t[11]||(t[11]=e=>s.editTitle=!l.readonly)},(0,r.v_)(l.editorTitle),35)),(0,a.Lk)("div",{style:(0,r.Tr)(l.rightContainerStyles)},[(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",{ref:"searchbar",class:(0,r.C4)(["hoverbox",l.mobileClasses]),role:"button",onPointerover:t[12]||(t[12]=()=>l.updateHoverInfo("search")),onPointerleave:t[13]||(t[13]=()=>{l.resetHoverInfo("search")}),onClick:t[14]||(t[14]=(...e)=>l.onClickNodeSearch&&l.onClickNodeSearch(...e))},[(0,a.bF)($,{hover:l.isHovered("search"),class:"small_svg"},null,8,["hover"]),(0,a.Lk)("div",{class:(0,r.C4)(["tooltip",l.mobileClasses,l.settingsTooltipClasses])},[s.panels.nodesearch.isOpen?((0,a.uX)(),(0,a.CE)("span",k,"Hide node search bar")):((0,a.uX)(),(0,a.CE)("span",w,"Show node search bar"))],2)],34)),[[J,()=>s.panels.nodesearch.isOpen=""!=s.searchEditorNodesQuery]]),(0,a.bo)((0,a.Lk)("div",{style:(0,r.Tr)(l.nodesearchInputStyles),class:(0,r.C4)(["search-editor-nodes",l.mobileClasses])},[(0,a.bo)((0,a.Lk)("input",{ref:"searchbarInput","onUpdate:modelValue":t[15]||(t[15]=e=>s.searchEditorNodesQuery=e),placeholder:"Search for nodes"},null,512),[[o.Jo,s.searchEditorNodesQuery]])],6),[[o.aG,s.panels.nodesearch.isOpen]]),(0,a.Lk)("div",{ref:"fullscreen",class:(0,r.C4)(["hoverbox",l.mobileClasses]),role:"button",onClick:t[16]||(t[16]=(...e)=>l.toggleFullscreen&&l.toggleFullscreen(...e)),onPointerover:t[17]||(t[17]=()=>l.updateHoverInfo("Fullscreen")),onPointerleave:t[18]||(t[18]=()=>l.resetHoverInfo("Fullscreen"))},[s.panels.fullscreen.isOpen?((0,a.uX)(),(0,a.Wv)(Q,{key:1,hover:l.isHovered("Fullscreen"),class:"small_svg"},null,8,["hover"])):((0,a.uX)(),(0,a.Wv)(D,{key:0,hover:l.isHovered("Fullscreen"),class:"small_svg"},null,8,["hover"])),(0,a.Lk)("div",{class:(0,r.C4)(["tooltip",l.mobileClasses,l.settingsTooltipClasses])},[s.panels.fullscreen.isOpen?((0,a.uX)(),(0,a.CE)("span",A,"Disable fullscreen")):((0,a.uX)(),(0,a.CE)("span",E,"Enable fullscreen"))],2)],34),(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",{ref:"settings",class:(0,r.C4)(["hoverbox",l.mobileClasses]),role:"button",onClick:t[19]||(t[19]=()=>l.togglePanel(s.panels.settings)),onPointerover:t[20]||(t[20]=()=>l.updateHoverInfo("settings")),onPointerleave:t[21]||(t[21]=()=>l.resetHoverInfo("settings"))},[(0,a.bF)(q,{hover:l.isHovered("settings"),class:"small_svg"},null,8,["hover"]),(0,a.Lk)("div",{class:(0,r.C4)(["tooltip",l.mobileClasses,l.settingsTooltipClasses])},[s.panels.settings.isOpen?((0,a.uX)(),(0,a.CE)("span",I,"Hide settings")):((0,a.uX)(),(0,a.CE)("span",S,"Show settings"))],2)],34)),[[J,()=>s.panels.settings.isOpen=!1]]),this.externalApplicationManager.backendAvailable?((0,a.uX)(),(0,a.CE)("div",{key:0,ref:"backend",class:(0,r.C4)(["hoverbox",l.mobileClasses]),onClick:t[22]||(t[22]=()=>l.togglePanel(s.panels.backendStatus)),onPointerover:t[23]||(t[23]=()=>l.updateHoverInfo("backendStatus")),onPointerleave:t[24]||(t[24]=()=>l.resetHoverInfo("backendStatus"))},[this.externalApplicationManager.externalApplicationConnected?((0,a.uX)(),(0,a.Wv)(G,{key:0,color:"connected",class:"small_svg",active:l.backendStatusOpen,hover:l.isHovered("backendStatus")},null,8,["active","hover"])):((0,a.uX)(),(0,a.Wv)(G,{key:1,color:"disconnected",class:"small_svg",active:l.backendStatusOpen,hover:l.isHovered("backendStatus")},null,8,["active","hover"])),(0,a.Lk)("div",{class:(0,r.C4)(["tooltip",l.mobileClasses,l.backendStatusTooltipClasses])},N,2),(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",x,[(0,a.Lk)("div",null,[L,this.externalApplicationManager.externalApplicationConnected?((0,a.uX)(),(0,a.CE)("span",M,"Connected")):((0,a.uX)(),(0,a.CE)("span",P,"Disconnected"))])])),[[J,e=>l.clickOutside(e,s.panels.backendStatus)]])],34)):(0,a.Q3)("",!0),l.hideHud?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",{key:1,ref:"notifications",class:(0,r.C4)(["hoverbox",l.mobileClasses]),role:"button",onClick:t[25]||(t[25]=()=>l.togglePanel(s.panels.notifications)),onPointerover:t[26]||(t[26]=()=>l.updateHoverInfo("notifications")),onPointerleave:t[27]||(t[27]=()=>l.resetHoverInfo("notifications"))},[(0,a.bF)(K,{id:"navbar-bell",color:this.notificationStore.notifications.length>0?"green":"gray",hover:l.isHovered("notifications"),class:"small_svg"},null,8,["color","hover"]),l.notificationsOpen?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,r.C4)(["tooltip",l.mobileClasses,l.notificationsTooltipClasses])},F,2)):((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,r.C4)(["tooltip",l.mobileClasses,l.notificationsTooltipClasses])},O,2))],34))],4)]),T],34),[[o.aG,!l.preview]]),(0,a.bo)((0,a.bF)(U,null,null,512),[[J,e=>l.clickOutside(e,s.panels.notifications)]]),(0,a.bo)((0,a.bF)(j,{viewModel:s.editorManager.baklavaView},null,8,["viewModel"]),[[J,e=>l.clickOutside(e,s.panels.settings)]]),(0,a.bF)(z,{onSidebarOpen:l.openNavbar},null,8,["onSidebarOpen"])])),[[J,e=>l.handleMouseLeave(e)]])],64)}],["__scopeId","data-v-45b20100"]]),Qe={class:"container"},qe={class:"tab"},Ge=["onClick"],Ke={class:"indicator-wrapper"},Ue={class:"button-wrapper"},je=(e=>((0,a.Qi)("data-v-028890e5"),e=e(),(0,a.jt)(),e))((()=>(0,a.Lk)("span",null,"Clear terminal",-1))),ze={id:"hterm-terminal"};var Je=n(25672);const Ye=(0,a.pM)({props:{terminalInstance:{type:String}},setup(e){let t;const n={"background-color":"#1d1d1d","cursor-color":"white","mouse-right-click-paste":!1,"pass-meta-v":!1,"mouse-paste-button":"no-button","pass-on-drop":!1,"shift-insert-paste":!1},o=(0,a.EW)((()=>se.iP.logs[e.terminalInstance])),i=(0,a.EW)((()=>void 0===o.value?0:o.value.length)),s=n=>{void 0!==t&&t.io.print(e.terminalInstance===se.d?n.replace(/\n/g,"\r\n"):n)};let r=0;const l=(0,le.A)();(0,a.sV)((async()=>{await Je.c.init(),Object.keys(n).forEach((e=>{localStorage.setItem(`/hterm/profiles/default/${e}`,n[e])})),t=new Je.D.Terminal,t.scrollPort_.contenteditable=!1,t.onTerminalReady=function(){this.io.sendString=t=>{se.iP.isReadOnly(e.terminalInstance)||l.requestTerminalRead(e.terminalInstance,t)},this.onVTKeystroke=t=>{se.iP.isReadOnly(e.terminalInstance)||l.requestTerminalRead(e.terminalInstance,t)},this.io.onTerminalResize=()=>{this.focus()},this.installKeyboard()},t.decorate(document.querySelector("#hterm-terminal")),(0,a.wB)([()=>e.terminalInstance,i],(async([n,o],[i,l])=>{void 0!==n&&(se.iP.readOnly[e.terminalInstance]?(t.scrollPort_.contenteditable=!1,t.setCursorVisible(!1)):(t.scrollPort_.contenteditable=!0,t.setCursorVisible(!0)),await(0,a.dY)(),i===n&&0!==o||(r=0,void 0!==t&&(s("[0m"),t.scrollHome(),t.wipeContents())),l!==o||i!==n)&&se.iP.logs[n].slice(r).forEach(((e,t)=>{r>0&&n===se.d&&s("\n\n"),s(e),r+=1}))}))}))}}),Ze=(0,ee.A)(Ye,[["render",function(e,t,n,o,i,s){return(0,a.uX)(),(0,a.CE)("div",ze)}],["__scopeId","data-v-c10c6824"]]);var et=n(90479),tt=n(97776),nt=n(5292);const at=(0,a.pM)({components:{Arrow:B.A,Indicator:et.A,Bin:tt.A,Terminal:Ze},setup(){const e=(0,s.KR)(null),t=(0,s.KR)(null),n=(0,s.KR)(void 0),o=(0,s.KR)(!1),i=(0,s.KR)(0),r=(0,s.KR)(!1),l=(0,a.EW)((()=>o.value?{height:`${Math.max(i.value,395)}px`}:{height:"unset"})),c=(0,a.EW)((()=>({"pointer-events":o.value?"all":"none"})));(0,a.sV)((()=>{e.value.addEventListener("mousedown",(0,nt.q)((e=>{i.value=e})))}));const d=(0,s.KR)([]),u=(0,a.EW)((()=>{const e=Object.values(se.iP.logs).map((e=>e.length)),t=Object.keys(se.iP.logs),n=[];for(let a=0;a<t.length;a+=1)n.push({name:t[a],length:e[a]});return n}));(0,a.wB)(u,((e,t)=>{const a=null==t?void 0:t.map((e=>e.name));e.forEach((e=>{(null==a?void 0:a.includes(e.name))?t.find((t=>t.name===e.name)).length!==e.length&&e.name!==n.value&&(d.value.find((t=>t.name===e.name)).hasNewMessage=!0):d.value.push({name:e.name,hasNewMessage:0!==e.length})}))}),{immediate:!0});const p=e=>{d.value.forEach((t=>{t.name===e&&(t.hasNewMessage=!1)}))};return{toggleTerminalPanel:e=>{var i,s;if(void 0!==e||o.value)if(e===n.value||void 0===e)n.value=void 0,o.value=!1;else{const a=null!==(s=null===(i=t.value)||void 0===i?void 0:i.style.height)&&void 0!==s?s:"unset";n.value=e,o.value=!0,p(e),"unset"!==a&&(l.value.height=a)}else n.value=se.d,o.value=!0,p(se.d);void 0===n.value||se.iP.isReadOnly(n.value)||(0,a.dY)().then((()=>{var e;return null===(e=document.getElementById("hterm-terminal"))||void 0===e?void 0:e.focus()}))},clearTerminalOutput:e=>{void 0!==e?se.iP.remove(e):se.iP.remove()},displayedTerminals:d,activeTerminal:n,isTerminalPanelOpened:o,resizer:e,terminalWrapper:t,pipelineSpanClasses:e=>({active:o.value&&e===n.value}),terminalWrapperStyles:l,resizerStyles:c,arrowHovered:r,terminalIndicatorColor:e=>e?"green":"gray"}}}),ot=(0,ee.A)(at,[["render",function(e,t,n,i,s,l){const c=(0,a.g2)("Indicator"),d=(0,a.g2)("Bin"),u=(0,a.g2)("Arrow"),p=(0,a.g2)("Terminal");return(0,a.uX)(),(0,a.CE)("div",{ref:"terminalWrapper",class:"terminal-wrapper",style:(0,r.Tr)(e.terminalWrapperStyles)},[(0,a.Lk)("div",Qe,[(0,a.Lk)("div",{ref:"resizer",class:"resizer",style:(0,r.Tr)(e.resizerStyles)},null,4),(0,a.Lk)("div",qe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.displayedTerminals,(t=>((0,a.uX)(),(0,a.CE)("button",{key:t.name,class:(0,r.C4)(["tab-item",e.pipelineSpanClasses(t.name)]),onClick:n=>e.toggleTerminalPanel(t.name)},[(0,a.Lk)("span",{class:(0,r.C4)(e.pipelineSpanClasses(t.name))},(0,r.v_)(t.name),3),(0,a.Lk)("div",Ke,[t.hasNewMessage?((0,a.uX)(),(0,a.Wv)(c,{key:0,color:e.terminalIndicatorColor(t.hasNewMessage)},null,8,["color"])):(0,a.Q3)("",!0)])],10,Ge)))),128))]),(0,a.Lk)("div",Ue,[e.isTerminalPanelOpened?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[0]||(t[0]=t=>e.clearTerminalOutput(e.activeTerminal))},[(0,a.bF)(d),je])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[1]||(t[1]=()=>{e.arrowHovered=!1,e.toggleTerminalPanel(void 0)}),onMouseenter:t[2]||(t[2]=t=>e.arrowHovered=!0),onMouseleave:t[3]||(t[3]=t=>e.arrowHovered=!1)},[e.isTerminalPanelOpened?((0,a.uX)(),(0,a.Wv)(u,{key:1,color:"white",scale:"small",rotate:"left",hover:e.arrowHovered},null,8,["hover"])):((0,a.uX)(),(0,a.Wv)(u,{key:0,color:"white",scale:"small",rotate:"up",hover:e.arrowHovered},null,8,["hover"]))],32)])]),(0,a.bo)((0,a.bF)(p,{terminalInstance:e.activeTerminal},null,8,["terminalInstance"]),[[o.aG,e.isTerminalPanelOpened]])],4)}],["__scopeId","data-v-028890e5"]]),it={class:"loading-screen"},st={components:{SelfBuildingSquareSpinner:n(21953).F}},rt=(0,ee.A)(st,[["render",function(e,t,n,o,i,s){const r=(0,a.g2)("SelfBuildingSquareSpinner");return(0,a.uX)(),(0,a.CE)("div",it,[(0,a.bF)(r,{id:"loading-screen-spinner",size:80})])}]]),lt={components:{NavBar:De,Editor:n(89401).A,TerminalPanel:ot,LoadingScreen:rt},setup(){const e=oe.Ay.getEditorManagerInstance(),t=(0,s.KR)(!1),n={};try{(o=Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}())).keys().forEach((e=>n[e]=o(e)))}catch(e){}finally{e.baklavaView.cache=n}var o;const i=(0,a.EW)((()=>e.baklavaView.editor.hideHud));return{editorManager:e,hideHud:i,handleLoadFinish:()=>{t.value=!0},finishedLoading:t}}},ct=(0,ee.A)(lt,[["render",function(e,t,n,s,r,l){const c=(0,a.g2)("LoadingScreen"),d=(0,a.g2)("NavBar"),u=(0,a.g2)("Editor"),p=(0,a.g2)("TerminalPanel");return(0,a.uX)(),(0,a.CE)("div",null,[s.finishedLoading?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(c,{key:0})),(0,a.Lk)("div",i,[(0,a.bF)(d),(0,a.bF)(u,{class:"inner-editor","view-model":s.editorManager.baklavaView,onLoadFinish:s.handleLoadFinish},null,8,["view-model","onLoadFinish"]),(0,a.bo)((0,a.bF)(p,null,null,512),[[o.aG,s.finishedLoading&&!s.hideHud]])])])}]])},33305:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(20641),o=n(90033);const i={class:"notification-badge"},s={class:"notification-message"},r={class:"message"};var l=n(72409);const c={components:{ExclamationMark:n(809).A,Cross:l.A},props:{type:{type:String,required:!0}}};var d=n(66262);const u=(0,d.A)(c,[["render",function(e,t,n,i,s,r){const l=(0,a.g2)("ExclamationMark"),c=(0,a.g2)("Cross");return(0,a.uX)(),(0,a.CE)("div",{class:(0,o.C4)(n.type)},["info"===n.type?((0,a.uX)(),(0,a.Wv)(l,{key:0})):(0,a.Q3)("",!0),"warning"===n.type?((0,a.uX)(),(0,a.Wv)(l,{key:1,rotate:"flip"})):(0,a.Q3)("",!0),"error"===n.type?((0,a.uX)(),(0,a.Wv)(c,{key:2,color:"white"})):(0,a.Q3)("",!0)],2)}],["__scopeId","data-v-9ef0f814"]]);var p=n(35127);const v={components:{Cross:l.A,NotificationBadge:u},props:{message:{type:String,required:!0},type:{type:String,required:!0},border:{type:String,default:"none"},index:{type:Number,default:0}},data:()=>({notificationStore:p.xv}),methods:{remove(){p.xv.removeOne(this.index)}}},h=(0,d.A)(v,[["render",function(e,t,n,l,c,d){const u=(0,a.g2)("NotificationBadge"),p=(0,a.g2)("Cross");return(0,a.uX)(),(0,a.CE)("div",{class:(0,o.C4)([n.border,"notification-container"])},[(0,a.Lk)("div",i,[(0,a.bF)(u,{type:n.type},null,8,["type"])]),(0,a.Lk)("div",s,["info"===n.type?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,o.C4)(n.type)},"Info",2)):(0,a.Q3)("",!0),"warning"===n.type?((0,a.uX)(),(0,a.CE)("span",{key:1,class:(0,o.C4)(n.type)},"Warning",2)):(0,a.Q3)("",!0),"error"===n.type?((0,a.uX)(),(0,a.CE)("span",{key:2,class:(0,o.C4)(n.type)},"Error",2)):(0,a.Q3)("",!0),(0,a.Lk)("span",r,(0,o.v_)(n.message),1)]),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>d.remove&&d.remove(...e)),tabindex:"-1"},[(0,a.bF)(p,{color:"white",tabindex:"-1"})])],2)}],["__scopeId","data-v-0512bfcb"]])},73218:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(20641),o=n(90033);const i=(0,a.pM)({props:{top:{type:Number,default:0},left:{type:Number,default:0},text:{type:String,required:!0}},setup:e=>({styles:(0,a.EW)((()=>{const t={};return t.top=`${e.top}px`,t.left=`${e.left}px`,t}))})}),s=(0,n(66262).A)(i,[["render",function(e,t,n,i,s,r){return(0,a.uX)(),(0,a.CE)("div",{class:"__tooltip",style:(0,o.Tr)(e.styles)},(0,o.v_)(e.text),5)}]])}}]);
//# sourceMappingURL=index-42f9d7e6.369d01ed.js.map