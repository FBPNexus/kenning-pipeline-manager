{"version":3,"file":"js/index-7574f2c7.61f9ad5c.js","mappings":"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","sources":["webpack://pipeline-manager/./src/custom/useDragMove.ts","webpack://pipeline-manager/./src/custom/CustomInterface.vue","webpack://pipeline-manager/./src/custom/CustomInterface.vue?418c","webpack://pipeline-manager/./src/custom/CustomSidebar.vue","webpack://pipeline-manager/./src/custom/CustomSidebar.vue?9ce8","webpack://pipeline-manager/./src/custom/Editor.vue","webpack://pipeline-manager/./src/custom/ContextMenu.vue","webpack://pipeline-manager/./src/custom/ContextMenu.vue?2c86","webpack://pipeline-manager/./src/custom/CustomNode.vue","webpack://pipeline-manager/./src/custom/useGroupDragMove.ts","webpack://pipeline-manager/./src/custom/CustomNode.vue?145c","webpack://pipeline-manager/./src/custom/connection/ConnectionView.vue","webpack://pipeline-manager/./src/custom/connection/ConnectionView.vue?a952","webpack://pipeline-manager/./src/custom/connection/domResolver.js","webpack://pipeline-manager/./src/custom/temporaryConnection.js","webpack://pipeline-manager/./src/custom/connection/PipelineManagerConnection.vue","webpack://pipeline-manager/./src/custom/connection/PipelineManagerConnection.vue?3555","webpack://pipeline-manager/./src/custom/connection/TemporaryConnection.vue","webpack://pipeline-manager/./src/custom/connection/TemporaryConnection.vue?175b","webpack://pipeline-manager/./src/custom/nodepalette/NodePalette.vue","webpack://pipeline-manager/./src/custom/nodepalette/PaletteCategory.vue","webpack://pipeline-manager/./src/custom/LinkMenu.vue","webpack://pipeline-manager/./src/custom/LinkMenu.vue?8fc7","webpack://pipeline-manager/./src/custom/nodepalette/nodeTree.ts","webpack://pipeline-manager/./src/custom/nodepalette/PaletteCategory.vue?9e7c","webpack://pipeline-manager/./src/custom/nodepalette/PaletteEntry.vue","webpack://pipeline-manager/./src/custom/nodepalette/PaletteEntry.vue?1d4f","webpack://pipeline-manager/./src/custom/nodepalette/NodePalette.vue?2aed","webpack://pipeline-manager/./src/custom/RectangleSelection.vue","webpack://pipeline-manager/./src/custom/RectangleSelection.vue?35f7","webpack://pipeline-manager/./src/custom/rectangleSelection.js","webpack://pipeline-manager/./src/custom/panZoom.js","webpack://pipeline-manager/./src/custom/Editor.vue?366e","webpack://pipeline-manager/./src/custom/ sync","webpack://pipeline-manager/./src/custom/ sync ^%21%21raw\\-loader%21.*$","webpack://pipeline-manager/./src/custom/CustomNode.js","webpack://pipeline-manager/./src/custom/Editor.js","webpack://pipeline-manager/./src/custom/CustomGraph.js","webpack://pipeline-manager/./src/custom/CustomGraphNode.js","webpack://pipeline-manager/./src/custom/directives.js"],"sourcesContent":["/*\n * Copyright (c) 2022-2024 Antmicro <www.antmicro.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n *\n */\nimport { computed, ref } from 'vue';\nimport { useGraph, useViewModel } from '@baklavajs/renderer-vue';\nimport { gridSnapper, nodeSnapper } from '../core/snappers';\n/* eslint-disable no-param-reassign, @typescript-eslint/no-explicit-any */\nexport default function useDragMove(positionRef, gridSnapperInstance = undefined, nodeId = undefined) {\n    // any definition is an ad-hoc solution as we don't have our graph definition\n    const { graph } = useGraph();\n    const { viewModel } = useViewModel();\n    const calculateSnappedPosition = gridSnapperInstance !== null && gridSnapperInstance !== void 0 ? gridSnapperInstance : gridSnapper(ref(1));\n    const gridSize = computed(() => viewModel.value.settings.background.gridSize);\n    const backgroundGridSnapper = gridSnapper(gridSize);\n    const nodeSnappers = {\n        x: nodeSnapper('x'),\n        y: nodeSnapper('y'),\n    };\n    const draggingStartPoint = ref(null);\n    const draggingStartPosition = ref(null);\n    const movementStepEnabled = ref(true);\n    const dragging = computed(() => {\n        // If we didn't move, then we are not dragging\n        if (!!draggingStartPoint.value && draggingStartPosition.value) {\n            return (draggingStartPosition.value.x !== positionRef.value.x\n                || draggingStartPosition.value.y !== positionRef.value.y);\n        }\n        return false;\n    });\n    /* eslint-disable arrow-body-style */\n    const calculatePosition = (pos, kind, align = false, gridSnap = false) => {\n        if (align && nodeId !== undefined) {\n            const alignedCoord = nodeSnappers[kind](pos, nodeId, graph.value.selectedNodes.map((node) => node.id));\n            if (alignedCoord !== undefined) {\n                return alignedCoord;\n            }\n        }\n        if (gridSnap) {\n            return backgroundGridSnapper(pos);\n        }\n        // allow either snap-to-grid or free movement\n        return movementStepEnabled.value ? calculateSnappedPosition(pos) : pos;\n    };\n    /* eslint-enable arrow-body-style */\n    if (positionRef.value) {\n        positionRef.value.x = calculatePosition(positionRef.value.x, 'x');\n        positionRef.value.y = calculatePosition(positionRef.value.y, 'y');\n    }\n    const onPointerDown = (ev) => {\n        movementStepEnabled.value = !ev.shiftKey;\n        draggingStartPoint.value = {\n            x: ev.pageX,\n            y: ev.pageY,\n        };\n        draggingStartPosition.value = {\n            x: positionRef.value.x,\n            y: positionRef.value.y,\n        };\n    };\n    const onPointerMove = (ev) => {\n        movementStepEnabled.value = !ev.shiftKey;\n        const align = ev.ctrlKey;\n        const gridSnap = ev.shiftKey;\n        if (draggingStartPoint.value && draggingStartPosition.value) {\n            const dx = ev.pageX - draggingStartPoint.value.x;\n            const dy = ev.pageY - draggingStartPoint.value.y;\n            positionRef.value.x = calculatePosition(draggingStartPosition.value.x + dx / graph.value.scaling, 'x', align, gridSnap);\n            positionRef.value.y = calculatePosition(draggingStartPosition.value.y + dy / graph.value.scaling, 'y', align, gridSnap);\n        }\n    };\n    const onPointerUp = () => {\n        draggingStartPoint.value = null;\n        draggingStartPosition.value = null;\n        movementStepEnabled.value = true;\n    };\n    return {\n        dragging,\n        onPointerDown,\n        onPointerMove,\n        onPointerUp,\n    };\n}\n","<!--\nCopyright (c) 2022-2024 Antmicro <www.antmicro.com>\n\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<!--\nInterface that is used to display inputs, outputs and properties of a node.\n\nThe custom implementations introduces wrapper functions that prevent the user\nfrom creating and deleting connections or altering nodes' values if the editor is read-only.\n-->\n\n<template>\n    <div\n        :id=\"intf.id\"\n        ref=\"el\"\n        class=\"baklava-node-interface\"\n        :class=\"newClasses\"\n    >\n        <div\n            class=\"__port\"\n            v-if=\"intf.port\"\n            @mouseenter=\"startHoverWrapper\"\n            @mouseleave=\"endHoverWrapper\"\n            @pointerdown.left=\"onMouseDown\"\n            :class=\"{ greyedout_arrow: highlighted, picked: picked, '__square': isExposed }\"\n        >\n            <div\n                v-if=\"isExposed && (hovered || editExternalName)\"\n                :class=\"{\n                    '__port_name_left': intf.side === 'left',\n                    '__port_name_right': intf.side === 'right'\n                }\"\n            >\n                <input\n                    v-if=\"editExternalName\"\n                    v-model=\"inputExternalName\"\n                    ref=\"externalNameInput\"\n                    type=\"text\"\n                    spellcheck=\"false\"\n                    autocomplete=\"off\"\n                    class=\"__port_input\"\n                    :class=\"{ '__error': externalNameInputIncorrect }\"\n                    placeholder=\"External name\"\n                    @focusout=\"externalNameFocusOutCallback\"\n                    @keydown.enter.exact.stop=\"(e) => { e.target.blur(); }\"\n                    @input=\"externalNameInputCallback\"\n                    @pointerdown.left.stop=\"(e) => e.stopPropagation()\"\n                    @keydown.ctrl.stop=\"(e) => e.stopPropagation()\"\n                />\n                <span\n                    v-else\n                    @pointerdown.left.stop=\"enableExternalNameEdit\"\n                    @keydown.stop\n                >\n                    {{ intf.externalName }}\n                </span>\n            </div>\n            <Arrow\n                v-if=\"displayArrow\"\n                :noninteractable=\"true\"\n                color=\"black\"\n                scale=\"big\"\n                :rotate=\"arrowRotation\"\n            />\n        </div>\n\n        <!-- @keydown.stop is added so that events are not bubbled up to the editor -->\n        <component\n            :is=\"intf.component\"\n            v-if=\"showComponent\"\n            v-model=\"intf.value\"\n            :node=\"node\"\n            :intf=\"intf\"\n            @keydown.stop\n            :tabindex=\"tabindexValue\"\n        />\n        <span v-else>\n            {{ intf.name }}\n        </span>\n    </div>\n</template>\n\n<script>\nimport {\n    defineComponent, ref, computed, nextTick,\n} from 'vue';\nimport {\n    Components, useViewModel, useGraph, TextInterface,\n} from '@baklavajs/renderer-vue';\nimport Arrow from '../icons/Arrow.vue';\nimport doubleClick from '../core/doubleClick';\nimport { DYNAMIC_INTERFACE_SUFFIX } from '../core/interfaceParser';\n\nexport default defineComponent({\n    extends: Components.NodeInterface,\n    props: {\n        highlighted: Boolean,\n        picked: Boolean,\n        switchSides: {},\n        toggleGroup: { default: () => {}, required: false },\n        updateDynamicInterfaces: { default: () => {}, required: false },\n        tabindexValue: { default: -1, required: false },\n    },\n    components: {\n        Arrow,\n    },\n    setup(props) {\n        const {\n            el, isConnected, showComponent, startHover, endHover, openSidebar,\n        } =\n            Components.NodeInterface.setup(props);\n\n        const { viewModel } = useViewModel();\n        const { graph } = useGraph();\n\n        props.intf.events.beforeSetValue.unsubscribe(props.intf);\n        props.intf.events.beforeSetValue.subscribe(props.intf, (value, prevent) => {\n            if (viewModel.value.editor.readonly) {\n                prevent();\n            }\n\n            if (\n                (props.intf.min !== undefined && value < props.intf.min) ||\n                (props.intf.max !== undefined && value > props.intf.max)\n            ) {\n                prevent();\n            }\n        });\n\n        if (props.intf.group) {\n            props.toggleGroup(props.intf);\n            props.intf.events.setValue.unsubscribe(props.intf);\n            props.intf.events.setValue.subscribe(props.intf, () => props.toggleGroup(props.intf));\n        }\n\n        if (props.intf.name.endsWith(DYNAMIC_INTERFACE_SUFFIX)) {\n            props.updateDynamicInterfaces(props.intf);\n            props.intf.events.setValue.unsubscribe(props.intf);\n            props.intf.events.setValue.subscribe(props.intf, () =>\n                props.updateDynamicInterfaces(props.intf),\n            );\n        }\n\n        const hovered = ref(false);\n        const startHoverWrapper = () => {\n            hovered.value = true;\n            if (!viewModel.value.editor.readonly) {\n                startHover();\n            }\n        };\n\n        const endHoverWrapper = () => {\n            hovered.value = false;\n            if (!viewModel.value.editor.readonly) {\n                endHover();\n            }\n        };\n\n        /* eslint-disable vue/no-mutating-props,no-param-reassign */\n        const onMouseDown = doubleClick(700, () => {\n            if (!viewModel.value.editor.readonly) {\n                props.switchSides(props.intf);\n                endHover();\n            }\n        });\n\n        const displayArrow = props.intf.port && props.intf.direction !== 'inout';\n        const arrowRotation = computed(() => {\n            if (props.intf.direction === 'input') {\n                if (props.intf.side === 'left') {\n                    return 'right';\n                }\n                if (props.intf.side === 'right') {\n                    return 'down';\n                }\n            }\n            if (props.intf.direction === 'output') {\n                if (props.intf.side === 'left') {\n                    return 'down';\n                }\n                if (props.intf.side === 'right') {\n                    return 'right';\n                }\n            }\n            return 'down';\n        });\n\n        const newClasses = computed(() => ({\n            '--input': props.intf.side === 'left',\n            '--output': props.intf.side === 'right',\n            '--connected': isConnected.value,\n            __readonly: viewModel.value.editor.readonly,\n        }));\n\n        const isExposed = computed(() =>\n            props.intf.externalName !== undefined,\n        );\n\n        // External name editing\n        const externalNameComponent = new TextInterface('External name', props.intf.externalName).setPort(false);\n        externalNameComponent.componentName = 'TextInterface';\n\n        const editExternalName = ref(false);\n        const externalNameInputIncorrect = ref(false);\n        const externalNameInput = ref(null);\n        const externalNames = [];\n\n        const inputExternalName = ref(props.intf.externalName);\n\n        /**\n         * Update the list of external names of the interfaces in the current graph.\n         */\n        const updateExternalNames = () => {\n            externalNames.splice(0, externalNames.length);\n            externalNames.push(...graph.value.obtainExposedNames());\n            externalNames.splice(externalNames.indexOf(props.intf.externalName), 1);\n        };\n\n        const enableExternalNameEdit = (e) => {\n            // Get the list of external names of the interfaces in the subgraph\n            updateExternalNames();\n\n            editExternalName.value = true;\n            e.preventDefault();\n\n            // Wait for the next tick to focus the input, so that it is rendered first\n            nextTick().then(() => {\n                externalNameInput.value.focus();\n                externalNameInput.value.select();\n                externalNameInputIncorrect.value = graph.value.isIncorrectExternalName(\n                    props.intf.externalName,\n                    externalNames,\n                );\n            });\n        };\n\n        const externalNameInputCallback = (e) => {\n            externalNameInputIncorrect.value = graph.value.isIncorrectExternalName(\n                e.target.value,\n                externalNames,\n            );\n        };\n\n        const externalNameFocusOutCallback = () => {\n            editExternalName.value = false;\n            externalNameInputIncorrect.value = false;\n            const newExternalName = graph.value.resolveNewExposedName(inputExternalName.value);\n            inputExternalName.value = newExternalName;\n\n            viewModel.value.editor.exposeInterface(\n                graph.value.id,\n                props.intf,\n                newExternalName,\n            );\n        };\n\n        return {\n            arrowRotation,\n            displayArrow,\n            editExternalName,\n            el,\n            enableExternalNameEdit,\n            endHover,\n            endHoverWrapper,\n            externalNameInput,\n            externalNameInputIncorrect,\n            externalNameInputCallback,\n            externalNameFocusOutCallback,\n            hovered,\n            isConnected,\n            inputExternalName,\n            newClasses,\n            onMouseDown,\n            openSidebar,\n            showComponent,\n            isExposed,\n            startHover,\n            startHoverWrapper,\n        };\n    },\n});\n</script>\n","import { render } from \"./CustomInterface.vue?vue&type=template&id=7a8d178e\"\nimport script from \"./CustomInterface.vue?vue&type=script&lang=js\"\nexport * from \"./CustomInterface.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/kenning-pipeline-manager/kenning-pipeline-manager/pipeline_manager/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!--\nCopyright (c) 2022-2024 Antmicro <www.antmicro.com>\n\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<!-- eslint-disable vue/no-multiple-template-root -->\n<template>\n    <Tooltip\n        ref=\"tooltipRef\"\n        :left=\"tooltip.left\"\n        :top=\"tooltip.top\"\n        :text=\"tooltip.text\"\n        v-show=\"tooltip.visible\"\n    />\n    <div\n        class=\"baklava-sidebar prevent-select\"\n        ref=\"sidebarRef\"\n        :class=\"{\n            '--open': graph.sidebar.visible,\n            '--hidehud': editorManager.editor.hideHud,\n            '--preview': editorManager.editor.preview,\n            'hidden-navbar': $isMobile,\n        }\"\n        :style=\"styles\"\n    >\n        <div class=\"__resizer\" @mousedown=\"startResize\" />\n        <div v-if=\"node\" class=\"__content\">\n            <div class=\"__header\">\n                <Cross tabindex=\"-1\" class=\"__close\" @click=\"close\" />\n                <img\n                    class=\"__node-icon\"\n                    v-if=\"nodeIconPath !== undefined\"\n                    :src=\"nodeIconPath\"\n                />\n                <div class=\"__node-name\">\n                    {{ displayedName }}\n                </div>\n                <a\n                    v-for=\"url in nodeURLs\"\n                    :key=\"url.name\"\n                    :href=\"url.url\"\n                    class=\"__url\"\n                    target=\"_blank\"\n                    draggable=\"false\"\n                    @pointerover=\"(ev) => onPointerOver(url.name, ev)\"\n                    @pointerleave=\"onPointerLeave\"\n                    tabindex=\"-1\"\n                >\n                    <img\n                        v-if=\"url.icon !== undefined\"\n                        :src=\"getIconPath(url.icon)\"\n                        :alt=\"url.name\"\n                        draggable=\"false\"\n                    />\n                </a>\n            </div>\n            <div class=\"__category\">\n                <div class=\"__title\">Category</div>\n                <div class=\"__category-name\">\n                    {{ prettyCategory }}\n                </div>\n            </div>\n            <div v-if=\"!editorManager.editor.readonly\" class=\"__replace\">\n                <div class=\"__replace_entry\" v-if=\"replacementParents.length\">\n                    <div class=\"__replace_title\">Generalize:</div>\n                    <div\n                        v-for=\"parent in replacementParents\"\n                        :key=\"parent\"\n                        class=\"__replace_button\"\n                    >\n                        <component :is=\"parent.component\" :intf=\"parent\" tabindex=\"-1\" />\n                    </div>\n                </div>\n                <div class=\"__replace_entry\" v-if=\"replacementChildren.length\">\n                    <div class=\"__replace_title\">Specialize:</div>\n                    <div v-for=\"child in replacementChildren\" :key=\"child\" class=\"__replace_button\">\n                        <component :is=\"child.component\" :intf=\"child\" tabindex=\"-1\" />\n                    </div>\n                </div>\n                <div class=\"__replace_entry\" v-if=\"replacementSiblings.length\">\n                    <div class=\"__replace_title\">Choose other type:</div>\n                    <div\n                        v-for=\"sibling in replacementSiblings\"\n                        :key=\"sibling\"\n                        class=\"__replace_button\"\n                    >\n                        <component :is=\"sibling.component\" :intf=\"sibling\" tabindex=\"-1\" />\n                    </div>\n                </div>\n            </div>\n            <div class=\"__properties\" v-if=\"displayedProperties.length\">\n                <div class=\"__title\">Properties</div>\n                <div v-for=\"input in displayedProperties\" :key=\"input.id\" class=\"__property\">\n                    <div class=\"__property-name\">\n                        {{ getOptionName(input.componentName) ? `${input.name}:` : '' }}\n                    </div>\n                    <CustomInterface\n                        :node=\"node\"\n                        :intf=\"input\"\n                        :toggleGroup=\"toggleGroup\"\n                        :updateDynamicInterfaces=\"updateDynamicInterfaces\"\n                        tabindex=\"-1\"\n                    />\n                </div>\n            </div>\n\n            <div v-show=\"desc\">\n                <div class=\"__title\">\n                    Description\n                </div>\n                <div class=\"__markdown-content\" >\n                    <span v-html=\"desc\" class=\"node_description\"></span>\n                </div>\n            </div>\n\n            <div\n                class=\"__interface_groups\"\n                v-if=\"interfaceGroupsCheckboxes.length > 0 && !editorManager.editor.readonly\"\n            >\n                <div class=\"__title\">Interface Groups</div>\n                <div\n                    v-for=\"intfG in interfaceGroupsCheckboxes\"\n                    :key=\"intfG.id\"\n                    class=\"__group\"\n                >\n                    <component :is=\"intfG.component\" :intf=\"intfG\"></component>\n                </div>\n                <div class=\"__group-assign\">\n                    <component\n                        :is=\"interfaceGroupsButton.component\"\n                        :intf=\"interfaceGroupsButton\"\n                        :class=\"interfaceGroupsButtonClasses\"\n                        tabindex=\"-1\"\n                    ></component>\n                </div>\n            </div>\n            <div v-show=\"interfaceGroupsOutput.length\" class=\"__error_outputs\">\n                <div class=\"__title\">Conflicts:</div>\n                <!-- eslint-disable vue/require-v-for-key -->\n                <p v-for=\"output in interfaceGroupsOutput\">\n                    {{ output }}\n                </p>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { computed, defineComponent, watch, ref, nextTick } from 'vue'; // eslint-disable-line object-curly-newline\nimport { GRAPH_NODE_TYPE_PREFIX } from '@baklavajs/core';\nimport { CheckboxInterface, ButtonInterface } from '@baklavajs/renderer-vue'; // eslint-disable-line object-curly-newline\nimport showdown from 'showdown';\nimport DOMPurify from 'dompurify';\nimport CustomInterface from './CustomInterface.vue';\nimport Cross from '../icons/Cross.vue';\nimport Tooltip from '../components/Tooltip.vue';\nimport EditorManager from '../core/EditorManager';\n\nimport { validateInterfaceGroupsNames } from '../core/interfaceParser';\nimport { getOptionName } from './CustomNode.js';\n\nexport default defineComponent({\n    components: {\n        Cross,\n        CustomInterface,\n        CheckboxInterface,\n        Tooltip,\n    },\n    emits: ['sidebar-open'],\n    setup(_props, { emit }) {\n        const editorManager = EditorManager.getEditorManagerInstance();\n        const viewModel = computed(() => editorManager.baklavaView);\n        const graph = computed(() => viewModel.value.displayedGraph);\n\n        const converter = new showdown.Converter({\n            smartIndentationFix: true,\n            simpleLineBreaks: true,\n        });\n\n        const width = ref(300);\n\n        const node = computed(() => {\n            const id = graph.value.sidebar.nodeId;\n            return graph.value.nodes.find((x) => x.id === id);\n        });\n\n        const category = computed(() => graph.value.editor.nodeTypes.get(node.value.type).category);\n        const prettyCategory = computed(() => `${category.value.split('/').join(' / ')}`);\n\n        const desc = computed(() => {\n            let html = converter.makeHtml(node.value?.description ?? '');\n            const aTagRe = /<a href=\"[a-zA-Z0-9-$_.+!*'()/&?=:%]+\">/gm;\n            html.match(aTagRe)?.forEach((match) => {\n                const hrefParts = match.split('\"');\n                // Forces the link to open in a new tab instead of closing the pipeline manager\n                const newEnd = ` tabindex=\"-1\" target=\"_blank\"${hrefParts[2]}`;\n                const newHref = [hrefParts[0], hrefParts[1], newEnd].join('\"');\n                html = html.replace(match, newHref);\n            });\n            return DOMPurify.sanitize(html);\n        });\n        const nodeIcon = computed(() => viewModel.value.editor.getNodeIconPath(node.value?.type));\n        const nodeURLs = computed(() => viewModel.value.editor.getNodeURLs(node.value?.type));\n\n        const getIconPath = (name) => viewModel.value.cache[`./${name}`] ?? name;\n        const nodeIconPath = computed(() => getIconPath(nodeIcon.value));\n        const sidebarVisible = computed(() => graph.value.sidebar.visible);\n\n        watch(node, () => {\n            if (node.value === undefined) {\n                graph.value.sidebar.visible = false;\n            }\n        });\n        watch(sidebarVisible, (newValue) => {\n            if (newValue) emit('sidebar-open');\n        });\n\n        const tooltipRef = ref(null);\n        const tooltip = ref(null);\n        const sidebarRef = ref(null);\n\n        tooltip.value = {\n            top: 0,\n            left: 0,\n            visible: false,\n            text: '',\n        };\n\n        const onPointerOver = (name, ev) => {\n            tooltip.value.text = name;\n            tooltip.value.visible = true;\n\n            // We need to wait for the next frame to get the tooltips width first to get its width\n            nextTick().then(() => {\n                const right = ev.clientX - ev.offsetX + ev.currentTarget.offsetWidth / 2 +\n                    tooltipRef.value.$el.clientWidth;\n\n                tooltip.value.top = ev.clientY - ev.offsetY + ev.currentTarget.offsetHeight;\n\n                // If the tooltip is out of user view port it is moved to the left\n                if (right > window.innerWidth) {\n                    tooltip.value.left = ev.clientX - ev.offsetX + ev.currentTarget.offsetWidth / 2\n                        - tooltipRef.value.$el.clientWidth / 2;\n                } else {\n                    tooltip.value.left = ev.clientX - ev.offsetX + ev.currentTarget.offsetWidth / 2;\n                }\n            });\n        };\n\n        const toggleGroup = (intf) => {\n            intf.group.forEach((name) => {\n                node.value.inputs[name].hidden = intf.value;\n            });\n        };\n\n        const updateDynamicInterfaces = (intf) => {\n            node.value.updateDynamicInterfaces(intf);\n        };\n\n        const onPointerLeave = () => {\n            tooltip.value.visible = false;\n        };\n\n        const styles = computed(() => ({\n            width: `${width.value}px`,\n        }));\n\n        const close = () => {\n            graph.value.sidebar.visible = false;\n        };\n\n        const onMouseMove = (ev) => {\n            ev.preventDefault();\n            width.value -= ev.movementX;\n        };\n\n        const startResize = () => {\n            width.value = sidebarRef.value.offsetWidth;\n            window.addEventListener('mousemove', onMouseMove);\n            window.addEventListener(\n                'mouseup',\n                (ev) => {\n                    ev.preventDefault();\n                    window.removeEventListener('mousemove', onMouseMove);\n                },\n                { once: true },\n            );\n        };\n\n        const displayedInputs = computed(() =>\n            Object.values(node.value.inputs).filter((ni) => !ni.hidden),\n        );\n        const displayedProperties = computed(() =>\n            Object.values(displayedInputs.value).filter((intf) => !intf.port),\n        );\n\n        const interfaceGroups = computed(() =>\n            Object.values({ ...node.value.inputs, ...node.value.outputs }).filter(\n                (ni) => ni.interfaces !== undefined,\n            ),\n        );\n\n        const interfaceGroupsOutput = ref('');\n        const interfaceGroupsButtonClasses = computed(() => ({\n            '--disabled': interfaceGroupsOutput.value !== '',\n        }));\n\n        const interfaceGroupsCheckboxes = computed(() => {\n            const checkboxes = ref([]);\n            // So that interfaces are recomputed when this value changes\n            graph.value.sidebar.visible; // eslint-disable-line no-unused-expressions\n\n            interfaceGroups.value.forEach((intfG) => {\n                const checkbox = new CheckboxInterface(intfG.name, !intfG.hidden).setPort(false);\n                checkbox.events.setValue.subscribe(this, () => {\n                    const errors = validateInterfaceGroupsNames(\n                        enabledInterfaceGroups.value, // eslint-disable-line no-use-before-define\n                        node.value.inputs,\n                        node.value.outputs,\n                    );\n\n                    if (errors.length) {\n                        interfaceGroupsOutput.value = errors.map(\n                            ([parsedIntfName, intfDirection, groupName]) =>\n                                `Reused ${intfDirection} - ${parsedIntfName} for interface group ${groupName}`,\n                        );\n                    } else {\n                        interfaceGroupsOutput.value = '';\n                    }\n                });\n                checkbox.componentName = 'CheckboxInterface';\n                checkbox.intfG = intfG;\n                checkboxes.value.push(checkbox);\n            });\n\n            return checkboxes.value;\n        });\n\n        const enabledInterfaceGroups = computed(() => {\n            const enabledInterfaceGroupsCheckboxes = [];\n\n            interfaceGroupsCheckboxes.value.forEach((intf) => {\n                if (intf.value) {\n                    enabledInterfaceGroupsCheckboxes.push(\n                        `${intf.intfG.direction}_${intf.intfG.name}`,\n                    );\n                }\n            });\n            return enabledInterfaceGroupsCheckboxes;\n        });\n\n        const interfaceGroupsButton = computed(() => {\n            const checkbox = new ButtonInterface('Assign', () => {\n                interfaceGroupsCheckboxes.value.forEach((intf) => {\n                    node.value.toggleInterfaceGroup(intf.intfG, intf.value);\n                });\n                interfaceGroupsOutput.value = '';\n            });\n            checkbox.componentName = 'ButtonInterface';\n            return checkbox;\n        });\n\n        const replacementButtons = (list) => {\n            const buttons = ref([]);\n\n            (list ?? []).forEach((eName) => {\n                const button = new ButtonInterface(eName, () => {\n                    const newNode = graph.value.replaceNode(node.value, eName);\n                    graph.value.sidebar.nodeId = newNode.id;\n                });\n                button.componentName = 'ButtonInterface';\n                buttons.value.push(button);\n            });\n            return buttons.value;\n        };\n\n        const replacementParents = computed(() => replacementButtons(node.value.extends));\n        const replacementChildren = computed(() => replacementButtons(node.value.extending));\n        const replacementSiblings = computed(() => replacementButtons(node.value.siblings));\n\n        const displayedName = computed(() => {\n            if (node.value.title === '' || node.value.title === undefined) {\n                if (node.value.type.startsWith(GRAPH_NODE_TYPE_PREFIX)) {\n                    return node.value.type.slice(GRAPH_NODE_TYPE_PREFIX.length);\n                }\n                return node.value.type;\n            }\n            return node.value.title;\n        });\n\n        return {\n            graph,\n            node,\n            styles,\n            startResize,\n            close,\n            displayedProperties,\n            interfaceGroups,\n            interfaceGroupsCheckboxes,\n            interfaceGroupsButton,\n            interfaceGroupsOutput,\n            interfaceGroupsButtonClasses,\n            nodeIconPath,\n            nodeURLs,\n            getIconPath,\n            desc,\n            tooltip,\n            onPointerOver,\n            onPointerLeave,\n            tooltipRef,\n            sidebarRef,\n            toggleGroup,\n            getOptionName,\n            prettyCategory,\n            replacementParents,\n            replacementChildren,\n            replacementSiblings,\n            editorManager,\n            displayedName,\n            updateDynamicInterfaces,\n        };\n    },\n});\n</script>\n<style lang=\"scss\" scoped>\n.prevent-select {\n    -webkit-user-select: none; /* Safari */\n    -ms-user-select: none; /* IE 10 and IE 11 */\n    user-select: none; /* Standard syntax */\n\n    & > .__content {\n        -webkit-user-select: text; /* Safari */\n        -ms-user-select: text; /* IE 10 and IE 11 */\n        user-select: text; /* Standard syntax */\n    }\n}\n</style>\n","import { render } from \"./CustomSidebar.vue?vue&type=template&id=1d7e5d1e&scoped=true\"\nimport script from \"./CustomSidebar.vue?vue&type=script&lang=js\"\nexport * from \"./CustomSidebar.vue?vue&type=script&lang=js\"\n\nimport \"./CustomSidebar.vue?vue&type=style&index=0&id=1d7e5d1e&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/kenning-pipeline-manager/kenning-pipeline-manager/pipeline_manager/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1d7e5d1e\"]])\n\nexport default __exports__","<!--\nCopyright (c) 2022-2024 Antmicro <www.antmicro.com>\n\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<!--\nDefines the main editor component - canvas in which the pipeline is drawn and\nedited by a user\n\nInherits from baklavajs/rendered-vue/src/editor/Editor.vue\n\nMinimap component is removed whatsoever as they are not used.\nHovered connections are calculated and rendered with an appropriate `isHighlighted` value.\n-->\n\n<template>\n    <div\n        ref=\"el\"\n        tabindex=\"-1\"\n        class=\"baklava-editor\"\n        :class=\"{\n            'baklava-ignore-mouse': !!temporaryConnection || dragging,\n            '--temporary-connection': !!temporaryConnection,\n        }\"\n        :style=\"editorStyle\"\n        @wheel.self=\"mouseWheel\"\n        @keydown=\"keyDown\"\n        @keyup=\"keyUp\"\n        @mouseleave=\"!readonly && onRightPointerUp\"\n        @drop.prevent=\"!readonly && onDrop($event)\"\n        @dragenter.prevent\n        @dragover.prevent\n        oncontextmenu=\"return false;\"\n    >\n        <slot name=\"background\">\n            <background />\n        </slot>\n\n        <slot\n            name=\"palette\"\n            v-if=\"!(readonly || hideHud)\"\n        >\n            <NodePalette />\n        </slot>\n\n        <div class=\"node-container\" :style=\"nodeContainerStyle\" @wheel=\"mouseWheel\">\n            <CustomNode\n                v-for=\"node in visibleNodes\"\n                :key=\"node.id + counter.toString()\"\n                :node=\"node\"\n                :selected=\"selectedNodes.includes(node)\"\n                :greyedOut=\"greyedOutNodes.includes(node)\"\n                :interfaces=\"highlightInterfaces\"\n                @select=\"(ev) => selectNode(node, ev)\"\n            />\n        </div>\n\n        <svg\n            class=\"connections-container\"\n            @mouseenter=\"changeHoveredConnections\"\n            @mousemove=\"changeHoveredConnections\"\n            @mouseleave=\"clearHighlight\"\n            @wheel=\"mouseWheel\"\n        >\n            <PipelineManagerConnection\n                v-for=\"connection in visibleConnections\"\n                :key=\"connection.id + counter.toString()\"\n                :connection=\"connection\"\n                ref=\"connRefs\"\n                :isHighlighted=\"highlightConnections.includes(connection)\"\n            />\n            <TemporaryConnection\n                name=\"temporaryConnection\"\n                :temporary-connection=\"temporaryConnection\"\n                v-if=\"temporaryConnection\"\n                :connection=\"temporaryConnection\"\n            />\n        </svg>\n\n        <div class=\"selection-container\">\n            <RectangleSelection ref=\"rectangleSelection\"/>\n        </div>\n    </div>\n</template>\n\n<script>\n/* eslint-disable object-curly-newline */\nimport { GRAPH_NODE_TYPE_PREFIX } from '@baklavajs/core';\nimport { EditorComponent, useGraph } from '@baklavajs/renderer-vue';\nimport { defineComponent, ref, computed, watch, onMounted } from 'vue';\nimport fuzzysort from 'fuzzysort';\nimport usePanZoom from './panZoom';\n\nimport CustomNode from './CustomNode.vue';\nimport PipelineManagerConnection from './connection/PipelineManagerConnection.vue';\nimport TemporaryConnection from './connection/TemporaryConnection.vue';\nimport NodePalette from './nodepalette/NodePalette.vue';\nimport { useTemporaryConnection } from './temporaryConnection';\nimport NotificationHandler from '../core/notifications';\nimport EditorManager, { loadJsonFromRemoteLocation } from '../core/EditorManager';\nimport RectangleSelection from './RectangleSelection.vue';\nimport nodeInsideSelection from './rectangleSelection.js';\nimport getExternalApplicationManager from '../core/communication/ExternalApplicationManager';\n\nexport default defineComponent({\n    extends: EditorComponent,\n    components: {\n        CustomNode,\n        PipelineManagerConnection,\n        TemporaryConnection,\n        NodePalette,\n        RectangleSelection,\n    },\n    emits: ['loadFinish'],\n    setup(props, { emit }) {\n        const {\n            el,\n            counter,\n            nodes,\n            connections,\n            selectedNodes,\n            nodeContainerStyle,\n            keyDown,\n            keyUp,\n        } = EditorComponent.setup(props);\n\n        const connRefs = ref([]);\n        const { graph } = useGraph();\n\n        const panZoom = usePanZoom();\n        const temporaryConnection = useTemporaryConnection();\n        const editorManager = EditorManager.getEditorManagerInstance();\n\n        const highlightConnections = ref([]);\n        const highlightInterfaces = ref([]);\n\n        const readonly = computed(() => props.viewModel.editor.readonly);\n        const hideHud = computed(() => props.viewModel.editor.hideHud);\n\n        const rectangleSelection = ref(null);\n        const selectedNodesCtrlBackup = [];\n        const scale = computed(() => graph.value.scaling);\n\n        const searchQuery = computed(() => props.viewModel.editor.searchQuery);\n        const greyedOutNodes = ref([]);\n\n        let pressStartTime = 0;\n        const longPressMilisThreshold = 100;\n\n        const editorStyle = computed(() => ({\n            '--scale': scale.value,\n            cursor: panZoom.dragging.value ? 'move' : 'default',\n        }));\n\n        const unselectAllNodes = () => {\n            /* eslint-disable vue/no-mutating-props,no-param-reassign */\n            props.viewModel.displayedGraph.selectedNodes = [];\n        };\n\n        const appendSelectMultipleNodes = () => {\n            graph.value.nodes.forEach((node) => {\n                if (graph.value.selectedNodes.includes(node)) {\n                    return;\n                }\n\n                const selectionBoundingRect = rectangleSelection.value.boundingRect;\n\n                if (nodeInsideSelection(graph.value, node, selectionBoundingRect)) {\n                    graph.value.selectedNodes.push(node);\n                }\n            });\n        };\n\n        const selectNode = (node, event) => {\n            // If select was triggered by event check if CTRL is pressed,\n            // otherwise use default method\n            if ((event && !(event.ctrlKey)) || (!event && !props.viewModel.commandHandler.pressedKeys.includes('Control'))) {\n                unselectAllNodes();\n            }\n\n            props.viewModel.displayedGraph.selectedNodes.push(node);\n        };\n\n        const selectMultipleNodes = () => {\n            graph.value.selectedNodes = [];\n            graph.value.nodes.forEach((node) => {\n                const selectionBoundingRect = rectangleSelection.value.boundingRect;\n\n                if (nodeInsideSelection(graph.value, node, selectionBoundingRect)) {\n                    graph.value.selectedNodes.push(node);\n                }\n            });\n        };\n\n        let pointersDown = 0;\n        const onPointerDown = (ev) => {\n            pointersDown += 1;\n            if (ev.target === el.value) {\n                panZoom.onPointerDown(ev);\n            }\n            temporaryConnection.onMouseDown(ev);\n\n            pressStartTime = new Date();\n        };\n\n        const onRightPointerDown = (ev) => {\n            if (ev.target === el.value) {\n                unselectAllNodes();\n                rectangleSelection.value.onPointerDown(ev);\n            }\n\n            pressStartTime = new Date();\n        };\n\n        const onPointerMove = (ev) => {\n            panZoom.onPointerMove(ev);\n            temporaryConnection.onMouseMove(ev);\n            rectangleSelection.value.onPointerMove(ev);\n            if (rectangleSelection.value.selecting) {\n                selectMultipleNodes();\n            }\n        };\n\n        const onPointerUp = (ev) => {\n            panZoom.onPointerUp(ev);\n            temporaryConnection.onMouseUp();\n\n            // handle press & hold\n            const currentTime = new Date();\n            const elapsedTime = currentTime - pressStartTime;\n            if (elapsedTime < longPressMilisThreshold\n                && ev.target === el.value) {\n                unselectAllNodes();\n            }\n\n            if (pointersDown === 1) {\n                document.removeEventListener('pointerup', onPointerUp);\n                document.removeEventListener('pointermove', onPointerMove);\n            }\n            pointersDown -= 1;\n        };\n\n        const onRightPointerUp = (ev) => {\n            // handle press & hold right mouse button\n            const currentTime = new Date();\n            const elapsedTime = currentTime - pressStartTime;\n            if (elapsedTime >= longPressMilisThreshold\n                && ev.target === el.value) {\n                appendSelectMultipleNodes();\n            }\n            rectangleSelection.value.onPointerUp();\n\n            document.removeEventListener('pointerup', onRightPointerUp);\n            document.removeEventListener('pointermove', onPointerMove);\n        };\n\n        const onRightPointerDownCtrl = (ev) => {\n            rectangleSelection.value.onPointerDown(ev);\n            selectedNodesCtrlBackup.value = graph.value.selectedNodes;\n        };\n\n        const onRightPointerUpCtrl = () => {\n            graph.value.selectedNodes = selectedNodesCtrlBackup.value;\n            appendSelectMultipleNodes();\n            rectangleSelection.value.onPointerUp();\n\n            document.removeEventListener('pointerup', onRightPointerUpCtrl);\n            document.removeEventListener('pointermove', onPointerMove);\n        };\n\n        document.addEventListener('pointerdown', (ev) => {\n            // Dragging\n            if (ev.button === 0 && !ev.shiftKey) {\n                onPointerDown(ev);\n                document.addEventListener('pointerup', onPointerUp);\n                document.addEventListener('pointermove', onPointerMove);\n            }\n\n            // Rectangle selection\n            if (readonly.value) {\n                return;\n            }\n            if (ev.button === 2 && ev.ctrlKey) {\n                onRightPointerDownCtrl(ev);\n                document.addEventListener('pointerup', onRightPointerUpCtrl);\n                document.addEventListener('pointermove', onPointerMove);\n            } else if (ev.button === 2) {\n                onRightPointerDown(ev);\n                document.addEventListener('pointerup', onRightPointerUp);\n                document.addEventListener('pointermove', onPointerMove);\n            }\n        });\n\n        const clearHighlight = () => {\n            highlightConnections.value.splice(0, highlightConnections.value.length);\n        };\n\n        // If a connection is removed by clicking on it all highlighted connections are removed\n        watch(connections.value, () => {\n            clearHighlight();\n        });\n\n        const addHighlight = (connection) => {\n            if (!highlightConnections.value.includes(connection)) {\n                highlightConnections.value.push(connection);\n            }\n        };\n\n        const addInterfaceHighlight = (it) => {\n            if (!highlightInterfaces.value.includes(it)) {\n                highlightInterfaces.value.push(it);\n            }\n        };\n        const clearInterfaceHighlight = () => {\n            highlightInterfaces.value.splice(0, highlightInterfaces.value.length);\n        };\n\n        watch(temporaryConnection?.temporaryConnection, () => {\n            if (typeof (temporaryConnection ?? null) === 'undefined') return;\n            if (temporaryConnection?.temporaryConnection === null) return;\n            if (temporaryConnection?.temporaryConnection?.value?.from) {\n                for (let a = 0; a < nodes.value.length; a += 1) {\n                    const viableConnections = [\n                        ...(Object.values(nodes.value[a].outputs) || []),\n                        ...(Object.values(nodes.value[a].inputs) || []),\n                    ];\n\n                    viableConnections.forEach((n) => {\n                        if (n.port && n !== temporaryConnection.temporaryConnection.value.from) {\n                            const result = graph.value.checkConnection(\n                                temporaryConnection.temporaryConnection.value.from,\n                                n,\n                            );\n                            if (!result.connectionAllowed) {\n                                addInterfaceHighlight(n);\n                            }\n                        }\n                    });\n                }\n            } else {\n                clearInterfaceHighlight();\n            }\n        });\n\n        const removeHighlight = (connection) => {\n            const index = highlightConnections.value.indexOf(connection);\n            if (index >= 0) {\n                highlightConnections.value.splice(index, 1);\n            }\n        };\n\n        const changeHoveredConnections = (ev) => {\n            // Get all connection DOM elements that have mouse hovered over them\n            const elements = document.elementsFromPoint(ev.clientX, ev.clientY);\n\n            const hoveredHtml = connRefs.value.filter((conn) =>\n                conn.containsPoint(elements),\n            );\n\n            // Convert DOM elements to BaklavaJS connections\n            const hovered = connections.value.filter(\n                (conn) => hoveredHtml.filter((htmlEl) => htmlEl.connection === conn).length > 0,\n            );\n\n            const highlighted = connections.value.filter(\n                (conn) => hovered.filter((hov) => hov.from === conn.from).length > 0,\n            );\n\n            connections.value.forEach((conn) => {\n                if (highlighted.includes(conn)) {\n                    addHighlight(conn);\n                } else {\n                    removeHighlight(conn);\n                }\n            });\n        };\n\n        const ignoredLayers = computed(() => props.viewModel.ignoredLayers);\n        const ignorableLayers = computed(() => props.viewModel.layers);\n\n        const ignoredInterfacesTypes = computed(() => {\n            const temp = new Set();\n\n            ignorableLayers.value.forEach((layer) => {\n                if (layer.nodeInterfaces && ignoredLayers.value.has(layer.name)) {\n                    layer.nodeInterfaces.forEach(temp.add, temp);\n                }\n            });\n            return temp;\n        });\n\n        const ignoredNodesTypes = computed(() => {\n            const temp = new Set();\n\n            ignorableLayers.value.forEach((layer) => {\n                if (layer.nodeLayers && ignoredLayers.value.has(layer.name)) {\n                    layer.nodeLayers.forEach(temp.add, temp);\n                }\n            });\n            return temp;\n        });\n\n        const visibleNodes = computed(() =>\n            nodes.value.filter((n) => !ignoredNodesTypes.value.has(n.layer)),\n        );\n        const ignoredNodes = computed(() =>\n            nodes.value.filter((n) => ignoredNodesTypes.value.has(n.layer)),\n        );\n        const ignoredNodesId = computed(() => ignoredNodes.value.map((n) => n.id));\n\n        const visibleConnections = computed(() =>\n            connections.value.filter(\n                (c) =>\n                    !c.from.type?.some((t) => ignoredInterfacesTypes.value.has(t)) &&\n                    !c.to.type?.some((t) => ignoredInterfacesTypes.value.has(t)) &&\n                    !ignoredNodesId.value.includes(c.from.nodeId) &&\n                    !ignoredNodesId.value.includes(c.to.nodeId),\n            ),\n        );\n\n        const externalApplicationManager = getExternalApplicationManager();\n        if (externalApplicationManager.backendAvailable) {\n            watch(visibleNodes, async (value, old) => {\n                if (!editorManager.notifyWhenChanged) return;\n                const newIds = Object.values(value).map((n) => n.id);\n                const oldIds = Object.values(old).map((n) => n.id);\n                const nodesAdded = [];\n                Object.values(value).forEach((node) => {\n                    if (!(oldIds.includes(node.id))) {\n                        nodesAdded.push(node.save());\n                    }\n                });\n                const nodesDeleted = [];\n                Object.values(old).forEach((node) => {\n                    if (!(newIds.includes(node.id))) {\n                        nodesDeleted.push(node.id);\n                    }\n                });\n                const data = {\n                    graph_id: graph.value.id,\n                    nodes: {\n                        added: nodesAdded,\n                        deleted: nodesDeleted,\n                    },\n                };\n                await externalApplicationManager.notifyAboutChange('nodes_on_change', data);\n            });\n\n            watch(visibleConnections, async (value, old) => {\n                if (!editorManager.notifyWhenChanged) return;\n                const newIds = Object.values(value).map((n) => n.id);\n                const oldIds = Object.values(old).map((n) => n.id);\n                const connectionsAdded = [];\n                Object.values(value).forEach((connection) => {\n                    if (!(oldIds.includes(connection.id))) {\n                        connectionsAdded.push({\n                            id: connection.id,\n                            from: connection.from.id,\n                            to: connection.to.id,\n                        });\n                    }\n                });\n                const connectionsDeleted = [];\n                Object.values(old).forEach((connection) => {\n                    if (!(newIds.includes(connection.id))) {\n                        connectionsDeleted.push({\n                            from: connection.from.id,\n                            to: connection.to.id,\n                        });\n                    }\n                });\n                const data = {\n                    graph_id: graph.value.id,\n                    connections: {\n                        added: connectionsAdded,\n                        deleted: connectionsDeleted,\n                    },\n                };\n                await externalApplicationManager.notifyAboutChange('connections_on_change', data);\n            });\n        }\n\n        const filterNodes = (query) => {\n            const threshold = -50;\n\n            const matchingNodes = visibleNodes.value.filter((node) => {\n                let { type } = node;\n                const isGraphNode = type.startsWith(GRAPH_NODE_TYPE_PREFIX);\n                if (isGraphNode) {\n                    type = type.slice(GRAPH_NODE_TYPE_PREFIX.length);\n                }\n\n                const resultTitle = fuzzysort.single(query, node.title);\n                const resultType = fuzzysort.single(query, type);\n\n                if ((resultTitle !== null && resultTitle.score > threshold) ||\n                    (resultType !== null && resultType.score > threshold)) {\n                    node.highlightedTitle = fuzzysort.highlight(resultTitle, '<span>', '</span>');\n                    node.highlightedType = fuzzysort.highlight(resultType, '<span>', '</span>');\n\n                    // If the node is a graph node, has a title and query does not match the title,\n                    // do not show the node\n                    if (isGraphNode && node.title !== '' && resultTitle === null) return false;\n                    return true;\n                }\n                node.highlightedTitle = node.title;\n                node.highlightedType = node.type;\n                return false;\n            });\n\n            return matchingNodes;\n        };\n\n        const nodeTitles = computed(() =>\n            nodes.value.map((n) => n.title),\n        );\n\n        watch([searchQuery, nodeTitles], () => {\n            if (searchQuery.value === undefined || searchQuery.value === '') {\n                greyedOutNodes.value = [];\n                visibleNodes.value.forEach((node) => {\n                    node.highlightedTitle = node.title;\n                    node.highlightedType = node.type;\n                });\n                return;\n            }\n            const matchingNodes = filterNodes(searchQuery.value);\n\n            const nonMatchingNodes = visibleNodes.value.filter(\n                (node) => !matchingNodes.includes(node),\n            );\n\n            greyedOutNodes.value = nonMatchingNodes;\n        });\n\n        const defaultSpecification = process.env.VUE_APP_SPECIFICATION_PATH !== undefined;\n        const defaultDataflow = process.env.VUE_APP_DATAFLOW_PATH !== undefined;\n        const verboseLoad =\n            process.env.VUE_APP_VERBOSE !== undefined && process.env.VUE_APP_VERBOSE === 'true';\n\n        /**\n         * Prepares the Editor based on specification configuration.\n         *\n         * The function validates the specification, updates the Editor\n         * and provides error messages for erroneous content.\n         *\n         * @param specification The object holding the parsed specification file\n         */\n        async function updateEditorSpecification(specification) {\n            let errors = EditorManager.validateSpecification(specification);\n            let warnings;\n            if (errors.length) {\n                NotificationHandler.terminalLog('error', 'Specification is invalid', errors);\n                return errors;\n            }\n\n            ({ errors, warnings } = await editorManager.updateEditorSpecification(specification)); // eslint-disable-line prefer-const,max-len\n            if (Array.isArray(warnings) && warnings.length) {\n                NotificationHandler.terminalLog(\n                    'warning',\n                    'Issue when loading specification',\n                    warnings,\n                );\n            }\n            if (Array.isArray(errors) && errors.length) {\n                NotificationHandler.terminalLog('error', 'Specification is invalid', errors);\n            }\n\n            return errors;\n        }\n\n        /**\n         * Prepares the Editor based on dataflow configuration.\n         *\n         * The function loads the dataflow\n         * and provides error messages for erroneous content.\n         *\n         * @param dataflow The object holding the parsed dataflow file\n         */\n        async function updateDataflow(dataflow) {\n            const result = await editorManager.loadDataflow(dataflow);\n            const { errors } = result;\n            const { warnings } = result;\n            if (Array.isArray(warnings) && warnings.length) {\n                NotificationHandler.terminalLog(\n                    'warning',\n                    'Issue when loading dataflow',\n                    warnings,\n                );\n            }\n            if (Array.isArray(errors) && errors.length) {\n                const messageTitle = process.env.VUE_APP_GRAPH_DEVELOPMENT_MODE === 'true' ?\n                    'Softload enabled, errors found while loading the dataflow' :\n                    'Dataflow is invalid';\n                NotificationHandler.terminalLog('error', messageTitle, errors);\n            }\n\n            return errors;\n        }\n\n        /* eslint-disable no-lonely-if */\n        onMounted(async () => {\n            // Load specification and/or dataflow delivered via window.postMessage\n            window.addEventListener('message', async (event) => {\n                // TODO: introduce mechanism for checking event.origin against allowed origins\n                if (event.data.type === 'specification') {\n                    await updateEditorSpecification(event.data.content);\n                } else if (event.data.type === 'dataflow') {\n                    await updateDataflow(event.data.content);\n                } else {\n                    NotificationHandler.terminalLog('error', 'Message type is invalid');\n                }\n            });\n\n            NotificationHandler.setShowNotification(false);\n            editorManager.updateMetadata({}); // Defaulting metadata values\n\n            const escapedsearch = window.location.search.replace(/&amp;/g, '&');\n            const urlParams = new URLSearchParams(escapedsearch);\n            if (urlParams.has('preview')) {\n                const setting = urlParams.get('preview') === 'true';\n                props.viewModel.editor.preview = setting;\n            }\n\n            let specText;\n            if (!defaultSpecification) {\n                // Try loading default specification and/or dataflow from URLs provided in an\n                if (urlParams.has('spec')) {\n                    const [status, ret] = await loadJsonFromRemoteLocation(urlParams.get('spec'));\n                    if (status === false) {\n                        NotificationHandler.terminalLog(\n                            'error',\n                            ret,\n                        );\n                        NotificationHandler.terminalLog(\n                            'error',\n                            `Failed to load the specification file from: ${urlParams.get('spec')}`,\n                        );\n                    } else {\n                        specText = ret;\n                    }\n                }\n            } else {\n                // Use raw-loader which does not parse the specification so that it is possible\n                // To add a more verbose validation log\n                if (verboseLoad) {\n                    specText =\n                        require(`!!raw-loader!${process.env.VUE_APP_SPECIFICATION_PATH}`).default; // eslint-disable-line global-require,import/no-dynamic-require\n                } else {\n                    specText = require(process.env.VUE_APP_SPECIFICATION_PATH); // eslint-disable-line global-require,import/no-dynamic-require,max-len\n                }\n            }\n\n            if (specText !== undefined) {\n                if (urlParams.has('include')) {\n                    if (specText.include === undefined) specText.include = [];\n                    specText.include.push(urlParams.get('include'));\n                }\n                const errors = await updateEditorSpecification(specText);\n\n                if (errors.length) {\n                    NotificationHandler.restoreShowNotification();\n                    emit('loadFinish');\n                    return;\n                }\n\n                let dataflow;\n                if (defaultDataflow) {\n                    dataflow = require(process.env.VUE_APP_DATAFLOW_PATH); // eslint-disable-line global-require,max-len,import/no-dynamic-require\n                } else {\n                    if (urlParams.has('graph')) {\n                        const [status, ret] = await loadJsonFromRemoteLocation(urlParams.get('graph'));\n                        if (status === false) {\n                            NotificationHandler.terminalLog(\n                                'error',\n                                ret,\n                            );\n                            NotificationHandler.terminalLog(\n                                'error',\n                                `Failed to load the graph file from: ${urlParams.get('graph')}`,\n                            );\n                        } else {\n                            dataflow = ret;\n                        }\n                    }\n                }\n                if (dataflow) {\n                    await updateDataflow(dataflow);\n                }\n            }\n            NotificationHandler.restoreShowNotification();\n            emit('loadFinish');\n        });\n\n        const onDrop = async (event) => {\n            event.preventDefault();\n            event.dataTransfer.dropEffect = 'copy';\n            const files = [];\n            if (event.dataTransfer.items) {\n                [...event.dataTransfer.items].filter(\n                    (item) => item.kind === 'file',\n                ).forEach(\n                    (item) => files.push(item.getAsFile()),\n                );\n            } else {\n                files.push(...event.dataTransfer.files);\n            }\n            if (files.length > 1) {\n                NotificationHandler.showToast(\n                    'warning',\n                    'More than one file dropped, processing only the first one',\n                );\n            }\n            const reader = new FileReader();\n            reader.addEventListener('load', async (ev) => {\n                const file = ev.target.result;\n                let data;\n                try {\n                    data = JSON.parse(file);\n                } catch (SyntaxError) {\n                    NotificationHandler.showToast(\n                        'error',\n                        'Dropped file is not in JSON format',\n                    );\n                    return;\n                }\n\n                if (data.nodes) { // Load Specification\n                    await updateEditorSpecification(data);\n                    return;\n                }\n\n                if (data.graphs) { // Load Dataflow\n                    await updateDataflow(data);\n                    return;\n                }\n\n                NotificationHandler.showToast(\n                    'error',\n                    'File is neither specification nor dataflow',\n                );\n            });\n            reader.onerror = (er) => NotificationHandler.terminalLog(\n                'error',\n                'File cannot be loaded',\n                er.message,\n            );\n            reader.readAsText(files[0]);\n        };\n\n        return {\n            el,\n            counter,\n            selectedNodes,\n            nodeContainerStyle,\n            onRightPointerUp,\n            onDrop,\n            nodes,\n            keyDown,\n            keyUp,\n            selectNode,\n            rectangleSelection,\n            greyedOutNodes,\n            temporaryConnection: temporaryConnection.temporaryConnection,\n            mouseWheel: panZoom.onMouseWheel,\n            dragging: panZoom.dragging,\n            changeHoveredConnections,\n            highlightConnections,\n            connRefs,\n            clearHighlight,\n            readonly,\n            hideHud,\n            scale,\n            visibleConnections,\n            visibleNodes,\n            highlightInterfaces,\n            editorStyle,\n        };\n    },\n});\n</script>\n","<!--\nCopyright (c) 2022-2024 Antmicro <www.antmicro.com>\n\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<!--\nInterface that is used to display inputs, outputs and properties of a node.\n\nThe custom implementations introduces wrapper functions that prevent the user\nfrom creating and deleting connections or altering nodes' values if the editor is read-only.\n-->\n\n<template>\n    <transition name=\"slide-fade\">\n        <div\n            v-show=\"modelValue\"\n            ref=\"el\"\n            class=\"baklava-context-menu\"\n            :class=\"classes\"\n            :style=\"styles\"\n        >\n            <template v-if=\"itemsWithHoverProperty.length === 0\">\n                <div\n                    class=\"readonly item\"\n                    style=\"cursor: default\"\n                >\n                    <div class=\"text\"><i>No resources</i></div>\n                </div>\n            </template>\n            <template v-for=\"(item, index) in itemsWithHoverProperty\">\n                <div\n                    v-if=\"item.url === undefined\"\n                    :key=\"`i-${index}`\"\n                    class=\"item\"\n                    :class=\"{ submenu: !!item.submenu, '--disabled': !!item.disabled }\"\n                    @click.stop=\"onClick(item)\"\n                >\n                    <div class=\"icon\">\n                        <component v-if=\"item.icon !== undefined\" :is=\"item.icon\"></component>\n                    </div>\n                    <div class=\"text\">{{ item.label }}</div>\n                </div>\n                <a\n                    v-else\n                    :key=\"item.name\"\n                    :href=\"item.url\"\n                    class=\"item\"\n                    target=\"_blank\"\n                    draggable=\"false\"\n                    @click.stop=\"onClick(item)\"\n                >\n                    <div class=\"icon\">\n                        <img\n                            v-if=\"getIconPath(item.icon) !== undefined\"\n                            :src=\"getIconPath(item.icon)\"\n                            :alt=\"item.name\"\n                            draggable=\"false\"\n                        />\n                    </div>\n                    <div class=\"text\">{{ item.name }}</div>\n                </a>\n                <hr v-if=\"item.endSection\" :key=\"`hr-${index}`\" />\n            </template>\n        </div>\n    </transition>\n</template>\n\n<script>\nimport { defineComponent, ref } from 'vue';\nimport { Components, useViewModel } from '@baklavajs/renderer-vue';\n\nexport default defineComponent({\n    extends: Components.ContextMenu,\n    props: {\n        urls: {\n            required: false,\n            default: [],\n        },\n    },\n    emits: ['update:modelValue', 'click'],\n    setup(props, context) {\n        const {\n            el,\n            styles,\n            classes,\n            itemsWithHoverProperty,\n        } = // eslint-disable-line object-curly-newline\n            Components.ContextMenu.setup(props, context);\n\n        const { viewModel } = useViewModel();\n        const getIconPath = (name) => viewModel.value.cache[`./${name}`] ?? name;\n\n        const justOpened = ref(true);\n\n        const closeContextMenu = (ev) => {\n            if (props.modelValue === true) {\n                // We need a counter so that this event is not fired right when the menu is opened\n                if (justOpened.value === false) {\n                    const elements = document.elementsFromPoint(ev.clientX, ev.clientY);\n                    // We only need to fire closing event if the click was\n                    // outside of the context menu. Otherwise `onClick` is fired.\n                    if (!elements.includes(el.value)) {\n                        window.removeEventListener('wheel', closeContextMenu);\n                        window.removeEventListener('pointerdown', closeContextMenu);\n                        context.emit('update:modelValue', false);\n                    }\n                    justOpened.value = true;\n                } else {\n                    justOpened.value = false;\n                }\n            }\n        };\n\n        window.addEventListener('wheel', closeContextMenu);\n        window.addEventListener('pointerdown', closeContextMenu);\n\n        const onClick = (item) => {\n            context.emit('click', item.value);\n            context.emit('update:modelValue', false);\n        };\n\n        return {\n            el,\n            styles,\n            classes,\n            itemsWithHoverProperty,\n            onClick,\n            getIconPath,\n        };\n    },\n});\n</script>\n","import { render } from \"./ContextMenu.vue?vue&type=template&id=1956d404\"\nimport script from \"./ContextMenu.vue?vue&type=script&lang=js\"\nexport * from \"./ContextMenu.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/kenning-pipeline-manager/kenning-pipeline-manager/pipeline_manager/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!--\nCopyright (c) 2022-2024 Antmicro <www.antmicro.com>\n\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<!--\nThe baklavajs functionality was fully copied to this component, as the original\nimplementation uses `<script setup>` which does not work well with `extends` feature.\n\nAside from the original source code, the custom node implements displaying name tags\nfor properties that do not display them, support for readonly mode that prevents the user\nfrom moving or deleting the nodes.\n -->\n\n<template>\n    <div\n        :id=\"node.id\"\n        ref=\"nodeRef\"\n        class=\"baklava-node\"\n        :class=\"classes\"\n        :style=\"styles\"\n        :data-node-type=\"node.type\"\n        @pointerdown.left.self=\"(ev) => select(ev)\"\n        oncontextmenu=\"return false;\"\n    >\n        <div class=\"interface-cursor\">\n            <div class=\"line\" :style=\"interfaceCursorStyle\"></div>\n        </div>\n        <div\n            class=\"__title\"\n            ref=\"titleRef\"\n            :style=\"nodeTitleStyle\"\n            @pointerdown.left.exact=\"onMouseDown\"\n            @pointerdown.left=\"startDragWrapper($event)\"\n            @pointerdown.right=\"openContextMenuTitle\"\n            v-long-press:500=\"openContextMenuTitle\"\n        >\n            <img\n                class=\"__title-icon\"\n                v-if=\"iconPath !== undefined\"\n                :src=\"iconPath\"\n            >\n            <div v-if=\"!renaming\" class=\"__title-label\" v-html=\"DOMPurify.sanitize(nodeTitle)\">\n            </div>\n            <input\n                v-else\n                type=\"text\"\n                class=\"baklava-input\"\n                v-model=\"tempName\"\n                placeholder=\"Node Name\"\n                ref=\"renameField\"\n                v-click-outside=\"doneRenaming\"\n                @keydown.enter=\"doneRenaming\"\n            />\n            <CustomContextMenu\n                v-if=\"showContextMenuTitle\"\n                v-model=\"showContextMenuTitle\"\n                :x=\"contextMenuTitleX\"\n                :y=\"contextMenuTitleY\"\n                :items=\"contextMenuTitleItems\"\n                :urls=\"nodeURLs\"\n                :style=\"contextMenuStyle\"\n                @pointerdown.left.stop\n                @click=\"onContextMenuTitleClick\"\n            />\n        </div>\n\n        <div\n            class=\"__content\"\n            @pointerdown.right=\"openContextMenuTitle\"\n            >\n            <!-- Properties -->\n            <div class=\"__properties\">\n                <div v-for=\"input in displayedProperties\" :key=\"input.id\">\n                    {{ getOptionName(input.componentName) ? `${input.name}:` : '' }}\n                    <CustomInterface\n                        :node=\"node\"\n                        :intf=\"input\"\n                        :toggleGroup=\"toggleGroup\"\n                        :updateDynamicInterfaces=\"updateDynamicInterfaces\"\n                    />\n                </div>\n            </div>\n\n            <!-- Outputs -->\n            <div class=\"__outputs\" ref=\"rightSocketsRefs\">\n                <template v-for=\"output in displayedRightRows\">\n                    <CustomInterface\n                        :key=\"output.id\"\n                        v-if=\"output\"\n                        @pointerdown.left.shift=\"pickInterface(output, $event)\"\n                        @pointerdown.right.exact=\"openContextMenuInterface(output, $event)\"\n                        v-long-press-to-right:500\n                        :node=\"node\"\n                        :intf=\"output\"\n                        :highlighted=\"props.interfaces.includes(output)\"\n                        :picked=\"isPickedInterface(output)\"\n                        :switchSides=\"switchSides\"\n                    />\n                    <!-- eslint-disable-next-line vue/require-v-for-key -->\n                    <div v-else class=\"baklava-node-interface --output\">&nbsp;</div>\n                </template>\n            </div>\n\n            <!-- Inputs -->\n            <div class=\"__inputs\" ref=\"leftSocketsRefs\">\n                <template v-for=\"input in displayedLeftRows\">\n                    <CustomInterface\n                        :key=\"input.id\"\n                        v-if=\"input\"\n                        @pointerdown.left.shift=\"pickInterface(input, $event)\"\n                        @pointerdown.right=\"openContextMenuInterface(input, $event)\"\n                        v-long-press-to-right:500\n                        :node=\"node\"\n                        :intf=\"input\"\n                        :highlighted=\"props.interfaces.includes(input)\"\n                        :picked=\"isPickedInterface(input)\"\n                        :switchSides=\"switchSides\"\n                    />\n                    <!-- eslint-disable-next-line vue/require-v-for-key -->\n                    <div v-else class=\"baklava-node-interface --input\">&nbsp;</div>\n                </template>\n            </div>\n\n            <CustomContextMenu\n                v-if=\"showContextMenuInterface\"\n                v-model=\"showContextMenuInterface\"\n                :x=\"contextMenuInterfaceX\"\n                :y=\"contextMenuInterfaceY\"\n                :items=\"contextMenuInterfaceItems\"\n                :style=\"contextMenuStyle\"\n                @click=\"onContextMenuInterfaceClick\"\n            />\n        </div>\n    </div>\n</template>\n\n<script setup>\n/* eslint-disable object-curly-newline */\nimport { ref, computed, toRef, onUpdated, onMounted, nextTick, markRaw, watch } from 'vue';\nimport { useViewModel, useGraph } from '@baklavajs/renderer-vue';\nimport { AbstractNode, GRAPH_NODE_TYPE_PREFIX } from '@baklavajs/core';\nimport DOMPurify from 'dompurify';\n\nimport useGroupDragMove from './useGroupDragMove';\nimport CustomInterface from './CustomInterface.vue';\nimport CustomContextMenu from './ContextMenu.vue';\nimport { gridSnapper } from '../core/snappers';\nimport icons from '../icons/index';\nimport doubleClick from '../core/doubleClick.js';\nimport { getOptionName, updateInterfacePosition, removeNode } from './CustomNode.js';\nimport {\n    startTransaction, commitTransaction,\n} from '../core/History.ts';\n\nimport EditorManager from '../core/EditorManager';\nimport NotificationHandler from '../core/notifications.js';\nimport getExternalApplicationManager from '../core/communication/ExternalApplicationManager';\n\nimport InputInterfaceComponent from '../interfaces/InputInterface.vue';\nimport ListInterfaceComponent from '../interfaces/ListInterface.vue';\nimport SliderInterfaceComponent from '../interfaces/SliderInterface.vue';\nimport HexInterfaceComponent from '../interfaces/HexInterface.vue';\n\n// Baklavajs implementation\n\nconst props = defineProps({\n    node: AbstractNode,\n    selected: Boolean,\n    greyedOut: Boolean,\n    interfaces: Array,\n});\n\nconst emit = defineEmits(['select']);\n\nconst { viewModel } = useViewModel();\nconst { graph } = useGraph();\nconst movementStep = computed(() => viewModel.value.movementStep);\n\nconst contextMenuStyle = computed(() => ({\n    'transform-origin': '0 0',\n    transform: `scale(${1 / graph.value.scaling})`,\n}));\n\nconst nodeRef = ref(null);\nconst titleRef = ref(null);\nconst renaming = ref(false);\nconst renameField = ref(null);\nconst tempName = ref('');\n\nconst nodeURLs = viewModel.value.editor.getNodeURLs(props.node.type);\nconst displayNoResources = !viewModel.value.editor.nodeURLsEmpty();\n\nconst displayedInputs = computed(() => Object.values(props.node.inputs).filter((ni) => !ni.hidden));\nconst displayedOutputs = computed(() =>\n    Object.values(props.node.outputs).filter((ni) => !ni.hidden),\n);\n\nconst editorManager = EditorManager.getEditorManagerInstance();\nconst externalApplicationManager = getExternalApplicationManager();\n// Watch properties\nObject.entries(props.node.inputs).forEach(([name, input]) => {\n    if (externalApplicationManager.backendAvailable && name.startsWith('property_')) {\n        let firstWatch = true;\n        watch(input, async (value) => {\n            if (firstWatch || !editorManager.notifyWhenChanged) {\n                firstWatch = false;\n                return;\n            }\n            const data = {\n                graph_id: props.node.graphInstance.id,\n                node_id: props.node.id,\n                properties: [],\n            };\n            data.properties.push({\n                id: value.id,\n                new_value: value.value,\n            });\n            await externalApplicationManager.notifyAboutChange('properties_on_change', data);\n        });\n    }\n});\n\n// Send message about changed position\nconst notifyPositionChanged = (position) => {\n    externalApplicationManager.notifyAboutChange('position_on_change', {\n        graph_id: props.node.graphInstance.id,\n        node_id: props.node.id,\n        position: {\n            x: position.x,\n            y: position.y,\n        },\n    });\n};\n// Create watcher for position\nconst startPositionWatcher = (position) => watch(position, (value) => {\n    if (!editorManager.notifyWhenChanged) return;\n    notifyPositionChanged(value);\n});\nif (externalApplicationManager.backendAvailable) {\n    let stopPositionWatcher = startPositionWatcher(props.node.position);\n    // Restart watcher when position is replaced\n    watch(() => props.node.position, (value) => {\n        stopPositionWatcher();\n        notifyPositionChanged(value);\n        stopPositionWatcher = startPositionWatcher(value);\n    });\n}\n\nconst focusOnRename = () => {\n    renameField.value.focus();\n    renameField.value.select();\n};\n\n// Title context menu\nconst showContextMenuTitle = ref(false);\nconst contextMenuTitleX = ref(0);\nconst contextMenuTitleY = ref(0);\nconst contextMenuTitleItems = computed(() => {\n    const items = [];\n    items.push({ value: 'sidebar', label: 'Details', icon: icons.Sidebar });\n    if (!viewModel.value.editor.readonly) {\n        items.push({ value: 'rename', label: 'Rename', icon: icons.Pencil });\n    }\n    if (props.node.type.startsWith(GRAPH_NODE_TYPE_PREFIX)) {\n        items.push({ value: 'editSubgraph', label: 'Edit Subgraph' });\n    }\n    if (items.length > 1) {\n        items.at(-1).endSection = true;\n    }\n\n    items.push(...nodeURLs);\n\n    if (!viewModel.value.editor.readonly) {\n        if (items.length > 1) {\n            items.at(-1).endSection = true;\n        }\n        items.push(\n            { value: 'disconnect', label: 'Disconnect', icon: icons.Disconnect },\n            { value: 'delete', label: 'Delete', icon: icons.Bin },\n        );\n    }\n\n    // NOTE: This feature is disabled for now, as it is not fully implemented\n    const SUPPORT_NODE_UNWRAPPING = false;\n    if (SUPPORT_NODE_UNWRAPPING) {\n        if (props.node.type.startsWith(GRAPH_NODE_TYPE_PREFIX)) {\n            items.push({ value: 'unwrap', label: 'Unwrap Subgraph', icon: icons.Unwrap });\n        }\n    }\n\n    return items;\n});\n\nconst openSidebar = () => {\n    const { sidebar } = viewModel.value.displayedGraph;\n    sidebar.nodeId = props.node.id;\n    sidebar.visible = true;\n};\n\n/* eslint-disable default-case */\nconst onContextMenuTitleClick = async (action) => {\n    switch (action) {\n        case 'delete':\n            startTransaction();\n            // If the node is not selected, select it\n            if (!graph.value.selectedNodes.includes(props.node)) {\n                graph.value.selectedNodes.push(props.node);\n            }\n            graph.value.selectedNodes.forEach((node) => {\n                removeNode(node);\n            });\n            commitTransaction();\n            break;\n        case 'rename':\n            tempName.value = props.node.title;\n            renaming.value = true;\n            await nextTick();\n            focusOnRename();\n            break;\n        case 'disconnect': {\n            startTransaction();\n            let interfaces = [...displayedInputs.value, ...displayedOutputs.value];\n            graph.value.selectedNodes.forEach((node) => {\n                interfaces = interfaces.concat(\n                    Object.entries(node.inputs).filter(([name, ni]) => !ni.hidden && !name.startsWith('property_')).map(([, ni]) => ni),\n                    Object.values(node.outputs).filter((ni) => !ni.hidden),\n                );\n            });\n            const nodeConnections = graph.value.connections.filter(\n                (c) =>\n                    (interfaces.find((i) => i === c.from || i === c.to) !== undefined),\n            );\n            nodeConnections.forEach((c) => {\n                graph.value.removeConnection(c);\n            });\n            commitTransaction();\n        } break;\n        case 'sidebar':\n            openSidebar();\n            break;\n        case 'editSubgraph': {\n            const errors = viewModel.value.editor.switchToSubgraph(props.node);\n            if (Array.isArray(errors) && errors.length) {\n                NotificationHandler.terminalLog('error', 'Dataflow is invalid', errors);\n            }\n            break;\n        }\n        case 'unwrap': {\n            startTransaction();\n            removeNode(props.node, true);\n            commitTransaction();\n        }\n    }\n};\n\nconst canOpenContextMenu = computed(() =>\n    (contextMenuTitleItems.value.length === 0 && displayNoResources)\n        || contextMenuTitleItems.value.length > 0,\n);\n\nconst showContextMenuInterface = ref(false);\n\nconst openContextMenuTitle = (ev) => {\n    if (\n        canOpenContextMenu.value &&\n        showContextMenuTitle.value === false &&\n        showContextMenuInterface.value === false\n    ) {\n        const target = ev.currentTarget;\n        contextMenuTitleX.value = ev.offsetX;\n        contextMenuTitleY.value = ev.offsetY + target.offsetTop + 20;\n        showContextMenuTitle.value = true;\n    }\n};\n\nconst groupDragMove = useGroupDragMove(\n    toRef(props.node, 'position'),\n    props.node.id,\n    gridSnapper(movementStep),\n);\n\nconst classes = computed(() => ({\n    '--selected': props.selected,\n    '--dragging': groupDragMove.dragging.value,\n    '--two-column': !!props.node.twoColumn,\n    '--greyed-out': props.greyedOut,\n    __readonly: viewModel.value.editor.readonly,\n}));\n\nconst styles = computed(() => ({\n    top: `${props.node.position?.y ?? 0}px`,\n    left: `${props.node.position?.x ?? 0}px`,\n    width: `${props.node.width ?? 300}px`,\n}));\n\nconst nodeTitle = computed(() => {\n    const title = props.node.highlightedTitle ?? props.node.title;\n    const type = props.node.highlightedType ?? props.node.type;\n\n    // Graph node case\n    if (props.node.type.startsWith(GRAPH_NODE_TYPE_PREFIX)) {\n        if (title === '' || title === undefined) {\n            // The highlighted title does not have the GRAPH_NODE_TYPE_PREFIX\n            // because otherwise <span> tags could mangle the name\n            if (props.node.highlightedTitle === props.node.title) {\n                return type.slice(GRAPH_NODE_TYPE_PREFIX.length);\n            }\n            return type;\n        }\n\n        return title;\n    }\n\n    if (title === '' || props.node.title === props.node.type) {\n        return type;\n    }\n\n    return `${title} <pre class=\"subtitle\">${type}</pre>`;\n});\n\nconst select = (event) => {\n    emit('select', event);\n};\n\nlet abortDrag;\nlet stopDrag;\n\nconst cleanEvents = () => {\n    document.removeEventListener('pointermove', groupDragMove.onPointerMove);\n    document.removeEventListener('keyboard.escape', abortDrag);\n    document.removeEventListener('pointerup', stopDrag);\n};\n\nabortDrag = () => {\n    cleanEvents();\n};\n\nstopDrag = () => {\n    groupDragMove.onPointerUp();\n    cleanEvents();\n};\n\nconst startDrag = (ev) => {\n    if (!graph.value.selectedNodes.includes(props.node)) {\n        select(ev);\n    }\n\n    groupDragMove.onPointerDown(ev);\n    document.addEventListener('pointermove', groupDragMove.onPointerMove);\n    document.addEventListener('keyboard.escape', abortDrag);\n    document.addEventListener('pointerup', stopDrag);\n};\n\nconst doneRenaming = () => {\n    graph.value.findNodeById(props.node.id).title = tempName.value;\n    renaming.value = false;\n};\n\nconst onRender = () => {\n    if (nodeRef.value) {\n        viewModel.value.hooks.renderNode.execute({ node: props.node, el: nodeRef.value });\n    }\n};\n\nonMounted(onRender);\nonUpdated(onRender);\n\n// ----------\n\n/**\n * Wrapper that prevents node moving if the editor is in read-only mode.\n *\n * @param ev Event\n */\nconst startDragWrapper = (ev) => {\n    if (!viewModel.value.editor.readonly) {\n        startDrag(ev);\n    }\n};\n\nconst openDoubleClick = doubleClick(700, () => {\n    openSidebar();\n});\n\n/* eslint-disable vue/no-mutating-props,no-param-reassign */\nconst onMouseDown = () => {\n    const { sidebar } = viewModel.value.displayedGraph;\n    if (sidebar.visible) {\n        sidebar.nodeId = props.node.id;\n    }\n\n    openDoubleClick();\n};\n\nconst displayedProperties = computed(() =>\n    Object.values(displayedInputs.value).filter((intf) => !intf.port),\n);\n\nconst displayedLeftSockets = computed(() =>\n    Object.values([...displayedInputs.value, ...displayedOutputs.value])\n        .filter((intf) => intf.side === 'left' && intf.port)\n        .sort((intf1, intf2) => intf1.sidePosition - intf2.sidePosition),\n);\n\nconst displayedRightSockets = computed(() =>\n    Object.values([...displayedInputs.value, ...displayedOutputs.value])\n        .filter((intf) => intf.side === 'right' && intf.port)\n        .sort((intf1, intf2) => intf1.sidePosition - intf2.sidePosition),\n);\n\nconst getRows = (sockets) => {\n    if (!sockets.length) {\n        return [];\n    }\n\n    const numOfLines = Math.max(\n        displayedLeftSockets.value.at(-1)?.sidePosition ?? 0,\n        displayedRightSockets.value.at(-1)?.sidePosition ?? 0,\n    );\n\n    let numOfSocket = 0;\n    const rows = [];\n\n    for (let i = 0; i <= numOfLines; i += 1) {\n        if (sockets[numOfSocket]?.sidePosition === i) {\n            rows.push(sockets[numOfSocket]);\n            numOfSocket += 1;\n        } else {\n            rows.push(undefined);\n        }\n    }\n    return rows;\n};\n\nconst displayedRightRows = computed(() => getRows(displayedRightSockets.value));\nconst displayedLeftRows = computed(() => getRows(displayedLeftSockets.value));\n\ndisplayedProperties.value.forEach((prop) => {\n    if (prop.component === undefined) {\n        if (prop.componentName === 'InputInterface') {\n            prop.setComponent(markRaw(InputInterfaceComponent));\n        } else if (prop.componentName === 'ListInterface') {\n            prop.setComponent(markRaw(ListInterfaceComponent));\n        } else if (prop.componentName === 'SliderInterface') {\n            prop.setComponent(markRaw(SliderInterfaceComponent));\n        } else if (prop.componentName === 'HexInterface') {\n            prop.setComponent(markRaw(HexInterfaceComponent));\n        }\n    }\n});\n\nconst path = viewModel.value.editor.getNodeIconPath(props.node.type);\nconst iconPath = viewModel.value.cache[`./${path}`] ?? path;\n\n// Interface modification\n\nlet newSocketIndex;\nlet chosenInterface;\n\nconst leftSocketsRefs = ref(null);\nconst rightSocketsRefs = ref(null);\n\nconst interfaceCursorStyle = ref({\n    top: '0px',\n    left: '0px',\n    display: 'none',\n});\n\nconst nodeTitleStyle = computed(() => {\n    if (!viewModel.value.editor.readonly) {\n        return {\n            cursor: 'drag',\n        };\n    }\n\n    if (canOpenContextMenu.value) {\n        return {\n            cursor: 'pointer',\n        };\n    }\n\n    return {\n        cursor: 'default',\n    };\n});\n\nconst isPickedInterface = (intf) => intf === chosenInterface;\n\nconst assignNewPosition = () => {\n    updateInterfacePosition(\n        props.node,\n        chosenInterface,\n        chosenInterface.side,\n        newSocketIndex,\n        true,\n    );\n};\n\nconst dragInterface = (ev) => {\n    let sockets;\n    if (chosenInterface.side === 'right') {\n        sockets = rightSocketsRefs.value;\n    } else if (chosenInterface.side === 'left') {\n        sockets = leftSocketsRefs.value;\n    }\n\n    // Finding the first interface that is lower than the cursor\n    let socket = [...sockets.children].findIndex((socketRef) => {\n        const boundingRect = socketRef.getBoundingClientRect();\n        return boundingRect.bottom > ev.clientY;\n    });\n    newSocketIndex = socket;\n\n    if (socket === -1) {\n        socket = sockets.children.length - 1;\n        newSocketIndex = sockets.children.length - 1;\n    }\n\n    const el = sockets.children[socket];\n    interfaceCursorStyle.value = {\n        top: `${el.offsetTop + el.offsetHeight / 2 - 2.5}px`,\n        display: 'block',\n    };\n\n    if (chosenInterface.side === 'right') {\n        interfaceCursorStyle.value.right = '-0.7em';\n    } else if (chosenInterface.side === 'left') {\n        interfaceCursorStyle.value.left = '-0.7em';\n    }\n};\n\nconst dropInterface = () => {\n    assignNewPosition();\n\n    chosenInterface = undefined;\n    interfaceCursorStyle.value = {\n        top: '0px',\n        left: '0px',\n        right: '0px',\n        display: 'none',\n    };\n\n    document.removeEventListener('pointermove', dragInterface);\n    document.removeEventListener('pointerup', dropInterface);\n};\n\nconst pickInterface = (intf, ev) => {\n    chosenInterface = intf;\n    dragInterface(ev);\n\n    document.addEventListener('pointermove', dragInterface);\n    document.addEventListener('pointerup', dropInterface);\n};\n\n// Interface context menu\n\nconst contextMenuInterfaceX = ref(0);\nconst contextMenuInterfaceY = ref(0);\n\nconst createContextMenuInterfaceItems = () => {\n    const items = [];\n\n    if (chosenInterface !== undefined) {\n        const intfMode = (chosenInterface.externalName === undefined ?\n            { value: 'SetExternalName', label: 'Expose Interface' } :\n            { value: 'UnsetExternalName', label: 'Privatize Interface' }\n        );\n        items.push(intfMode);\n    }\n\n    items.push(\n        { value: 'SpaceUp', label: 'Space Up' },\n        { value: 'SpaceDown', label: 'Space Down' },\n        { value: 'MoveUp', label: 'Move Up' },\n        { value: 'MoveDown', label: 'Move Down' },\n    );\n\n    return items;\n};\n\nconst contextMenuInterfaceItems = ref(createContextMenuInterfaceItems());\n\n/* eslint-disable default-case */\nconst onContextMenuInterfaceClick = (action) => {\n    switch (action) {\n        case 'SetExternalName':\n            viewModel.value.editor.exposeInterface(\n                graph.value.id,\n                chosenInterface,\n            );\n            break;\n        case 'UnsetExternalName':\n            viewModel.value.editor.privatizeInterface(\n                graph.value.id,\n                chosenInterface,\n            );\n            break;\n        case 'MoveUp':\n            if (chosenInterface.sidePosition === 0) {\n                chosenInterface = undefined;\n                break;\n            }\n            newSocketIndex = chosenInterface.sidePosition - 1;\n            dropInterface();\n            break;\n        case 'MoveDown':\n            newSocketIndex = chosenInterface.sidePosition + 1;\n            dropInterface();\n            break;\n        case 'SpaceUp':\n        case 'SpaceDown': {\n            const sockets =\n                chosenInterface.side === 'right'\n                    ? displayedRightRows.value\n                    : displayedLeftRows.value;\n            const comparison = action === 'SpaceDown' ? (a, b) => a > b : (a, b) => a >= b;\n            Object.values(sockets).forEach((intf) => {\n                if (intf !== undefined &&\n                comparison(intf.sidePosition, chosenInterface.sidePosition)) {\n                    intf.sidePosition += 1; // eslint-disable-line no-param-reassign\n                }\n            });\n            break;\n        }\n    }\n};\n\nconst openContextMenuInterface = (intf, ev) => {\n    if (!viewModel.value.editor.readonly && showContextMenuInterface.value === false) {\n        chosenInterface = intf;\n        contextMenuInterfaceItems.value = createContextMenuInterfaceItems();\n        if (chosenInterface.side === 'right') {\n            contextMenuInterfaceX.value = ev.currentTarget.offsetLeft + 162.5;\n            contextMenuInterfaceY.value = ev.currentTarget.offsetTop + 12.5;\n        } else if (chosenInterface.side === 'left') {\n            contextMenuInterfaceX.value =\n                ev.currentTarget.offsetLeft - ev.currentTarget.offsetWidth + 162.5;\n            contextMenuInterfaceY.value = ev.currentTarget.offsetTop + 12.5;\n        }\n\n        showContextMenuInterface.value = true;\n    }\n};\n\nwatch(showContextMenuInterface, () => {\n    if (showContextMenuInterface.value === false) {\n        chosenInterface = undefined;\n    }\n});\n\nconst toggleGroup = (intf) => {\n    intf.group.forEach((name) => {\n        props.node.inputs[name].hidden = !intf.value;\n    });\n};\n\nconst updateDynamicInterfaces = (intf) => {\n    props.node.updateDynamicInterfaces(intf);\n};\n\n/* eslint-disable no-param-reassign */\nconst switchSides = (intf) => {\n    if (intf.side === 'left') {\n        updateInterfacePosition(props.node, intf, 'right');\n    } else {\n        updateInterfacePosition(props.node, intf, 'left');\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.interface-cursor {\n    position: relative;\n    top: 0;\n    left: 0;\n\n    & > .line {\n        position: absolute;\n        height: 0.2em;\n        width: 1.4em;\n        background-color: $gold;\n        z-index: 100;\n    }\n}\n\n</style>\n","/*\n * Copyright (c) 2022-2023 Antmicro <www.antmicro.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n *\n */\nimport { useGraph } from '@baklavajs/renderer-vue';\nimport useDragMove from './useDragMove';\n/* eslint-disable no-param-reassign, @typescript-eslint/no-explicit-any */\nexport default function useGroupDragMove(dragRootNodePosition, dragRootNodeId = undefined, gridSnapperInstance = undefined) {\n    const { graph } = useGraph();\n    const groupDragMove = useDragMove(dragRootNodePosition, gridSnapperInstance, dragRootNodeId);\n    const groupPointerMove = groupDragMove.onPointerMove;\n    const onPointerMove = (ev) => {\n        const groupPositionCoords = {\n            x: dragRootNodePosition.value.x,\n            y: dragRootNodePosition.value.y,\n        };\n        groupPointerMove(ev);\n        const dx = dragRootNodePosition.value.x - groupPositionCoords.x;\n        const dy = dragRootNodePosition.value.y - groupPositionCoords.y;\n        graph.value.selectedNodes.forEach((node) => {\n            if (node.id !== dragRootNodeId) {\n                node.position.x += dx;\n                node.position.y += dy;\n            }\n        });\n    };\n    groupDragMove.onPointerMove = onPointerMove;\n    return groupDragMove;\n}\n","import script from \"./CustomNode.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CustomNode.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CustomNode.vue?vue&type=style&index=0&id=6b3c6ea2&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/kenning-pipeline-manager/kenning-pipeline-manager/pipeline_manager/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6b3c6ea2\"]])\n\nexport default __exports__","<!--\nCopyright (c) 2022-2024 Antmicro <www.antmicro.com>\n\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<!--\nComponent defining connection between two different nodes\nInherits from baklavajs/renderer-vue/src/connection/ConnectionView.vue\n-->\n\n<template>\n    <g v-if=\"hasAnchors\">\n        <path :d=\"parsedNewD\" class=\"connection-wrapper baklava-connection\"></path>\n        <!-- The connection wrapper is rendered twice, once for\n            easy highlight detection, and once for creating anchor points -->\n\n        <!-- eslint-disable vue/valid-v-for -->\n        <template v-if=\"hasAnchors\">\n            <g\n                v-for=\"(d, index) in parsedNewD\"\n                @pointerdown.left.exact=\"onMouseDown\"\n                @pointerdown=\"(ev) => { if(ev.pointerType === 'touch') onMouseDown(ev) }\"\n                @pointerdown.left.ctrl.exact=\"(ev) => onMouseCtrlDown(ev, index)\"\n            >\n            <path :d=\"d\" class=\"connection-wrapper baklava-connection\"></path>\n            <path :d=\"d\" class=\"baklava-connection\" :class=\"cssClasses\" :style=\"style\"></path>\n            </g>\n            <Anchor\n                v-for=\"(anchor, index) in connection.anchors\"\n                :key=\"anchor.id\"\n                :position=\"anchor\"\n                :rightclickCallback=\"() => removeAnchor(index)\"\n            />\n        </template>\n    </g>\n    <g\n        v-else\n        @pointerdown.left.exact=\"onMouseDown\"\n        @pointerdown=\"(ev) => { if(ev.pointerType === 'touch') onMouseDown(ev) }\"\n        @pointerdown.left.ctrl.exact=\"(ev) => onMouseCtrlDown(ev, 0)\"\n    >\n        <path :d=\"parsedNewD\" class=\"connection-wrapper baklava-connection\"></path>\n        <path :d=\"parsedNewD\" class=\"baklava-connection\" :class=\"cssClasses\" :style=\"style\"></path>\n    </g>\n</template>\n\n<script>\nimport { defineComponent, computed } from 'vue';\nimport { Components, useGraph, useViewModel } from '@baklavajs/renderer-vue';\nimport doubleClick from '../../core/doubleClick';\nimport Anchor from '../../components/Anchor.vue';\n\n/* eslint-disable vue/no-mutating-props,no-param-reassign */\nexport default defineComponent({\n    extends: Components.Connection,\n    props: { isHighlighted: { default: false }, connection: { required: true } },\n    components: { Anchor },\n    setup(props) {\n        const { classes } = Components.Connection.setup(props);\n        const { graph } = useGraph();\n        const { viewModel } = useViewModel();\n        const { interfaceTypes } = viewModel.value;\n\n        const connectionStyle = interfaceTypes.getConnectionStyle(\n            props.connection.from,\n            props.connection.to,\n        );\n\n        const cssClasses = computed(() => ({\n            ...classes.value,\n            '--hover': props.isHighlighted,\n            '--dashed': connectionStyle.interfaceConnectionPattern === 'dashed',\n            '--dotted': connectionStyle.interfaceConnectionPattern === 'dotted',\n        }));\n\n        const style = computed(() => ({\n            '--color': connectionStyle.interfaceConnectionColor,\n        }));\n\n        const onMouseDown = doubleClick(700, (ev) => {\n            if (!viewModel.value.editor.readonly) {\n                ev.preventDefault();\n                graph.value.removeConnection(props.connection);\n            }\n        });\n\n        const removeAnchor = (idx) => {\n            if (viewModel.value.editor.readonly) return;\n            graph.value.events.removeAnchor.emit([props.connection, idx]);\n            props.connection.anchors.splice(idx, 1);\n        };\n\n        const onMouseCtrlDown = (ev, index) => {\n            if (\n                viewModel.value.editor.readonly ||\n                viewModel.value.connectionRenderer.style !== 'orthogonal'\n            ) return;\n            ev.preventDefault();\n\n            const newAnchor = {\n                x: (ev.offsetX / graph.value.scaling) - graph.value.panning.x,\n                y: (ev.offsetY / graph.value.scaling) - graph.value.panning.y,\n                id: Date.now(),\n            };\n                // The index shows the connection section that was pressed -\n                // since we have an extra one at the beginning, we need a -1 and a\n                // division by 3 with no decimal to determine what anchor position\n                // corresponds\n            graph.value.addAnchor(newAnchor, props.connection, Math.trunc((index - 1) / 3));\n        };\n\n        const transform = (x, y) => {\n            const tx = (x + graph.value.panning.x) * graph.value.scaling;\n            const ty = (y + graph.value.panning.y) * graph.value.scaling;\n            return [tx, ty];\n        };\n\n        const newD = computed(() => {\n            const [tx1, ty1] = transform(props.x1, props.y1);\n            const [tx2, ty2] = transform(props.x2, props.y2);\n            return viewModel.value.connectionRenderer.render(tx1, ty1, tx2, ty2, props.connection);\n        });\n\n        const parsedNewD = computed(() => {\n            const d = newD.value;\n\n            if (Array.isArray(d) && d.length) {\n                const parsedArray = [];\n                for (let i = 0; i < d.length - 1; i += 1) {\n                    parsedArray.push(`M ${d[i].x} ${d[i].y} L ${d[i + 1].x} ${d[i + 1].y}`);\n                }\n                return parsedArray;\n            }\n            return d;\n        });\n\n        const hasAnchors = computed(() =>\n            props.connection.anchors !== undefined &&\n            props.connection.anchors.length &&\n            viewModel.value.connectionRenderer.style === 'orthogonal',\n        );\n\n        return {\n            cssClasses,\n            parsedNewD,\n            onMouseDown,\n            onMouseCtrlDown,\n            style,\n            hasAnchors,\n            removeAnchor,\n        };\n    },\n});\n</script>\n","import { render } from \"./ConnectionView.vue?vue&type=template&id=f8f5e354\"\nimport script from \"./ConnectionView.vue?vue&type=script&lang=js\"\nexport * from \"./ConnectionView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/kenning-pipeline-manager/kenning-pipeline-manager/pipeline_manager/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/*\n * Copyright (c) 2022-2023 Antmicro <www.antmicro.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Baklava file that is not exported so it has to be copy-pasted here locally into the project\n\nexport default function getDomElements(ni) {\n    const interfaceDOM = document.getElementById(ni.id);\n    const portDOM = interfaceDOM?.getElementsByClassName('__port');\n\n    return {\n        node: interfaceDOM?.closest('.baklava-node') ?? null,\n        interface: interfaceDOM,\n        port: portDOM && portDOM.length > 0 ? portDOM[0] : null,\n    };\n}\n","/*\n * Copyright (c) 2022-2023 Antmicro <www.antmicro.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n *\n */\n\n/**\n * Module used to handle user interaction with connections and interfaces.\n * It is heavily baklava implementation based.\n */\n\nimport { provide, ref } from 'vue';\nimport { useGraph } from '@baklavajs/renderer-vue';\n\n/**\n * This enum class is based on baklavajs enum `TemporaryConnectionState`\n * and is compatible with it as it is unimportable in baklavajs sources\n */\nexport const TemporaryConnectionState = {\n    NONE: 0,\n    ALLOWED: 1,\n    FORBIDDEN: 2,\n};\n\nexport function useTemporaryConnection() {\n    const { graph } = useGraph();\n\n    const temporaryConnection = ref(null);\n    const hoveringOver = ref(null);\n    let hoveringOverElement = null;\n\n    const onMouseMove = (ev) => {\n        if (temporaryConnection.value) {\n            // Touch does not support hover, check if event pointing on interface\n            if (ev.pointerType === 'touch') {\n                const element = document.elementFromPoint(ev.clientX, ev.clientY);\n                // Hover out, trigger pointerout\n                if (hoveringOverElement && hoveringOverElement !== element) {\n                    hoveringOverElement.dispatchEvent(new PointerEvent('pointerout'));\n                    hoveringOverElement = null;\n                }\n                // Hover over port, trigger pointerover\n                if (element && element.classList.contains('__port')) {\n                    element.dispatchEvent(new PointerEvent('pointerover'));\n                    hoveringOverElement = element;\n                }\n                temporaryConnection.value.mx =\n                    ev.clientX / graph.value.scaling - graph.value.panning.x;\n                temporaryConnection.value.my =\n                    ev.clientY / graph.value.scaling - graph.value.panning.y;\n            } else {\n                temporaryConnection.value.mx =\n                    ev.offsetX / graph.value.scaling - graph.value.panning.x;\n                temporaryConnection.value.my =\n                    ev.offsetY / graph.value.scaling - graph.value.panning.y;\n            }\n        }\n    };\n\n    const onMouseDown = (ev) => {\n        hoveringOverElement = ev.target;\n        if (hoveringOver.value) {\n            temporaryConnection.value = {\n                status: TemporaryConnectionState.NONE,\n                from: hoveringOver.value,\n                to: hoveringOver.value,\n            };\n\n            temporaryConnection.value.mx = undefined;\n            temporaryConnection.value.my = undefined;\n        }\n    };\n\n    const onMouseUp = () => {\n        if (temporaryConnection.value && hoveringOver.value) {\n            graph.value.addConnection(temporaryConnection.value.from, temporaryConnection.value.to);\n        }\n        temporaryConnection.value = null;\n    };\n\n    const hoveredOver = (ni) => {\n        hoveringOver.value = ni ?? null;\n        if (ni && temporaryConnection.value) {\n            temporaryConnection.value.to = ni;\n            const checkConnectionResult = graph.value.checkConnection(\n                temporaryConnection.value.from,\n                temporaryConnection.value.to,\n            );\n            temporaryConnection.value.status = checkConnectionResult.connectionAllowed\n                ? TemporaryConnectionState.ALLOWED\n                : TemporaryConnectionState.FORBIDDEN;\n\n            if (checkConnectionResult.connectionAllowed) {\n                const ids = checkConnectionResult.connectionsInDanger.map((c) => c.id);\n                graph.value.connections.forEach((c) => {\n                    if (ids.includes(c.id)) {\n                        c.isInDanger = true; // eslint-disable-line no-param-reassign\n                    }\n                });\n            }\n        } else if (!ni && temporaryConnection.value) {\n            temporaryConnection.value.to = undefined;\n            temporaryConnection.value.status = TemporaryConnectionState.NONE;\n            graph.value.connections.forEach((c) => {\n                c.isInDanger = false; // eslint-disable-line no-param-reassign\n            });\n        }\n    };\n\n    provide('hoveredOver', hoveredOver);\n\n    return {\n        temporaryConnection,\n        onMouseMove,\n        onMouseDown,\n        onMouseUp,\n    };\n}\n","<!--\nCopyright (c) 2022-2023 Antmicro <www.antmicro.com>\n\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<!--\nWraps the connection, defines it's type and parameters.\nInherits from baklavajs/renderer-vue/src/connection/ConnectionView.vue\n-->\n\n<template>\n    <ConnectionView\n        ref=\"conn\"\n        :x1=\"d.x1\"\n        :y1=\"d.y1\"\n        :x2=\"d.x2\"\n        :y2=\"d.y2\"\n        :state=\"state\"\n        :connection=\"connection\"\n        :isHighlighted=\"isHighlighted\"\n    ></ConnectionView>\n</template>\n\n<script>\nimport { defineComponent, ref, computed, watch, nextTick, onMounted, onBeforeUnmount } from 'vue'; // eslint-disable-line object-curly-newline\nimport { Components, useGraph } from '@baklavajs/renderer-vue';\nimport ConnectionView from './ConnectionView.vue';\nimport getDomElements from './domResolver';\nimport { TemporaryConnectionState } from '../temporaryConnection.js';\n\nexport default defineComponent({\n    extends: Components.ConnectionWrapper,\n    props: { connection: { required: true }, isHighlighted: { default: false } },\n    components: { ConnectionView },\n    setup(props) {\n        const conn = ref(null);\n        const { graph } = useGraph();\n\n        let resizeObserver;\n        const d = ref({\n            x1: 0,\n            y1: 0,\n            x2: 0,\n            y2: 0,\n        });\n\n        // eslint-disable-next-line no-confusing-arrow\n        const state = computed(() =>\n            props.connection.isInDanger\n                ? TemporaryConnectionState.FORBIDDEN\n                : TemporaryConnectionState.NONE,\n        );\n\n        /**\n         * Check whether the connection path contains the x, y point\n         *\n         * @param elements result of `document.elementsFromPoint()` for a given x, y point.\n         */\n        const containsPoint = (elements) =>\n            elements.includes(conn.value.$el.firstChild);\n\n        const fromNodePosition = computed(\n            () => graph.value.findNodeById(props.connection.from.nodeId)?.position,\n        );\n        const toNodePosition = computed(\n            () => graph.value.findNodeById(props.connection.to.nodeId)?.position,\n        );\n\n        const fromNode = computed(() => graph.value.findNodeById(props.connection.from.nodeId));\n        const toNode = computed(() => graph.value.findNodeById(props.connection.to.nodeId));\n\n        const fromNodeInterfacesSide = computed(() =>\n            [\n                ...Object.values(fromNode.value?.inputs ?? {}),\n                ...Object.values(fromNode.value?.outputs ?? {}),\n            ].map((io) => [io.side, io.sidePosition]),\n        );\n        const toNodeInterfacesSide = computed(() =>\n            [\n                ...Object.values(toNode.value?.inputs ?? {}),\n                ...Object.values(toNode.value?.outputs ?? {}),\n            ].map((io) => [io.side, io.sidePosition]),\n        );\n\n        const getPortCoordinates = (resolved) => {\n            if (resolved.node && resolved.interface && resolved.port) {\n                return [\n                    resolved.node.offsetLeft +\n                        resolved.interface.offsetLeft +\n                        resolved.port.offsetLeft +\n                        resolved.port.clientWidth / 2,\n                    resolved.node.offsetTop +\n                        resolved.interface.offsetTop +\n                        resolved.port.offsetTop +\n                        resolved.port.clientHeight / 2,\n                ];\n            }\n            return [0, 0];\n        };\n\n        const updateCoords = () => {\n            const from = getDomElements(props.connection.from);\n            const to = getDomElements(props.connection.to);\n            if (from.node && to.node) {\n                if (!resizeObserver) {\n                    resizeObserver = new ResizeObserver(() => {\n                        updateCoords();\n                    });\n                    resizeObserver.observe(from.node);\n                    resizeObserver.observe(to.node);\n                }\n            }\n\n            const [x1, y1] = getPortCoordinates(from);\n            const [x2, y2] = getPortCoordinates(to);\n            d.value = {\n                x1,\n                y1,\n                x2,\n                y2,\n            };\n        };\n\n        // If any side of any interface in from or to node changes we may need to\n        // Rerender connections\n        watch([fromNodeInterfacesSide, toNodeInterfacesSide], async () => {\n            await nextTick();\n            updateCoords();\n        });\n\n        watch(\n            [fromNodePosition, toNodePosition],\n            async () => {\n                await nextTick();\n                updateCoords();\n            },\n            { deep: true },\n        );\n\n        onMounted(async () => {\n            await nextTick();\n            updateCoords();\n        });\n\n        onBeforeUnmount(() => {\n            if (resizeObserver) {\n                resizeObserver.disconnect();\n            }\n        });\n\n        return {\n            d,\n            state,\n            containsPoint,\n            conn,\n        };\n    },\n});\n</script>\n","import { render } from \"./PipelineManagerConnection.vue?vue&type=template&id=6aa53c7f\"\nimport script from \"./PipelineManagerConnection.vue?vue&type=script&lang=js\"\nexport * from \"./PipelineManagerConnection.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/kenning-pipeline-manager/kenning-pipeline-manager/pipeline_manager/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!--\nCopyright (c) 2022-2023 Antmicro <www.antmicro.com>\n\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<template>\n    <ConnectionView\n        :x1=\"swappedD.input[0]\"\n        :y1=\"swappedD.input[1]\"\n        :x2=\"swappedD.output[0]\"\n        :y2=\"swappedD.output[1]\"\n        :state=\"status\"\n        :connection=\"connection\"\n        is-temporary\n    />\n</template>\n\n<script>\nimport { computed } from 'vue';\nimport { Components } from '@baklavajs/renderer-vue';\nimport ConnectionView from './ConnectionView.vue';\n\nexport default {\n    extends: Components.TemporaryConnection,\n    components: {\n        ConnectionView,\n    },\n    setup(props) {\n        const { d, status } = Components.TemporaryConnection.setup(props);\n\n        const swappedD = computed(() => {\n            let { input, output } = d.value;\n\n            // Currently, baklavajs swaps the input/output if this condition holds\n            // We want to have no discrepancy between the input output coordinates\n            // and connection from/to values.\n            if (props.connection.from.isInput) {\n                [input, output] = [output, input];\n            }\n\n            return { input, output };\n        });\n\n        return { d, swappedD, status };\n    },\n};\n</script>\n","import { render } from \"./TemporaryConnection.vue?vue&type=template&id=00fe0537\"\nimport script from \"./TemporaryConnection.vue?vue&type=script&lang=js\"\nexport * from \"./TemporaryConnection.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/kenning-pipeline-manager/kenning-pipeline-manager/pipeline_manager/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!--\nCopyright (c) 2022-2023 Antmicro <www.antmicro.com>\n\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<!--\nCustom node palette - Implements a sidebar containing available nodes.\n\nInherits from baklavajs/packages/renderer-vue/src/nodepalette/NodePalette.vue\n-->\n\n<template>\n    <!-- eslint-disable vue/no-multiple-template-root -->\n    <div\n        ref=\"paletteRef\"\n        class=\"baklava-node-palette\"\n        :class=\"{'hidden-navbar': $isMobile}\"\n    >\n        <div class=\"search-bar\">\n            <div class=\"palette-title\">\n                <span>Nodes browser</span>\n            </div>\n            <div class=\"__entry_search\">\n                <Magnifier :color=\"'gray'\" />\n                <input class=\"node-search\" v-model=\"nodeSearch\" placeholder=\"Search\" />\n            </div>\n        </div>\n        <div class=\"nodes\">\n            <PaletteCategory\n                :nodeTree=\"nodeTree\"\n                :onDragStart=\"onDragStart\"\n                :defaultCollapse=\"collapse\"\n                :tooltip=\"tooltip\"\n                :nodeSearch=\"nodeSearch\"\n            />\n        </div>\n        <!-- Height of the sidebar is 60 so we need to subtract that -->\n        <Tooltip\n            v-show=\"tooltip.visible\"\n            :text=\"tooltip.text\"\n            :left=\"tooltip.left\"\n            :top=\"tooltip.top - 60\"\n        />\n    </div>\n    <transition name=\"fade\">\n        <div v-if=\"draggedNode\" class=\"baklava-dragged-node\" :style=\"draggedNodeStyles\">\n            <PaletteEntry\n                :title=\"draggedNode.nodeInformation.title\"\n                :iconPath=\"draggedNode.iconPath\"\n                :isDragged=\"true\"\n                :depth=\"0\"\n            />\n        </div>\n    </transition>\n</template>\n\n<script>\nimport { computed, defineComponent, provide, inject, ref, onMounted } from 'vue'; // eslint-disable-line object-curly-newline\nimport { useViewModel, useTransform } from '@baklavajs/renderer-vue';\nimport { usePointer } from '@vueuse/core';\nimport PaletteCategory from './PaletteCategory.vue';\nimport getNodeTree from './nodeTree';\nimport PaletteEntry from './PaletteEntry.vue';\nimport Tooltip from '../../components/Tooltip.vue';\nimport Magnifier from '../../icons/Magnifier.vue';\n\nexport default defineComponent({\n    components: {\n        PaletteCategory,\n        PaletteEntry,\n        Tooltip,\n        Magnifier,\n    },\n    setup() {\n        const { viewModel } = useViewModel();\n\n        const { x: mouseX, y: mouseY } = usePointer();\n        const { transform } = useTransform();\n\n        const paletteRef = ref(null);\n        const editorEl = inject('editorEl');\n\n        const draggedNode = ref(null);\n        const tooltip = ref(null);\n\n        tooltip.value = {\n            top: 0,\n            left: 0,\n            visible: false,\n            text: '',\n        };\n\n        const draggedNodeStyles = computed(() => {\n            if (!draggedNode.value || !editorEl?.value) {\n                return {};\n            }\n            const { left, top } = editorEl.value.getBoundingClientRect();\n            return {\n                top: `${mouseY.value - top}px`,\n                left: `${mouseX.value - left}px`,\n            };\n        });\n\n        const dragEndPlaceNode = (ev) => {\n            const elements = document.elementsFromPoint(ev.clientX, ev.clientY);\n\n            if (!elements.includes(paletteRef.value)) {\n                const instance = new draggedNode.value.nodeInformation.type(); // eslint-disable-line new-cap,max-len\n                viewModel.value.displayedGraph.addNode(instance);\n\n                const rect = editorEl.value.getBoundingClientRect();\n                const [x, y] = transform(mouseX.value - rect.left, mouseY.value - rect.top);\n                instance.position.x = x;\n                instance.position.y = y;\n\n                draggedNode.value = null;\n                document.removeEventListener('pointerup', dragEndPlaceNode);\n                document.removeEventListener('keydown', dragEndDeselectNode); // eslint-disable-line no-use-before-define\n            }\n        };\n\n        const dragEndDeselectNode = (ev) => {\n            if (ev.key === 'Escape') {\n                draggedNode.value = null;\n\n                document.removeEventListener('pointerup', dragEndPlaceNode);\n                document.removeEventListener('keydown', dragEndDeselectNode);\n            }\n        };\n\n        const onDragStart = (type, nodeInformation, iconPath) => {\n            draggedNode.value = {\n                type,\n                nodeInformation,\n                iconPath,\n            };\n\n            document.addEventListener('pointerup', dragEndPlaceNode);\n            document.addEventListener('keydown', dragEndDeselectNode);\n        };\n        const nodeSearch = ref('');\n        const scroll = ref(0);\n        const showMenu = ref(false);\n        provide('menu', showMenu);\n\n        const nodeTree = computed(() => getNodeTree(nodeSearch));\n        const collapse = computed(() => viewModel.value.collapseSidebar);\n\n        onMounted(() => {\n            const nodesContainer = computed(() => document.querySelector('.nodes'));\n            nodesContainer.value.addEventListener('scroll', (event) => {\n                scroll.value = event.target.scrollTop;\n                const iconMenus = document.getElementsByClassName('__icondiv');\n                for (let i = 0; i < iconMenus.length; i += 1) {\n                    iconMenus[i].style.translate = `0px -${scroll.value.toString()}px`;\n                }\n            });\n        });\n\n        return {\n            draggedNodeStyles,\n            draggedNode,\n            onDragStart,\n            nodeTree,\n            collapse,\n            tooltip,\n            nodeSearch,\n            paletteRef,\n            scroll,\n        };\n    },\n});\n</script>\n","<!--\nCopyright (c) 2022-2024 Antmicro <www.antmicro.com>\n\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<!--\nComponent representing single node's type category/subcategory.\nIt groups the nodes of the same subcategory in the block that can be collapsed.\n-->\n\n<template v-if=\"specificationLoaded\">\n    <!-- eslint-disable vue/no-multiple-template-root -->\n    <div v-show=\"nodeTree.mask\">\n        <div v-if=\"nodeTree.nodes.nodeTypes\">\n            <div\n                v-for=\"[nt, node] in sortedEntries(nodeTree.nodes.nodeTypes)\"\n                style=\"width: 100%;\"\n                v-show=\"node.mask\"\n                :style=\"padding(depth)\"\n                :class=\"nodeEntryClasses(nt)\"\n                :key=\"nt\"\n            >\n                <div\n                    @pointerdown=\"onDragStart(nt, node, node.iconPath)\"\n                    :class=\"nodeEntryClasses(nt)\"\n                >\n                    <template v-if=\"!isTopLevelNode(nt)\">\n                        <img\n                            class=\"__title-icon\"\n                            v-if=\"node.iconPath !== undefined\"\n                            :src=\"getIconPath(node.iconPath)\"\n                            draggable=\"false\"\n                        />\n                    </template>\n                    <Cross v-else color=\"white\" :rotate=\"45\" class=\"__title-icon\"></Cross>\n                    <div class=\"__title-label\" v-html=\"DOMPurify.sanitize(node.hitSubstring)\"></div>\n                </div>\n                <div\n                    class=\"__vertical_ellipsis\"\n                    ref=\"settings\"\n                    role=\"button\"\n                    @pointerdown.stop=\"\"\n                    @click.stop=\"() => showMenuClick(node)\"\n                    v-if=\"node.URLs.length !== 0\"\n                >\n                    <VerticalEllipsis class=\"smaller_svg\" />\n                </div>\n                <div class='__icondiv'>\n                    <LinkMenu\n                        :node='showMenu'\n                        style='width: 18em'\n                        v-if=\"showMenu !== false &&\n                                showMenu.hitSubstring === node.hitSubstring\"\n                        v-click-outside=\"closeMenu\"\n                    />\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div\n        v-for=\"([name, category], i) in sortedEntries(nodeTree.subcategories, true)\"\n        v-show=\"category.mask\"\n        :key=\"name\"\n    >\n        <template v-if=\"notEmptyCategory(category)\">\n            <div\n                class=\"__entry __category\"\n                @click=\"onMouseDown(i)\"\n                :style=\"padding(depth)\"\n            >\n                <Arrow :rotate=\"getRotation(i)\" scale=\"small\" />\n                <!-- There is only one category node -->\n                <template v-if=\"isCategoryNode(category)\">\n                    <div\n                        class=\"__entry __node-entry\"\n                        v-show=\"category.mask\"\n                        :key=\"category.title\"\n                        @click=\"onMouseDown(i)\"\n                        @pointerdown=\"onDragStart(\n                            category.title,\n                            category.categoryNode,\n                            category.iconPath\n                        )\"\n                    >\n                        <img\n                            class=\"__title-icon\"\n                            v-if=\"category.categoryNode.iconPath !== undefined\"\n                            :src=\"getIconPath(category.categoryNode.iconPath)\"\n                            draggable=\"false\"\n                        />\n                        <div\n                            class=\"__title-label\"\n                            v-html=\"DOMPurify.sanitize(category.hitSubstring)\">\n                        </div>\n                        <div\n                            class=\"__vertical_ellipsis\"\n                            ref=\"settings\"\n                            role=\"button\"\n                            @pointerdown.stop=\"\"\n                            @click.stop=\"() => showMenuClick(category)\"\n                            v-if=\"category.categoryNode.URLs.length !== 0\"\n                        >\n                            <VerticalEllipsis class=\"smaller_svg\" />\n                        </div>\n                    </div>\n                    <div class='__icondiv'>\n                        <LinkMenu\n                            :node='showMenu.categoryNode'\n                            style='width: 18em'\n                            v-if=\"showMenu !== false &&\n                                  showMenu.hitSubstring === category.hitSubstring\"\n                            v-click-outside=\"closeMenu\"\n                        />\n                    </div>\n                </template>\n                <div\n                    v-else\n                    class=\"__title\"\n                    v-html=\"DOMPurify.sanitize(category.hitSubstring)\"\n                ></div>\n            </div>\n            <div v-show=\"mask[i]\">\n                <PaletteCategory\n                    :nodeTree=\"category\"\n                    :onDragStart=\"onDragStart\"\n                    :depth=\"depth + 1\"\n                    :defaultCollapse=\"defaultCollapse\"\n                    :tooltip=\"tooltip\"\n                    :nodeSearch=\"nodeSearch\"\n                />\n            </div>\n        </template>\n        <template v-else>\n            <template v-if=\"isCategoryNode(category)\">\n                <div\n                    :class=\"nodeEntryClasses(category.title)\"\n                    :style=\"padding(depth)\"\n                    v-show=\"category.mask\"\n                    :key=\"category.title\"\n                    @pointerdown=\"onDragStart(\n                        category.title,\n                        category.categoryNode,\n                        category.iconPath\n                    )\"\n                >\n                    <img\n                        class=\"__title-icon\"\n                        v-if=\"category.categoryNode.iconPath !== undefined\"\n                        :src=\"getIconPath(category.categoryNode.iconPath)\"\n                        draggable=\"false\"\n                    />\n                    <div\n                        class=\"__title-label\"\n                        v-html=\"DOMPurify.sanitize(category.hitSubstring)\">\n                    </div>\n                    <div\n                        class=\"__vertical_ellipsis\"\n                        ref=\"settings\"\n                        role=\"button\"\n                        @pointerdown.stop=\"\"\n                        @click.stop=\"() => showMenuClick(category)\"\n                        v-if=\"category.categoryNode.URLs.length !== 0\"\n                    >\n                        <VerticalEllipsis class=\"smaller_svg\" />\n                    </div>\n                    <div class='__icondiv'>\n                        <LinkMenu\n                            :node='showMenu.categoryNode'\n                            style='width: 18em'\n                            v-if=\"showMenu !== false &&\n                                  showMenu.hitSubstring === category.hitSubstring\"\n                            v-click-outside=\"closeMenu\"\n                        />\n                    </div>\n                </div>\n            </template>\n            <div v-else class=\"__title\">{{ category.hitSubstring }}</div>\n        </template>\n    </div>\n</template>\n\n<script>\nimport { defineComponent, computed, ref, watch, inject } from 'vue'; // eslint-disable-line object-curly-newline\nimport { useViewModel } from '@baklavajs/renderer-vue';\nimport DOMPurify from 'dompurify';\nimport Arrow from '../../icons/Arrow.vue';\nimport VerticalEllipsis from '../../icons/VerticalEllipsis.vue';\nimport LinkMenu from '../LinkMenu.vue';\nimport EditorManager from '../../core/EditorManager';\nimport Cross from '../../icons/Cross.vue';\nimport { TOP_LEVEL_NODES_NAMES } from './nodeTree';\n\nexport default defineComponent({\n    components: {\n        Arrow, LinkMenu, VerticalEllipsis, Cross,\n    },\n    props: {\n        nodeTree: {\n            required: true,\n        },\n        onDragStart: {\n            required: true,\n        },\n        depth: {\n            type: Number,\n            default: 0,\n        },\n        defaultCollapse: {\n            type: Boolean,\n            default: true,\n        },\n        tooltip: {\n            required: false,\n        },\n        nodeSearch: {\n            type: String,\n            required: true,\n        },\n    },\n    data: () => ({\n        DOMPurify,\n    }),\n    setup(props) {\n        const { viewModel } = useViewModel();\n        const getIconPath = (name) => viewModel.value.cache[`./${name}`] ?? name;\n        const isCategoryNode = (category) => category?.categoryNode !== undefined;\n\n        const notEmptyCategory = (category) => {\n            if (category.nodes.nodeTypes === undefined) {\n                return Object.keys(category.subcategories).length !== 0;\n            }\n            return Object.keys(category.nodes.nodeTypes).length !== 0;\n        };\n\n        const paddingDepth = 30;\n        const minPadding = 10;\n        const padding = (depth, forceZero = false) => {\n            if (forceZero) {\n                return 'padding-left: 0';\n            }\n            return `padding-left: ${minPadding + depth * paddingDepth}px`;\n        };\n\n        const mask = ref(Array(\n            Object.keys(props.nodeTree.subcategories ?? {}).length,\n        ).fill(!props.defaultCollapse));\n        let storedMask = mask.value;\n\n        // If the category tree changes the mask needs to get reinitialized\n        watch(\n            () => props.nodeTree,\n            () => {\n                mask.value = Array(Object.keys(\n                    props.nodeTree.subcategories ?? {},\n                ).length).fill(!props.defaultCollapse);\n            },\n        );\n\n        // If searching then the sidebar is expanded\n        watch(\n            () => props.nodeSearch,\n            (newValue, oldValue) => {\n                if (newValue !== '' && oldValue === '') {\n                    storedMask = mask.value;\n                    mask.value = Array(Object.keys(\n                        props.nodeTree.subcategories ?? {},\n                    ).length).fill(true);\n                } else if (newValue === '' && oldValue !== '') {\n                    mask.value = storedMask;\n                }\n            },\n        );\n\n        const getRotation = (index) => {\n            if (mask.value[index]) {\n                return 'left';\n            }\n            return 'right';\n        };\n\n        const onMouseDown = (index) => {\n            mask.value.splice(index, 1, !mask.value[index]);\n        };\n\n        const sortedEntries = (obj, sortSubcategories = false) =>\n            Object.entries(obj).sort(([a, aNode], [b, bNode]) => {\n                if (sortSubcategories) {\n                    if (notEmptyCategory(aNode) && !notEmptyCategory(bNode)) {\n                        return 1;\n                    }\n                    if (!notEmptyCategory(aNode) && notEmptyCategory(bNode)) {\n                        return -1;\n                    }\n                }\n\n                return a.toLowerCase().localeCompare(b.toLowerCase());\n            });\n\n        const showMenu = inject('menu');\n        const showMenuClick = (menu) => {\n            showMenu.value = (showMenu.value.hitSubstring === menu.hitSubstring) ? false : menu;\n        };\n        const closeMenu = () => {\n            if (showMenu.value) showMenu.value = false;\n        };\n\n        const editorManager = EditorManager.getEditorManagerInstance();\n        const specificationLoaded = computed(() => editorManager.specificationLoaded.value);\n\n        const isTopLevelNode = (name) => TOP_LEVEL_NODES_NAMES.includes(name);\n\n        const nodeEntryClasses = (name) => ({\n            __entry: true,\n            '__node-entry': true,\n            '__top-level-node-entry': isTopLevelNode(name),\n        });\n\n        return {\n            padding,\n            mask,\n            onMouseDown,\n            getRotation,\n            sortedEntries,\n            getIconPath,\n            isCategoryNode,\n            notEmptyCategory,\n            showMenu,\n            showMenuClick,\n            closeMenu,\n            specificationLoaded,\n            nodeEntryClasses,\n            isTopLevelNode,\n        };\n    },\n});\n</script>\n","<!--\nCopyright (c) 2022-2023 Antmicro <www.antmicro.com>\n\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<!--\nInterface that is used to display inputs, outputs and properties of a node.\n\nThe custom implementations introduces wrapper functions that prevent the user\nfrom creating and deleting connections or altering nodes' values if the editor is read-only.\n-->\n\n<template>\n    <transition name=\"slide-fade\">\n        <div ref=\"el\">\n                <a\n                    v-for=\"url in nodeRef.URLs\"\n                    :key=\"url.name\"\n                    :href=\"url.url\"\n                    class=\"__url\"\n                    target=\"_blank\"\n                    draggable=\"false\"\n                    @pointerdown.left.stop\n                >\n                    <div class=\"link_item\">\n                        <img\n                            v-if=\"url.icon !== undefined\"\n                            :src=\"getIconPath(url.icon)\"\n                            draggable=\"false\"\n                        />\n                        <span>{{ url.name }}</span>\n                        <br>\n                    </div>\n                </a>\n        </div>\n    </transition>\n</template>\n\n<script>\nimport { defineComponent, ref } from 'vue';\nimport { useViewModel } from '@baklavajs/renderer-vue';\n\nexport default defineComponent({\n    props: {\n        node: {\n            required: true,\n        },\n    },\n    setup(props) {\n        const el = ref(null);\n        const { viewModel } = useViewModel();\n        const getIconPath = (name) => viewModel.value.cache[`./${name}`] ?? name;\n        const nodeRef = ref(props.node);\n\n        return {\n            el,\n            getIconPath,\n            nodeRef,\n        };\n    },\n});\n</script>\n\n<style lang='scss' scoped>\na {\n    color: white;\n    text-decoration: none;\n    word-wrap: normal;\n    width: 100%;\n\n     > .link_item {\n        border: 1px solid #737373;\n        border-bottom: 0px solid;\n        > img {\n            display: inline-block;\n            vertical-align: middle;\n            margin: 1em 1em 1em 1em;\n            width: auto;\n            height: 100%;\n            max-height: 1.75em;\n        }\n\n        > span {\n            vertical-align: middle;\n            font-size: $fs-small;\n        }\n        &:hover > span {\n            color: $green;\n        }\n    }\n}\n\n</style>\n","import { render } from \"./LinkMenu.vue?vue&type=template&id=28f02260&scoped=true\"\nimport script from \"./LinkMenu.vue?vue&type=script&lang=js\"\nexport * from \"./LinkMenu.vue?vue&type=script&lang=js\"\n\nimport \"./LinkMenu.vue?vue&type=style&index=0&id=28f02260&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/kenning-pipeline-manager/kenning-pipeline-manager/pipeline_manager/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-28f02260\"]])\n\nexport default __exports__","/*\n * Copyright (c) 2022-2024 Antmicro <www.antmicro.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { useViewModel } from '@baklavajs/renderer-vue';\nimport { watch } from 'vue';\nimport fuzzysort from 'fuzzysort';\nimport { DEFAULT_GRAPH_NODE_TYPE } from '../../core/EditorManager';\n/**\n * Creates a tree of categories based on the passed names of categories.\n *\n * @param Set of categories names of the nodes\n * @returns Tree of parsed categories that represents categories and their subcategories structure\n */\nconst parseCategories = (categoriesNames) => {\n    const categoryTree = {};\n    const toParse = {};\n    categoriesNames.forEach((c) => {\n        const [label, ...rest] = c.split('/');\n        if (!Object.keys(toParse).includes(label)) {\n            toParse[label] = [];\n        }\n        if (rest.length > 0) {\n            toParse[label].push(rest.join('/'));\n        }\n    });\n    Object.entries(toParse).forEach(([label, rest]) => {\n        categoryTree[label] = parseCategories(new Set(rest));\n    });\n    return categoryTree;\n};\n/* eslint-disable no-param-reassign */\n/**\n * Sets `hitSubstring` value of all nodes of a given category to default names.\n * @param category Single category entry\n */\nconst setDefaultNames = (category) => {\n    const [name, node] = category;\n    node.hitSubstring = name;\n    if (node.categoryNode !== undefined) {\n        node.categoryNode.hitSubstring = node.categoryNode.title;\n    }\n    if (node.nodes.nodeTypes !== undefined) {\n        Object.entries(node.nodes.nodeTypes).forEach(([, nodeType]) => {\n            nodeType.hitSubstring = nodeType.title;\n        });\n    }\n    Object.entries(node.subcategories).forEach((subTree) => setDefaultNames(subTree));\n};\n/* eslint-disable no-param-reassign */\n/**\n * Sets in place all masks inside nodes and subcategories to true\n * @param category Single category object\n */\nconst setMasksToTrue = (category) => {\n    category.mask = true;\n    if (category.categoryNode !== undefined) {\n        category.categoryNode.mask = true;\n    }\n    if (category.nodes.nodeTypes !== undefined) {\n        Object.values(category.nodes.nodeTypes).forEach((nodeType) => {\n            nodeType.mask = true;\n        });\n    }\n    Object.values(category.subcategories).forEach((subTree) => setMasksToTrue(subTree));\n};\n/**\n * Uses parsed categories structure to create a full tree of nodes based on their categories\n * which can be used to render then in a node palette.\n *\n * @param categoryTree Parsed tree returned by `parseCategories` function. It is used to divide\n * nodes into subcategories.\n * @param nodes list of nodes that has information about their types and icons created\n * in `getNodeTree` function.\n * @param prefix represents category path of a node.\n * @returns Parsed structure where every node has two keys: `nodes`, which represents nodes of\n * a given category and `subcategories` which represent subcategories. Subcategories are\n * also of this type.\n */\nconst categorizeNodes = (categoryTree, nodes, prefix = '') => {\n    const nodeTree = {};\n    Object.entries(categoryTree).forEach(([category, subcategories]) => {\n        var _a;\n        let name = '';\n        if (prefix === '') {\n            name = category;\n        }\n        else {\n            name = `${prefix}/${category}`;\n        }\n        const hitNodes = (_a = nodes.find((n) => n.categoryName === name)) !== null && _a !== void 0 ? _a : {};\n        if (Object.keys(hitNodes).length !== 0) {\n            const categoryNames = [];\n            Object.entries(hitNodes.nodeTypes).forEach(([nameNodeType, nodeType]) => {\n                if (nodeType.isCategory) {\n                    categoryNames.push(nameNodeType);\n                }\n            });\n            const allNames = Object.keys(hitNodes.nodeTypes);\n            const nonCategoryNodes = {\n                categoryName: hitNodes.categoryName,\n                nodeTypes: {},\n            };\n            let categoryNode;\n            allNames.forEach((nodeName) => {\n                if (categoryNames.includes(nodeName)) {\n                    categoryNode = hitNodes.nodeTypes[nodeName];\n                }\n                else {\n                    nonCategoryNodes.nodeTypes[nodeName] = hitNodes.nodeTypes[nodeName];\n                }\n            });\n            nodeTree[category] = {\n                subcategories: categorizeNodes(subcategories, nodes, name),\n                nodes: nonCategoryNodes,\n                categoryNode,\n                hitSubstring: category,\n                mask: true,\n            };\n        }\n        else {\n            nodeTree[category] = {\n                subcategories: categorizeNodes(subcategories, nodes, name),\n                nodes: {},\n                categoryNode: undefined,\n                hitSubstring: category,\n                mask: true,\n            };\n        }\n    });\n    return nodeTree;\n};\n/**\n *\n * Updates masks of all nodes and subcategories based on filter value.\n * The node is shown if filter is a substring of the name.\n * Category is shown if it contains at least one node in the subtree which is\n * shown or if filter is a substring of the category name\n *\n * @param treeNode NodeSubcategories instance.\n * @param filter String which is used for filtering\n * @param forceMask whether the whole substree should be expanded\n * @returns Boolean value whether at least one of the categories in the tree has\n * mask set to true.\n */\nconst updateMasks = (treeNode, filter, forceMask) => Object.entries(treeNode).map(([categoryName, node]) => {\n    var _a;\n    const threshold = -50;\n    let categoryMatches = false;\n    const categoryResult = fuzzysort.single(filter, categoryName);\n    if (categoryResult !== null && categoryResult.score > threshold) {\n        node.hitSubstring = (_a = fuzzysort.highlight(categoryResult, '<span>', '</span>')) !== null && _a !== void 0 ? _a : '';\n        categoryMatches = true;\n    }\n    else {\n        node.hitSubstring = categoryName;\n    }\n    let entryMatches = false;\n    if (node.nodes.nodeTypes !== undefined && Object.keys(node.nodes.nodeTypes).length !== 0) {\n        entryMatches = Object.values(node.nodes.nodeTypes)\n            .map((nt) => {\n            var _a;\n            const entryResult = fuzzysort.single(filter, nt.title);\n            nt.mask = (entryResult !== null && entryResult.score > threshold) ||\n                categoryMatches ||\n                forceMask;\n            if (entryResult !== null) {\n                nt.hitSubstring = (_a = fuzzysort.highlight(entryResult, '<span>', '</span>')) !== null && _a !== void 0 ? _a : '';\n            }\n            else {\n                nt.hitSubstring = nt.title;\n            }\n            return nt.mask;\n        })\n            .includes(true);\n    }\n    // The node is expanded if any entry in its subtree is highlighted,\n    // or a node that is part of this category is highlighted,\n    // or the category is highlighted or forceMask is true.\n    node.mask = updateMasks(node.subcategories, filter, categoryMatches || forceMask) ||\n        categoryMatches ||\n        entryMatches ||\n        forceMask;\n    return node.mask;\n}).includes(true);\n/* eslint-enable no-param-reassign */\nlet unWatch;\nconst TOP_LEVEL_CATEGORY = 'TopLevel';\nexport const TOP_LEVEL_NODES_NAMES = [\n    DEFAULT_GRAPH_NODE_TYPE,\n];\nexport default function getNodeTree(nameFilterRef) {\n    const { viewModel } = useViewModel();\n    const { editor } = viewModel.value;\n    const nodeTypeEntries = Array.from(editor.nodeTypes.entries());\n    const categoryNames = new Set(nodeTypeEntries.map(([, ni]) => ni.category));\n    const topLevelCategories = {\n        categoryName: 'TopLevel',\n        nodeTypes: {},\n    };\n    const nodes = [];\n    categoryNames.forEach((c) => {\n        let nodeTypesInCategory = nodeTypeEntries.filter(([, ni]) => ni.category === c);\n        const nodesURLs = Object.fromEntries(nodeTypesInCategory.map((n) => {\n            const [nodeType] = n; // @ts-ignore Editor has an incorrect type. Ignoring for now\n            const URLs = editor.getNodeURLs(nodeType);\n            return [nodeType, URLs];\n        }));\n        const nodesIconPath = Object.fromEntries(nodeTypesInCategory.map((n) => {\n            const [nodeType] = n; // @ts-ignore Editor has an incorrect type. Ignoring for now\n            const iconPath = editor.getNodeIconPath(nodeType);\n            return [nodeType, iconPath];\n        }));\n        const topLevelNodes = nodeTypesInCategory.filter(([name, _]) => TOP_LEVEL_NODES_NAMES.includes(name));\n        nodeTypesInCategory = nodeTypesInCategory.filter(([name, _]) => !TOP_LEVEL_NODES_NAMES.includes(name));\n        if (nodeTypesInCategory.length > 0) {\n            const nodeTypes = nodeTypesInCategory.map(([nodeName, node]) => [nodeName, Object.assign(Object.assign({}, node), { isCategory: node.isCategory, mask: true, hitSubstring: node.title, iconPath: nodesIconPath[nodeName], URLs: nodesURLs[nodeName] })]);\n            nodes.push({\n                categoryName: c,\n                nodeTypes: Object.fromEntries(nodeTypes),\n            });\n        }\n        topLevelNodes.forEach(([nodeName, node]) => {\n            topLevelCategories.nodeTypes[nodeName] = Object.assign(Object.assign({}, node), { isCategory: node.isCategory, mask: true, hitSubstring: node.title, iconPath: nodesIconPath[nodeName], URLs: nodesURLs[nodeName] });\n        });\n    });\n    const nodeCategories = new Set(nodes.map((c) => c.categoryName));\n    const categoryTree = parseCategories(nodeCategories);\n    const parsedTree = categorizeNodes(categoryTree, nodes);\n    // If specification changes we no longer want to watch it\n    if (unWatch) {\n        unWatch();\n    }\n    const topCategory = {\n        subcategories: parsedTree,\n        nodes: topLevelCategories,\n        categoryNode: undefined,\n        hitSubstring: TOP_LEVEL_CATEGORY,\n        mask: true,\n    };\n    const topSubcategory = {\n        All: topCategory,\n    };\n    unWatch = watch(nameFilterRef, (newNameFilter) => {\n        if (newNameFilter === '') {\n            Object.entries(topSubcategory).forEach((subTree) => setDefaultNames(subTree));\n            Object.values(topSubcategory).forEach((subTree) => setMasksToTrue(subTree));\n        }\n        else {\n            updateMasks(topSubcategory, newNameFilter.toLowerCase(), false);\n        }\n    });\n    return topCategory;\n}\n","import { render } from \"./PaletteCategory.vue?vue&type=template&id=33098b43\"\nimport script from \"./PaletteCategory.vue?vue&type=script&lang=js\"\nexport * from \"./PaletteCategory.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/kenning-pipeline-manager/kenning-pipeline-manager/pipeline_manager/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!--\nCopyright (c) 2022-2023 Antmicro <www.antmicro.com>\n\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<!--\nA single entry representing available node type in the sidebar.\n-->\n<template>\n    <div class=\"__entry __node-entry __dragged\" :style=\"padding\">\n        <img class=\"__title-icon\" v-if=\"nodeIcon !== undefined\" :src=\"nodeIcon\" draggable=\"false\" />\n        <div class=\"__title-label\" v-html=\"titleSanitized\"></div>\n    </div>\n</template>\n\n<script>\nimport { defineComponent, computed } from 'vue';\nimport { useViewModel } from '@baklavajs/renderer-vue';\nimport DOMPurify from 'dompurify';\n\nexport default defineComponent({\n    props: {\n        title: {\n            type: String,\n            required: true,\n        },\n        iconPath: {\n            type: String,\n            required: false,\n        },\n        depth: {\n            type: Number,\n            required: true,\n        },\n    },\n    setup(props) {\n        const { viewModel } = useViewModel();\n        const getIconPath = (name) => viewModel.value.cache[`./${name}`] ?? name;\n        const nodeIcon = computed(() => getIconPath(props.iconPath));\n        const paddingDepth = 20;\n        const minPadding = 10;\n        const padding = computed(\n            () => `padding-left: ${minPadding + props.depth * paddingDepth}px`,\n        );\n\n        return {\n            nodeIcon,\n            padding,\n            getIconPath,\n        };\n    },\n    computed: {\n        titleSanitized() {\n            return DOMPurify.sanitize(this.title);\n        },\n    },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.__dragged {\n    border-radius: var(--baklava-node-border-radius);\n    border-width: 0px;\n}\n</style>\n","import { render } from \"./PaletteEntry.vue?vue&type=template&id=3395bfa5&scoped=true\"\nimport script from \"./PaletteEntry.vue?vue&type=script&lang=js\"\nexport * from \"./PaletteEntry.vue?vue&type=script&lang=js\"\n\nimport \"./PaletteEntry.vue?vue&type=style&index=0&id=3395bfa5&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/kenning-pipeline-manager/kenning-pipeline-manager/pipeline_manager/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3395bfa5\"]])\n\nexport default __exports__","import { render } from \"./NodePalette.vue?vue&type=template&id=177ebc72\"\nimport script from \"./NodePalette.vue?vue&type=script&lang=js\"\nexport * from \"./NodePalette.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/kenning-pipeline-manager/kenning-pipeline-manager/pipeline_manager/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!--\nCopyright (c) 2022-2023 Antmicro <www.antmicro.com>\n\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<template>\n    <div class=\"rectangle-selection-border\" :style=\"styles\">\n        <div class=\"rectangle-selection\">\n\n        </div>\n    </div>\n</template>\n\n<script>\nimport { computed, defineComponent, ref } from 'vue'; // eslint-disable-line object-curly-newline\n\nexport default defineComponent({\n    setup() {\n        const selecting = ref(false);\n        const selectionBegin = ref({ x: 0, y: 0 });\n        const selectionEnd = ref({ x: 0, y: 0 });\n        const boundingRect = computed(() => ({\n            xBegin: selectionBegin?.value.x < selectionEnd?.value.x ?\n                selectionBegin?.value.x : selectionEnd?.value.x,\n\n            yBegin: selectionBegin?.value.y < selectionEnd?.value.y ?\n                selectionBegin?.value.y : selectionEnd?.value.y,\n\n            xEnd: selectionBegin?.value.x >= selectionEnd?.value.x ?\n                selectionBegin?.value.x : selectionEnd?.value.x,\n\n            yEnd: selectionBegin?.value.y >= selectionEnd?.value.y ?\n                selectionBegin?.value.y : selectionEnd?.value.y,\n        }));\n\n        const styles = computed(() => ({\n            position: 'absolute',\n            visibility: `${selecting.value ? 'visible' : 'hidden'}`,\n            top: `${boundingRect.value.yBegin}px`,\n            left: `${boundingRect.value.xBegin}px`,\n            width: `${Math.abs(boundingRect.value.xEnd - boundingRect.value.xBegin) ?? 0}px`,\n            height: `${Math.abs(boundingRect.value.yEnd - boundingRect.value.yBegin) ?? 0}px`,\n        }));\n\n        const onPointerDown = (ev) => {\n            selecting.value = true;\n            selectionBegin.value = { x: ev.pageX, y: ev.pageY };\n            selectionEnd.value = { x: ev.pageX, y: ev.pageY };\n        };\n\n        const onPointerMove = (ev) => {\n            if (selecting.value) {\n                selectionEnd.value = { x: ev.pageX, y: ev.pageY };\n            }\n        };\n\n        const onPointerUp = () => {\n            selecting.value = false;\n\n            selectionBegin.value = { x: 0, y: 0 };\n            selectionEnd.value = { x: 0, y: 0 };\n        };\n\n        return {\n            styles,\n            onPointerDown,\n            onPointerMove,\n            onPointerUp,\n            selecting,\n            boundingRect,\n        };\n    },\n});\n\n</script>\n","import { render } from \"./RectangleSelection.vue?vue&type=template&id=176c206a\"\nimport script from \"./RectangleSelection.vue?vue&type=script&lang=js\"\nexport * from \"./RectangleSelection.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/kenning-pipeline-manager/kenning-pipeline-manager/pipeline_manager/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/*\n * Copyright (c) 2022-2023 Antmicro <www.antmicro.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * Checks if node is present inside selection rectangle\n * @returns\n */\nexport default function nodeInsideSelection(graph, node, boundingRect) {\n    const nodeHTMLelement = document.getElementById(node.id);\n    const selectionBoundingRect = boundingRect;\n\n    const navBarHeight = 60;\n    const panningX = graph.panning.x;\n    const panningY = graph.panning.y;\n    const { scaling } = graph;\n\n    const nodeX = scaling * (panningX + node.position.x);\n    const nodeY = scaling * (panningY + node.position.y + navBarHeight);\n    const nodeWidth = nodeHTMLelement.offsetWidth;\n    const nodeHeight = nodeHTMLelement.offsetHeight;\n\n    // reduce node dimensions by this coeff so that they are easier to select\n    const nodeDimCoefficient = 0.9;\n\n    if (nodeX + nodeX * (1 - nodeDimCoefficient) > selectionBoundingRect.xBegin\n    && nodeX + nodeWidth * scaling - nodeX * (1 - nodeDimCoefficient) < selectionBoundingRect.xEnd\n    && nodeY + nodeY * (1 - nodeDimCoefficient) > selectionBoundingRect.yBegin\n    && nodeY + nodeHeight * scaling\n        - nodeY * (1 - nodeDimCoefficient) < selectionBoundingRect.yEnd) {\n        return true;\n    }\n    return false;\n}\n","/*\n * Copyright (c) 2022-2024 Antmicro <www.antmicro.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { computed } from 'vue';\nimport { useGraph } from '@baklavajs/renderer-vue';\nimport useDragMove from './useDragMove';\n\nexport default function usePanZoom() {\n    const { graph } = useGraph();\n\n    // State needed for pinch-zoom\n    let pointerCache = [];\n    let prevDiff = -1;\n    let midpoint = { x: 0, y: 0 };\n\n    // Limit for zooming that does not allow for zomming if\n    // `zoomLimit` number of graphs would fit into the editor\n    // vertically or horizontally\n    const zoomLimit = 2;\n\n    const panningRef = computed(() => graph.value.panning);\n    const dragMove = useDragMove(panningRef);\n\n    const applyZoom = (centerX, centerY, newScale) => {\n        if (newScale <= 0) {\n            return;\n        }\n\n        const currentPoint = [\n            centerX / graph.value.scaling - graph.value.panning.x,\n            centerY / graph.value.scaling - graph.value.panning.y,\n        ];\n        const newPoint = [\n            centerX / newScale - graph.value.panning.x,\n            centerY / newScale - graph.value.panning.y,\n        ];\n        const diff = [newPoint[0] - currentPoint[0], newPoint[1] - currentPoint[1]];\n\n        const editorHeight = window.innerHeight;\n        const editorWidth = window.innerWidth;\n\n        const allowZoomOut = (zoomLimit * graph.value.size().graphWidth > editorWidth / newScale ||\n            zoomLimit * graph.value.size().graphHeight > editorHeight / newScale);\n\n        if (\n            (allowZoomOut) ||\n            (newScale > graph.value.scaling && graph.value.size().graphHeight !== -Infinity)\n        ) {\n            graph.value.scaling = newScale;\n            graph.value.panning.x += diff[0];\n            graph.value.panning.y += diff[1];\n        }\n    };\n\n    const onMouseWheel = (ev) => {\n        ev.preventDefault();\n        let scrollAmount = ev.deltaY;\n        if (ev.deltaMode === 1) {\n            scrollAmount *= 32; // Firefox fix, multiplier is trial & error\n        }\n        // Limit the zooming to 1.5x of the original size\n        const newScale = Math.min(graph.value.scaling * (1 - scrollAmount / 3000), 1.5);\n        applyZoom(ev.clientX, ev.clientY, newScale);\n    };\n\n    const getCoordsFromCache = () => ({\n        ax: pointerCache[0].clientX,\n        ay: pointerCache[0].clientY,\n        bx: pointerCache[1].clientX,\n        by: pointerCache[1].clientY,\n    });\n\n    const onPointerDown = (ev) => {\n        dragMove.onPointerDown(ev);\n\n        if (pointerCache.length <= 1) {\n            pointerCache.push(ev);\n        }\n\n        if (pointerCache.length === 2) {\n            const { ax, ay, bx, by } = getCoordsFromCache(); // eslint-disable-line object-curly-newline,max-len\n            const dx = ax - bx;\n            const dy = ay - by;\n            prevDiff = Math.sqrt(dx * dx + dy * dy);\n\n            midpoint = {\n                x: ax + (bx - ax) / 2,\n                y: ay + (by - ay) / 2,\n            };\n        }\n    };\n\n    const onPointerMove = (ev) => {\n        if (pointerCache.length === 2) {\n            for (let i = 0; i < pointerCache.length; i += 1) {\n                if (ev.pointerId === pointerCache[i].pointerId) {\n                    pointerCache[i] = ev;\n                    break;\n                }\n            }\n\n            const { ax, ay, bx, by } = getCoordsFromCache(); // eslint-disable-line object-curly-newline,max-len\n            const dx = ax - bx;\n            const dy = ay - by;\n            const curDiff = Math.sqrt(dx * dx + dy * dy);\n\n            if (prevDiff > 0) {\n                const newScale = graph.value.scaling * (1 + (curDiff - prevDiff) / 500);\n                applyZoom(midpoint.x, midpoint.y, newScale);\n            }\n\n            // Cache the distance for the next move event\n            prevDiff = curDiff;\n        } else {\n            dragMove.onPointerMove(ev);\n        }\n    };\n\n    const onPointerUp = (ev) => {\n        dragMove.onPointerUp();\n\n        pointerCache = pointerCache.filter((p) => p.pointerId !== ev.pointerId);\n        prevDiff = -1;\n    };\n\n    return {\n        ...dragMove,\n        onPointerDown,\n        onPointerMove,\n        onPointerUp,\n        onMouseWheel,\n    };\n}\n","import { render } from \"./Editor.vue?vue&type=template&id=223cf85e\"\nimport script from \"./Editor.vue?vue&type=script&lang=js\"\nexport * from \"./Editor.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/kenning-pipeline-manager/kenning-pipeline-manager/pipeline_manager/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 63359;\nmodule.exports = webpackEmptyContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 55825;\nmodule.exports = webpackEmptyContext;","/*\n * Copyright (c) 2022-2024 Antmicro <www.antmicro.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * Implements additional functions for CustomNode\n */\n\nimport { useViewModel, useGraph } from '@baklavajs/renderer-vue';\nimport { GRAPH_NODE_TYPE_PREFIX } from '@baklavajs/core';\n\n/**\n * The function decides whether a name for the option should be displayed.\n *\n * @param optionType Name of the option component\n * @returns True if the name should be displayed, false otherwise.\n */\nexport function getOptionName(optionType) {\n    switch (optionType) {\n        case 'InputInterface':\n        case 'SelectInterface':\n        case 'ListInterface':\n        case 'TextInterface':\n        case 'HexInterface':\n            return true;\n        case 'NumberInterface':\n        case 'IntegerInterface':\n        case 'CheckboxInterface':\n        case 'SliderInterface':\n        case 'NodeInterface':\n        default:\n            return false;\n    }\n}\n\n/**\n * Updates a side and optionally a sidePosition of an interface\n *\n * @param node in which the interface is updated\n * @param intf interface to update\n * @param newSide new side of the interface\n * @param newSidePosition new position of the interface. If it is occupied\n * @param swap if true then if an interface is found in 'newSidePosition' then they\n * are swapped\n * then an old interface is moved.\n */\n/* eslint-disable no-param-reassign */\nexport function updateInterfacePosition(\n    node,\n    intf,\n    newSide,\n    newSidePosition = undefined,\n    swap = false,\n) {\n    const { graph } = useGraph();\n    graph.value.editNode(node);\n\n    const oldSidePosition = intf.sidePosition;\n\n    intf.side = newSide;\n    if (newSidePosition !== undefined) {\n        intf.sidePosition = newSidePosition;\n    }\n\n    const found = [\n        ...Object.values(node.inputs),\n        ...Object.values(node.outputs),\n    ].find(\n        (io) => io.id !== intf.id &&\n            io.sidePosition === intf.sidePosition &&\n            io.side === intf.side,\n    );\n\n    if (found !== undefined) {\n        if (newSidePosition !== undefined && swap) {\n            found.sidePosition = oldSidePosition;\n        } else {\n            const intfToMove = newSidePosition === undefined ? intf : found;\n\n            // Finding the first non occupied side position on that side\n            const sameSide = [\n                ...Object.values(node.inputs),\n                ...Object.values(node.outputs),\n            ].filter((io) => io.side === intfToMove.side && !io.hidden);\n            const occupiedPositions = sameSide.map((io) => io.sidePosition);\n\n            let proposedPosition = 0;\n            while (occupiedPositions.includes(proposedPosition)) {\n                proposedPosition += 1;\n            }\n\n            intfToMove.sidePosition = proposedPosition;\n        }\n    }\n}\n\n/**\n * Wrapper for nodes removal\n *\n * @param node node to remove. Can be either a graph node or a regular node\n * @param unwrapGraph determines whether to unwrap the graph node contents\n * into the current graph. Can be used only when removing a graph node\n */\nexport function removeNode(node, unwrapGraph = false) {\n    if (node.type.startsWith(GRAPH_NODE_TYPE_PREFIX) && unwrapGraph) {\n        const { viewModel } = useViewModel();\n        viewModel.value.editor.unwrapSubgraph(node);\n    } else {\n        const { graph } = useGraph();\n        graph.value.removeNode(node);\n    }\n}\n","/*\n * Copyright (c) 2022-2024 Antmicro <www.antmicro.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n *\n */\n\n/*\n * Custom pipeline editor - Implements logic for adding, removing, editing nodes and\n * connections between them.\n * Inherits from baklavajs/core/src/editor.ts\n */\n\n/* eslint-disable max-classes-per-file */\n\nimport { Editor, GRAPH_NODE_TYPE_PREFIX } from '@baklavajs/core';\n\nimport { useGraph } from '@baklavajs/renderer-vue';\n\nimport { toRaw, nextTick } from 'vue';\nimport createPipelineManagerGraph from './CustomGraph.js';\nimport LayoutManager from '../core/LayoutManager.js';\nimport { suppressHistoryLogging } from '../core/History.ts';\nimport CreateCustomGraphNodeType from './CustomGraphNode.js';\nimport { ir } from '../core/interfaceRegistry.ts';\n\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-underscore-dangle */\nexport default class PipelineManagerEditor extends Editor {\n    preview = false;\n\n    _hideHud = false;\n\n    get hideHud() {\n        return this._hideHud || this.preview;\n    }\n\n    set hideHud(val) {\n        this._hideHud = val;\n    }\n\n    _readonly = false;\n\n    get readonly() {\n        return this._readonly || this.preview;\n    }\n\n    set readonly(val) {\n        this._readonly = val;\n    }\n\n    allowLoopbacks = false;\n\n    nodeIcons = new Map();\n\n    baseURLs = new Map();\n\n    baseIconUrls = new Map();\n\n    nodeURLs = new Map();\n\n    layoutManager = new LayoutManager();\n\n    subgraphStack = [];\n\n    registerGraph(graph) {\n        const customGraph = createPipelineManagerGraph(graph);\n        super.registerGraph(customGraph);\n    }\n\n    save() {\n        // Save all changes done to subgraphs before saving\n        const currentGraphId = this._graph.id;\n        const stackCopy = Array.from(toRaw(this.subgraphStack));\n        stackCopy.forEach(this.backFromSubgraph.bind(this));\n\n        const currentGraphState = this.graph.save();\n\n        currentGraphState.panning = this._graph.panning;\n        currentGraphState.scaling = this._graph.scaling;\n\n        const dataflowState = { graphs: [] };\n\n        // subgraphs are stored in state.subgraphs, there is no need to store it\n        // in nodes itself\n        const recurrentSubgraphSave = (node) => {\n            if (node.subgraph !== undefined) {\n                dataflowState.graphs.push(node.graphState);\n                node.graphState.nodes.forEach(recurrentSubgraphSave);\n            }\n            delete node.graphState;\n        };\n        currentGraphState.nodes.forEach(recurrentSubgraphSave);\n\n        if (dataflowState.graphs.length) {\n            dataflowState.entryGraph = currentGraphId;\n        }\n\n        dataflowState.graphs = [currentGraphState, ...dataflowState.graphs];\n\n        /* eslint-disable no-unused-vars */\n        stackCopy.forEach(([_, subgraphNode]) => {\n            const errors = this.switchToSubgraph(subgraphNode);\n            if (Array.isArray(errors) && errors.length) {\n                throw new Error(errors);\n            }\n        });\n        /* eslint-enable no-unused-vars */\n        return dataflowState;\n    }\n\n    /**\n     * Cleans all graphs in the editor.\n     * @param Determines whether the cleaning process should be stored in history\n     */\n    deepCleanEditor(suppressHistory = true) {\n        this.subgraphStack.forEach(this.backFromSubgraph.bind(this));\n        this.cleanEditor(suppressHistory);\n        this.graphName = undefined;\n    }\n\n    /**\n     * Cleans up the current graph current graph editor.\n     * @param Determines whether the cleaning process should be stored in history\n     */\n    cleanEditor(suppressHistory = true) {\n        const graphInstance = this._graph;\n\n        suppressHistoryLogging(suppressHistory);\n        for (let i = graphInstance.connections.length - 1; i >= 0; i -= 1) {\n            graphInstance.removeConnection(graphInstance.connections[i]);\n        }\n        for (let i = graphInstance.nodes.length - 1; i >= 0; i -= 1) {\n            graphInstance.removeNode(graphInstance.nodes[i]);\n        }\n        suppressHistoryLogging(false);\n    }\n\n    unregisterGraphs() {\n        [...this.graphs]\n            .filter((graph) => graph.id !== this._graph.id)\n            .forEach((graph) => this.unregisterGraph(graph));\n        this.subgraphStack = [];\n    }\n\n    unregisterNodes() {\n        this.nodeTypes.forEach((_, nodeKey) => {\n            this.unregisterNodeType(nodeKey);\n        });\n    }\n\n    registerNodeType(type, options) {\n        if (this.events.beforeRegisterNodeType.emit({ type, options }).prevented) {\n            return;\n        }\n        const nodeInstance = new type(); // eslint-disable-line new-cap\n        this._nodeTypes.set(nodeInstance.type, {\n            type,\n            category: options?.category ?? 'default',\n            title: options?.title ?? nodeInstance.title,\n            isCategory: options?.isCategory ?? false,\n        });\n        this.events.registerNodeType.emit({ type, options });\n    }\n\n    /**\n     * Loads the dataflow into the editor.\n     *\n     * @param state dataflow to load\n     * @param preventCentering determines whether to center the graph after loading\n     * @param loadOnly determines whether to load the graph only without adjusting\n     * the graph rendering. Can be used when validating graphs without their browser\n     * representation.\n     * @returns list of errors that occurred during loading\n     */\n    async load(state, preventCentering = false, loadOnly = false) {\n        // All subgraphs should be unregistered to avoid conflicts later when trying to\n        // load into subgraph (in that case there may be two subgraphs with the same ID, one\n        // of them from the previous session).\n        this.unregisterGraphs();\n        ir.clearRegistry();\n\n        // There can be only one subgraph node matching to a particular subgraphs\n        const usedInstances = new Set();\n\n        const recurrentSubgraphLoad = (node) => {\n            const errors = [];\n            if (node.subgraph !== undefined) {\n                const fittingTemplate = state.graphs.filter(\n                    (template) => template.id === node.subgraph,\n                );\n                if (fittingTemplate.length !== 1) {\n                    return [`Expected exactly one template with ID ${node.name}, got ${fittingTemplate.length}`];\n                }\n                if (usedInstances.has(node.subgraph)) {\n                    return [`Subgraph ${node.subgraph} has multiple nodes pointing to it - only unique IDs are allowed`];\n                }\n                usedInstances.add(node.subgraph);\n                node.graphState = structuredClone(fittingTemplate[0]);\n\n                node.graphState.nodes.forEach((n) => {\n                    errors.push(...recurrentSubgraphLoad(n));\n                });\n            }\n            return errors;\n        };\n\n        // Load the node state as it is, wait until vue renders new nodes so that\n        // node dimensions can be retrieved from DOM elements and then update the\n        // location based on autolayout results. The editor is set to readonly\n        // during loading to prevent any changes that may happen between graph load\n        // and layout computation\n        const readonlySetting = this.readonly;\n        this.readonly = true;\n        let errors = [];\n\n        if (!state.graphs.length) {\n            return ['No graphs found'];\n        }\n\n        let entryGraph;\n        if (state.entryGraph) {\n            entryGraph = state.graphs.find(\n                (graph) => graph.id === state.entryGraph,\n            );\n\n            if (!entryGraph) {\n                return [`No entry graph found of id '${state.entryGraph}'`];\n            }\n        } else {\n            entryGraph = state.graphs[0]; // eslint-disable-line prefer-destructuring\n        }\n        const { panning, scaling } = entryGraph;\n\n        const usedGraphs = new Set();\n\n        state.graphs.forEach((graph) => {\n            graph.nodes.forEach((n) => {\n                if (n.subgraph !== undefined) {\n                    usedGraphs.add(n.subgraph);\n                }\n            });\n        });\n        // Finding a root graph by checking which graph is not referenced by any other\n        const rootGraph = state.graphs.find((graph) =>\n            !usedGraphs.has(graph.id),\n        );\n        if (rootGraph === undefined) {\n            return ['No root graph found. Make sure you graph does not have any reccurency'];\n        }\n\n        try {\n            rootGraph.nodes.forEach((n) => {\n                errors.push(...recurrentSubgraphLoad(n));\n            });\n\n            if (errors.length) {\n                return errors;\n            }\n\n            state = this.hooks.load.execute(state);\n            errors = this._graph.load(rootGraph);\n        } catch (err) {\n            // If anything goes wrong during dataflow loading, the editor is cleaned and an\n            // appropriate error is returned.\n            this.cleanEditor();\n            this.readonly = readonlySetting;\n            return [err.toString()];\n        }\n        if (Array.isArray(errors) && errors.length && process.env.VUE_APP_GRAPH_DEVELOPMENT_MODE !== 'true') {\n            this.cleanEditor();\n            this.readonly = readonlySetting;\n            return errors;\n        }\n        this.events.loaded.emit();\n        this.graphName = entryGraph.name;\n        this.readonly = readonlySetting;\n\n        // If the editor is run outside of a browser, then\n        // all functionality that is after this line will fail,\n        // as it changes the way the graph is rendered in the browser\n        if (typeof window === 'undefined' || loadOnly) return errors;\n\n        const dfs = (subgraph, path) => {\n            if (subgraph?.nodes !== undefined) {\n                for (let i = 0; i < subgraph.nodes.length; i += 1) {\n                    if (subgraph.nodes[i].subgraph !== undefined) {\n                        if (subgraph.nodes[i].subgraph.id === entryGraph.id) {\n                            return [...path, subgraph.nodes[i]];\n                        }\n                        const returnedPath = dfs(\n                            subgraph.nodes[i].subgraph,\n                            [...path, subgraph.nodes[i]],\n                        );\n                        if (returnedPath.length) {\n                            return returnedPath;\n                        }\n                    }\n                }\n            }\n            return [];\n        };\n\n        // Finding a path to the defined entry and switching to it sequentially\n        const path = dfs(this._graph, []);\n\n        path.forEach((node) => {\n            this.switchToSubgraph(node);\n        });\n\n        if (this.layoutManager.layoutEngine.activeAlgorithm !== 'NoLayout') {\n            await nextTick();\n            await this.applyAutolayout(false);\n        }\n\n        // We need graph switched and sidebar rendered for autozoom\n        await nextTick();\n        if (panning !== undefined) {\n            this._graph.panning = panning;\n        }\n        if (scaling !== undefined) {\n            this._graph.scaling = scaling;\n        }\n        if (!preventCentering && scaling === undefined && panning === undefined) {\n            this.centerZoom();\n        }\n        return errors;\n    }\n\n    privatizeInterface(graphId, intf) {\n        if (intf.externalName === undefined) return;\n\n        let graph = [...this.graphs].find((g) => g.id === graphId);\n        let graphNode = graph.graphNode; // eslint-disable-line prefer-destructuring\n\n        intf.externalName = undefined;\n        if (graphNode === undefined) return;\n\n        const { graphIds, sharedInterface } = ir.getRegisteredInterface(intf.id);\n        const graphIdIdx = graphIds.findIndex((id) => id === graphNode.graph.id);\n        graphIds.splice(graphIdIdx, graphIds.length - graphIdIdx);\n\n        graphNode.updateExposedInterfaces();\n\n        // Update all graphs that used this exposed interface\n        for (let i = graphIdIdx + 1; i < graphIds.length; i += 1) {\n            graph = [...this.graphs].find((g) => g.id === graphIds[graphIdIdx]);\n            graphNode = graph.graphNode; // eslint-disable-line prefer-destructuring\n            graphNode.updateExposedInterfaces();\n        }\n\n        // If sharedInterface is the same as the interface that is privatized, it means\n        // that the interface is not shared anymore and its entry should be deleted.\n        if (sharedInterface === intf) {\n            ir.deleteRegisteredInterface(intf.id);\n        }\n    }\n\n    /**\n     * Exposes passed interface under the `name` name. The node that has the interface has to\n     * be in the graph with the `graphId` ID.\n     *\n     * @param {string} graphId graph which has the node with the interface\n     * @param {Object} intf interface to expose\n     * @param {string} name name under which the interface will be exposed. If set to `undefined`,\n     * external name will be inferred from the name of the interface.\n     */\n    exposeInterface(graphId, intf, name = undefined) {\n        const graph = [...this.graphs].find((g) => g.id === graphId);\n        const graphNode = graph.graphNode; // eslint-disable-line prefer-destructuring\n        intf.externalName = name ?? graph.resolveNewExposedName(intf.name);\n        if (graphNode === undefined) return;\n        // After changing the external name, the interface has to be updated in the\n        // graph node to reflect the changes in the graph.\n        graphNode.updateExposedInterfaces();\n    }\n\n    /**\n     * Calculates the width, height of the editor and the width of the sidebar.\n     * It is assumed that the view is rendered in the browser,\n     * otherwise an error will be thrown.\n     *\n     * @returns {Object} object with calculated sizes\n     */\n    static editorSize() {\n        if (typeof document === 'undefined') {\n            throw new Error('The editor is in browserless mode. Cannot obtain editor size.');\n        }\n\n        const terminalHeight =\n            document.getElementsByClassName('terminal-wrapper')[0]?.offsetHeight ?? 0;\n        const navbarHeight = document.getElementsByClassName('wrapper')[0]?.offsetHeight ?? 0;\n        const nodePalette = document.getElementsByClassName('baklava-node-palette');\n        let sideBarWidth = 0;\n        if (nodePalette.length !== 0) {\n            const paletteRect = nodePalette[0].getBoundingClientRect();\n            sideBarWidth = Math.max(paletteRect.right, 0);\n        }\n\n        const editorHeight = window.innerHeight - terminalHeight - navbarHeight;\n        const editorWidth = window.innerWidth - sideBarWidth;\n\n        return {\n            editorWidth,\n            editorHeight,\n            sideBarWidth,\n        };\n    }\n\n    /**\n     * Centers the currently displayed graph in the editor.\n     * The function calculates the scaling and panning values to center the graph\n     * in the editor and sets them in the graph.\n     * The function assumes that the editor is rendered in the browser,\n     * otherwise an error will be thrown.\n     */\n    centerZoom() {\n        if (!Array.isArray(this._graph.nodes) || this._graph.nodes.length === 0) return;\n        if (typeof document === 'undefined') {\n            throw new Error('The editor is in browserless mode. Cannot obtain editor size.');\n        }\n\n        const {\n            editorWidth,\n            editorHeight,\n            sideBarWidth,\n        } = PipelineManagerEditor.editorSize();\n\n        const {\n            graphHeight,\n            graphWidth,\n            leftmostX,\n            topmostY,\n        } = this._graph.size();\n\n        const margin = 100;\n\n        const scalingY = editorHeight / (graphHeight + 2 * margin);\n        const scalingX = editorWidth / (graphWidth + 2 * margin);\n\n        if (scalingX > scalingY) {\n            const graphCenter = (graphWidth + 2 * margin) / 2;\n            const editorCenter = (editorWidth / 2) * (1 / scalingY);\n\n            const translationX = editorCenter - graphCenter;\n\n            this._graph.panning = {\n                x: -(leftmostX - margin - translationX - sideBarWidth / scalingY),\n                y: -(topmostY - margin),\n            };\n            this._graph.scaling = scalingY;\n        } else {\n            const graphCenter = (graphHeight + 2 * margin) / 2;\n            const editorCenter = (editorHeight / 2) * (1 / scalingX);\n\n            const translationY = editorCenter - graphCenter;\n\n            this._graph.panning = {\n                x: -(leftmostX - margin - sideBarWidth / scalingX),\n                y: -(topmostY - margin - translationY),\n            };\n            this._graph.scaling = scalingX;\n        }\n    }\n\n    nodeURLsEmpty() {\n        return this.nodeURLs.size === 0;\n    }\n\n    getNodeURLs(nodeName) {\n        const urls = this.nodeURLs.get(nodeName) || {};\n\n        const fullUrls = [];\n        Object.entries(urls).forEach(([urlName, url]) => {\n            const t = { ...this.baseURLs.get(urlName) };\n            t.url += url;\n            fullUrls.push(t);\n        });\n\n        return fullUrls;\n    }\n\n    getNodeIconPath(nodeName) {\n        return this.nodeIcons.get(nodeName) || undefined;\n    }\n\n    addGraphTemplate(template, category, type, isCategory = false) {\n        if (this.events.beforeAddGraphTemplate.emit(template).prevented) {\n            return;\n        }\n        if (this.nodeTypes.has(`${GRAPH_NODE_TYPE_PREFIX}${template.id}`)) {\n            return;\n        }\n        this._graphTemplates.push(template);\n        this.graphTemplateEvents.addTarget(template.events);\n        this.graphTemplateHooks.addTarget(template.hooks);\n\n        const customGraphNodeType = CreateCustomGraphNodeType(template, type);\n        this.registerNodeType(customGraphNodeType, {\n            category,\n            title: template.name,\n            isCategory,\n        });\n\n        this.events.addGraphTemplate.emit(template);\n    }\n\n    switchGraph(subgraphNode) {\n        if (this._switchGraph === undefined) {\n            const { switchGraph } = useGraph();\n            this._switchGraph = switchGraph;\n        }\n        // disable history logging for the switch - don't push nodes being created here\n        suppressHistoryLogging(true);\n\n        this._graph = subgraphNode.subgraph;\n        this._switchGraph(subgraphNode.subgraph);\n        this.graphName = this._graph.name;\n\n        suppressHistoryLogging(false);\n        nextTick().then(() => {\n            const graph = this.graph.save();\n            this.layoutManager.registerGraph(graph);\n            this.layoutManager.computeLayout(graph).then(this.updateNodesPosition.bind(this));\n        });\n    }\n\n    switchToSubgraph(subgraphNode) {\n        // Obtaining the current graph from the graph node and pushing it to the stack\n        this.subgraphStack.push(subgraphNode.graph);\n        this.switchGraph(subgraphNode);\n    }\n\n    /**\n     * Switches back from a displayed graph.\n     * The function changes the currently displayed graph and propagates changes in interfaces\n     * back to the graph node.\n     *\n     * It also updates the graph node's interfaces to match the ones in the graph.\n     * It checks for existing interface nodes, checks which were added, removed and changed\n     * and updates the graph node's interfaces accordingly.\n     */\n    backFromSubgraph() {\n        const newGraph = this.subgraphStack.pop(); // eslint-disable-line no-unused-vars\n\n        suppressHistoryLogging(true);\n\n        this._graph = newGraph;\n        this._switchGraph(this._graph);\n        this.graphName = this._graph.name;\n\n        suppressHistoryLogging(false);\n    }\n\n    findInterface(intfId) {\n        for (let i = 0; i < this.graph.nodes.length; i += 1) {\n            const foundIntf = Object.values(this.graph.nodes[i].inputs).concat(\n                Object.values(this.graph.nodes[i].outputs),\n            ).find(\n                (intf) => intf.id === intfId,\n            );\n            if (foundIntf) return foundIntf;\n        }\n        return null;\n    }\n\n    unwrapSubgraph(node) {\n        const subgraphNodes = Object.values(node.subgraph._nodes);\n        // Calculate center point of subgraph nodes\n        const meanX = subgraphNodes.map((n) => n.position.x).reduce(\n            (sum, value) => sum + value, 0,\n        ) / subgraphNodes.length;\n        const meanY = subgraphNodes.map((n) => n.position.y).reduce(\n            (sum, value) => sum + value, 0,\n        ) / subgraphNodes.length;\n        // Remove selections\n        this.graph.selectedNodes = [];\n        // Create, reposition and select subgraph nodes\n        subgraphNodes.forEach((subgraphNode) => {\n            const state = subgraphNode.save();\n            const addedNode = this.graph.addNode(subgraphNode);\n            if (addedNode) {\n                // Set position relative to removed node\n                addedNode.position.x += node.position.x - meanX;\n                addedNode.position.y += node.position.y - meanY;\n                this.graph.selectedNodes.push(addedNode);\n                // Reset connections count\n                Object.values(addedNode.inputs).concat(\n                    Object.values(addedNode.outputs),\n                ).forEach(\n                    (intf) => { intf.connectionCount = 0; },\n                );\n                addedNode.load(state);\n            }\n        });\n\n        const subgraphNodeConnections = this.graph.connections.filter(\n            (c) => c.from.nodeId === node.id || c.to.nodeId === node.id,\n        );\n        this.graph.removeNode(node);\n        Object.values(node.subgraph.connections).concat(\n            subgraphNodeConnections,\n        ).forEach((connection) => {\n            if (connection.from.name === 'Connection' || connection.to.name === 'Connection') { return; }\n\n            // Finding interfaces in newly added nodes that correspond to the ones in the connection\n            const fromInterface = this.findInterface(connection.from.id);\n            const toInterface = this.findInterface(connection.to.id);\n\n            if (fromInterface && toInterface) {\n                const createdConnection = this.graph.addConnection(fromInterface, toInterface);\n                (connection.anchors ?? []).forEach((anchor, index) => {\n                    let newAnchor;\n                    // Only anchors from within the graph node should be shifted\n                    if (node.subgraph.connections.includes(connection)) {\n                        newAnchor = {\n                            x: anchor.x + node.position.x - meanX,\n                            y: anchor.y + node.position.y - meanY,\n                        };\n                    } else {\n                        newAnchor = {\n                            x: anchor.x,\n                            y: anchor.y,\n                        };\n                    }\n\n                    this.graph.addAnchor(newAnchor, createdConnection, index);\n                });\n            }\n        });\n    }\n\n    isInSubgraph() {\n        return this.subgraphStack.length > 0;\n    }\n\n    async applyAutolayout(resetLocations = true) {\n        const state = this.graph.save();\n        if (resetLocations) {\n            state.nodes.forEach((node) => {\n                node.position = undefined;\n            });\n        }\n        this.layoutManager.registerGraph(state);\n        const updatedGraph = await this.layoutManager.computeLayout(state);\n        this.updateNodesPosition(updatedGraph);\n    }\n\n    updateNodesPosition(updatedGraph) {\n        updatedGraph.nodes.forEach((updatedState) => {\n            const node = this.graph.nodes.filter(\n                (nodeInstance) => updatedState.id === nodeInstance.id,\n            )[0];\n            node.position = updatedState.position;\n        });\n    }\n\n    updateCurrentSubgraphName(name) {\n        this._graph.name = name;\n    }\n}\n","/*\n * Copyright (c) 2022-2024 Antmicro <www.antmicro.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * Implements custom version of baklava's Graph object\n */\n\nimport {\n    GraphTemplate, DummyConnection, Connection, GRAPH_NODE_TYPE_PREFIX,\n} from '@baklavajs/core';\nimport { v4 as uuidv4 } from 'uuid';\nimport { BaklavaEvent } from '@baklavajs/events';\nimport { startTransaction, commitTransaction } from '../core/History.ts';\nimport { updateInterfacePosition } from './CustomNode.js';\n\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-underscore-dangle */\nexport default function createPipelineManagerGraph(graph) {\n    // Add an event for adding an anchor to the graph\n    graph.events.addAnchor = new BaklavaEvent();\n    graph.events.removeAnchor = new BaklavaEvent();\n\n    // Add an event for editing node\n    graph.events.editNode = new BaklavaEvent();\n\n    // Graph node that represents the graph itself. Root graph does not have a node graph assigned.\n    graph.graphNode = undefined;\n\n    graph.checkConnection = function checkConnection(from, to) {\n        if (!from || !to) {\n            return { connectionAllowed: false, error: 'Invalid from and to references.' };\n        }\n\n        const fromNode = this.findNodeById(from.nodeId);\n        const toNode = this.findNodeById(to.nodeId);\n\n        if (fromNode && toNode && fromNode === toNode && !this.editor.allowLoopbacks) {\n            return { connectionAllowed: false, error: 'Loopbacks are not allowed.' };\n        }\n\n        // reverse connection so that 'from' is input and 'to' is output\n        if (\n            (from.direction === 'input' && to.direction === 'output') ||\n            (from.direction === 'input' && to.direction === 'inout') ||\n            (from.direction === 'inout' && to.direction === 'output')\n        ) {\n            const tmp = from;\n            from = to;\n            to = tmp;\n        }\n\n        if (from.isInput && from.direction !== 'inout') {\n            return {\n                connectionAllowed: false,\n                error: 'Connections are only allowed from output or inout interfaces.',\n            };\n        }\n\n        if (!to.isInput) {\n            return {\n                connectionAllowed: false,\n                error: 'Connections are only allowed to input or inout interfaces.',\n            };\n        }\n\n        if (this.connections.some((c) => c.from === from && c.to === to)) {\n            return { connectionAllowed: false, error: 'Duplicate connections are not allowed.' };\n        }\n\n        if (from.maxConnectionsCount > 0 && from.connectionCount + 1 > from.maxConnectionsCount) {\n            return {\n                connectionAllowed: false,\n                error: `Too many connections from an input interface '${from.id}', maximum of '${from.maxConnectionsCount}' are allowed.`,\n            };\n        }\n\n        if (\n            (to.maxConnectionsCount === 0 || to.maxConnectionsCount === undefined) &&\n            to.connectionCount > 0\n        ) {\n            return {\n                connectionAllowed: false,\n                error: `By default only one connection to an input interface '${to.id}' allowed.`,\n            };\n        }\n\n        if (to.maxConnectionsCount > 0 && to.connectionCount + 1 > to.maxConnectionsCount) {\n            return {\n                connectionAllowed: false,\n                error: `Too many connections to an output interface '${to.id}', maximum of '${to.maxConnectionsCount}' are allowed.`,\n            };\n        }\n\n        if (from.type && to.type) {\n            const fromTypes =\n                typeof from.type === 'string' || from.type instanceof String\n                    ? [from.type]\n                    : from.type;\n            const toTypes =\n                typeof to.type === 'string' || to.type instanceof String ? [to.type] : to.type;\n\n            const commonType = fromTypes.find((t) => toTypes.includes(t));\n\n            if (commonType === undefined) {\n                return {\n                    connectionAllowed: false,\n                    error: `No common types between interfaces. Interface '${from.id}' supports types '${fromTypes}' and interface '${to.id}' supports types '${toTypes}'.`,\n                };\n            }\n        }\n\n        if (this.events.checkConnection.emit({ from, to }).prevented) {\n            return {\n                connectionAllowed: false,\n                error: `Connection between an input interface '${from.id}' and an output interface '${to.id}' was prevented`,\n            };\n        }\n\n        const hookResults = this.hooks.checkConnection.execute({ from, to });\n        if (hookResults.some((hr) => !hr.connectionAllowed)) {\n            return {\n                connectionAllowed: false,\n                errors: `Connection between an input interface '${from.id}' and an output interface '${to.id}' was prevented`,\n            };\n        }\n\n        // List of connections that are removed once the dummyConnection is created\n        const connectionsInDanger = [];\n        return {\n            connectionAllowed: true,\n            dummyConnection: new DummyConnection(from, to),\n            connectionsInDanger,\n        };\n    };\n\n    /**\n     * Adds an anchor to the connection and creates an event that\n     * the anchor was added, which is used by history system.\n     *\n     * @param anchor anchor to be added\n     * @param connection connection to which the anchor is added\n     * @param position position of the anchor in the connection\n     */\n    graph.addAnchor = function addAnchor(anchor, connection, position) {\n        const anchorToAdd = {\n            x: anchor.x,\n            y: anchor.y,\n            id: uuidv4(),\n        };\n        if (connection.anchors === undefined) connection.anchors = [];\n\n        connection.anchors.splice(position, 0, anchorToAdd);\n        graph.events.addAnchor.emit([connection, (position * 3 + 1)]);\n    };\n\n    // Replaces given instance of a node with a node of type `newNodeName`\n    // All properties that are common preserve their values\n    // All connections that were connected to the interfaces that are common\n    // for those two nodes are preserved as well.\n    graph.replaceNode = function replaceNode(oldNode, newNodeName) {\n        const oldPosition = oldNode.position;\n        const newNode = this.editor.nodeTypes.get(newNodeName);\n        const newNodeInstance = new newNode.type(); // eslint-disable-line new-cap\n\n        // Restoring a custom title of the node\n        if (oldNode.title !== oldNode.type) {\n            newNodeInstance.title = oldNode.title;\n        }\n\n        // Restoring properties and interfaces\n        Object.entries({ ...oldNode.inputs, ...oldNode.outputs }).forEach(([name, intf]) => {\n            if (intf.direction !== undefined) {\n                if (Object.prototype.hasOwnProperty.call(newNodeInstance.inputs, name)) {\n                    updateInterfacePosition(\n                        newNodeInstance,\n                        newNodeInstance.inputs[name],\n                        intf.side,\n                        intf.sidePosition,\n                    );\n                }\n                if (Object.prototype.hasOwnProperty.call(newNodeInstance.outputs, name)) {\n                    updateInterfacePosition(\n                        newNodeInstance,\n                        newNodeInstance.outputs[name],\n                        intf.side,\n                        intf.sidePosition,\n                    );\n                }\n                // If the new node has the same property of the same type as it could be overridden\n            } else if (\n                Object.prototype.hasOwnProperty.call(newNodeInstance.inputs, name) &&\n                newNodeInstance.inputs[name].componentName === intf.componentName\n            ) {\n                newNodeInstance.inputs[name].value = intf.value;\n            }\n        });\n\n        // Restoring connections\n        const interfaces = [...Object.values(oldNode.inputs), ...Object.values(oldNode.outputs)];\n        const connections = this.connections.filter(\n            (c) => interfaces.includes(c.from) || interfaces.includes(c.to),\n        );\n\n        const connectionsToRestore = [];\n\n        Object.entries({ ...oldNode.inputs, ...oldNode.outputs }).forEach(([name, intf]) => {\n            if (intf.direction === undefined) return;\n\n            // Rewiring connections to new interfaces\n            connections.forEach((conn) => {\n                if (Object.prototype.hasOwnProperty.call(newNodeInstance.inputs, name)) {\n                    if (conn.from === intf) {\n                        const newConn = new Connection(newNodeInstance.inputs[name], conn.to);\n                        newConn.anchors = conn.anchors;\n                        connectionsToRestore.push(newConn);\n                    } else if (conn.to === intf) {\n                        const newConn = new Connection(conn.from, newNodeInstance.inputs[name]);\n                        newConn.anchors = conn.anchors;\n                        connectionsToRestore.push(newConn);\n                    }\n                }\n\n                if (Object.prototype.hasOwnProperty.call(newNodeInstance.outputs, name)) {\n                    if (conn.from === intf) {\n                        const newConn = new Connection(newNodeInstance.outputs[name], conn.to);\n                        newConn.anchors = conn.anchors;\n                        connectionsToRestore.push(newConn);\n                    } else if (conn.to === intf) {\n                        const newConn = new Connection(conn.from, newNodeInstance.outputs[name]);\n                        newConn.anchors = conn.anchors;\n                        connectionsToRestore.push(newConn);\n                    }\n                }\n            });\n        });\n\n        newNodeInstance.position = oldPosition;\n\n        startTransaction();\n\n        this.removeNode(oldNode);\n        this.addNode(newNodeInstance);\n        connectionsToRestore.forEach((conn) => this.internalAddConnection(conn));\n\n        commitTransaction();\n\n        return newNodeInstance;\n    };\n\n    graph.addNode = function addNode(node) {\n        if (this.events.beforeAddNode.emit(node).prevented) {\n            return;\n        }\n        this.nodeEvents.addTarget(node.events);\n        this.nodeHooks.addTarget(node.hooks);\n        node.registerGraph(this);\n\n        if (node.template !== undefined) {\n            const newState = JSON.parse(JSON.stringify(node.template.save()));\n            newState.id ??= uuidv4();\n            node.template = new GraphTemplate(newState, this.editor);\n        }\n\n        this._nodes.push(node);\n        // when adding the node to the array, it will be made reactive by Vue.\n        // However, our current reference is the non-reactive version.\n        // Therefore, we need to get the reactive version from the array.\n        node = this.nodes.find((n) => n.id === node.id);\n        node.onPlaced();\n        this.events.addNode.emit(node);\n        return node; // eslint-disable-line consistent-return\n    };\n\n    graph.destroy = function destroy() {\n        // Remove possibility of removing graphs - this ignores changes made by\n        // default switchGraph (unregistering from editor and removing nodes) and\n        // allows to later reuse this instance\n\n        // TODO: This causes memory leaks, as when reloading a graph, all non-destroyed\n        // graphs linger are are completely unnaccessible\n    };\n\n    graph.load = function load(state) {\n        const errors = [];\n\n        // Clear current state\n        for (let i = this.connections.length - 1; i >= 0; i -= 1) {\n            this.removeConnection(this.connections[i]);\n        }\n        for (let i = this.nodes.length - 1; i >= 0; i -= 1) {\n            this.removeNode(this.nodes[i]);\n        }\n\n        // Load state\n        this.id = state.id ?? uuidv4();\n        this.name = state.name ?? undefined;\n\n        state.nodes.forEach((n) => {\n            const isSubgraphNode = n.subgraph !== undefined;\n            if (isSubgraphNode) {\n                n.name = `${GRAPH_NODE_TYPE_PREFIX}${n.name}`;\n            }\n\n            const nodeInformation = this.editor.nodeTypes.get(n.name);\n            if (!nodeInformation) {\n                errors.push(`Node type ${n.name} is not registered`);\n            } else {\n                const node = new nodeInformation.type(); // eslint-disable-line new-cap\n                const nodeId = node.id;\n                this.addNode(node);\n                const nodeErrors = node.load(n);\n                if (Array.isArray(nodeErrors) && nodeErrors.length) {\n                    errors.push(...nodeErrors);\n                }\n\n                // The node state may not have an id, so we it has to be assigned manually\n                // if needed\n                node.id ??= nodeId;\n            }\n        });\n\n        // Assigning ids to connections that do not have them\n        state.connections.forEach((c) => {\n            c.id ??= uuidv4();\n        });\n\n        state.connections.forEach((c) => {\n            const fromIf = this.findNodeInterface(c.from);\n            const toIf = this.findNodeInterface(c.to);\n            if (!fromIf) {\n                errors.push(\n                    `Connection of id '${c.id}' invalid. Could not find interface with id '${c.from}'`,\n                );\n            } else if (!fromIf.port) {\n                errors.push(\n                    `Connection of id '${c.id}' invalid. Source of the connection is not an Interface`,\n                );\n            } else if (!toIf) {\n                errors.push(\n                    `Connection of id '${c.id}' invalid. Could not find interface with id '${c.to}'`,\n                );\n            } else if (!toIf.port) {\n                errors.push(\n                    `Connection of id '${c.id}' invalid. Destination of the connection is not an Interface`,\n                );\n            } else if (\n                state.connections.some(\n                    (conn) => conn.id === c.id && (conn.from !== c.from || conn.to !== c.to),\n                )\n            ) {\n                errors.push(`Connection of id '${c.id}' invalid. ID is already taken.`);\n            } else {\n                // Manually adding connections instead of using `addConnection` from baklavajs\n                // as we want to get a feedback message from `checkConnection` function\n                // which is suppressed in baklavajs functionality\n                const checkConnectionResult = this.checkConnection(fromIf, toIf);\n                if (!checkConnectionResult.connectionAllowed) {\n                    errors.push(\n                        `Could not create connection of id '${c.id}'. ${checkConnectionResult.error}`,\n                    );\n                } else {\n                    checkConnectionResult.connectionsInDanger.forEach((connectionToRemove) => {\n                        const instance = this.connections.find(\n                            (conn) => conn.id === connectionToRemove.id,\n                        );\n                        if (instance) {\n                            this.removeConnection(instance);\n                        }\n                    });\n\n                    const conn = new Connection(\n                        checkConnectionResult.dummyConnection.from,\n                        checkConnectionResult.dummyConnection.to,\n                    );\n\n                    c.anchors?.forEach((anchor, index) => {\n                        graph.addAnchor(anchor, conn, index);\n                    });\n                    this.internalAddConnection(conn);\n                }\n            }\n        });\n\n        this.hooks.load.execute(state);\n        return errors;\n    };\n\n    graph.size = function size() {\n        const sizes = this.nodes.map((node) => {\n            const HTMLelement = document.getElementById(node.id);\n            return {\n                width: HTMLelement.offsetWidth,\n                height: HTMLelement.offsetHeight,\n                position: node.position,\n            };\n        });\n        const margin = 100;\n\n        const rightmostX = Math.max(...sizes.map((node) => node.position.x + node.width)) + margin;\n        const leftmostX = Math.min(...sizes.map((node) => node.position.x)) - margin;\n\n        const bottommostY =\n            Math.max(...sizes.map((node) => node.position.y + node.height)) + margin;\n        const topmostY = Math.min(...sizes.map((node) => node.position.y)) - margin;\n\n        const graphWidth = rightmostX - leftmostX;\n        const graphHeight = bottommostY - topmostY;\n\n        return {\n            graphHeight,\n            graphWidth,\n            rightmostX,\n            leftmostX,\n            bottommostY,\n            topmostY,\n        };\n    };\n\n    graph.save = function save() {\n        const state = {\n            id: this.id,\n            name: this.name,\n            nodes: this.nodes.map((n) => n.save()),\n            connections: this.connections.map((c) => ({\n                id: c.id,\n                from: c.from.id,\n                to: c.to.id,\n                anchors: c.anchors?.map((anchor) => ({\n                    x: anchor.x,\n                    y: anchor.y,\n                })),\n            })),\n            scaling: this.scaling,\n            panning: this.panning,\n        };\n        return this.hooks.save.execute(state);\n    };\n\n    graph.removeSelectedNodes = function removeSelectedNodes() {\n        for (let i = this.selectedNodes.length - 1; i >= 0; i -= 1) {\n            this.removeNode(this.selectedNodes[i]);\n        }\n    };\n\n    graph.removeNode = function removeNode(node) {\n        if (this.nodes.includes(node)) {\n            if (this.events.beforeRemoveNode.emit(node).prevented) {\n                return;\n            }\n\n            const interfaces = [...Object.values(node.inputs), ...Object.values(node.outputs)];\n            interfaces.forEach((intf) => {\n                if (intf.externalName) {\n                    this.editor.privatizeInterface(\n                        this.id,\n                        intf,\n                    );\n                }\n            });\n\n            this.connections\n                .filter((c) => interfaces.includes(c.from) || interfaces.includes(c.to))\n                .forEach((c) => this.removeConnection(c));\n            this._nodes.splice(this.nodes.indexOf(node), 1);\n            this.events.removeNode.emit(node);\n            node.onDestroy();\n            this.nodeEvents.removeTarget(node.events);\n            this.nodeHooks.removeTarget(node.hooks);\n        }\n    };\n\n    graph.removeNodeOnly = function removeNodeOnly(node) {\n        this._nodes.splice(this.nodes.indexOf(node), 1);\n        this.events.removeNode.emit(node);\n        node.onDestroy();\n        this.nodeEvents.removeTarget(node);\n        this.nodeHooks.removeTarget(node);\n    };\n\n    graph.editNode = function editNode(node) {\n        this.events.editNode.emit(node);\n    };\n\n    graph.obtainExposedNames = function obtainExposedNames() {\n        const exposedNames = [];\n        this._nodes.forEach((node) => {\n            Object.values({ ...node.inputs, ...node.outputs }).forEach((intf) => {\n                if (intf.externalName !== undefined) {\n                    exposedNames.push(intf.externalName);\n                }\n            });\n        });\n        return exposedNames;\n    };\n\n    graph.isIncorrectExternalName = function isIncorrectExternalName(name, exposedNames) {\n        const sameNames = exposedNames.filter((n) => n === name).length;\n        return name.length === 0 || sameNames !== 0;\n    };\n\n    graph.resolveNewExposedName = function resolveNewExposedName(name) {\n        const exposedNames = this.obtainExposedNames();\n\n        // Check if the external name is taken and add a suffix if it is\n        let suffix = 1;\n        let tmpName = name;\n        while (this.isIncorrectExternalName(tmpName, exposedNames)) {\n            tmpName = `${name}_${suffix}`;\n            suffix += 1;\n        }\n        return tmpName;\n    };\n\n    return graph;\n}\n","/*\n * Copyright (c) 2022-2024 Antmicro <www.antmicro.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n *\n */\n\nimport {\n    createGraphNodeType,\n    GRAPH_NODE_TYPE_PREFIX,\n    NodeInterface,\n    Graph,\n} from '@baklavajs/core';\nimport { v4 as uuidv4 } from 'uuid';\nimport { parseInterfaces } from '../core/interfaceParser.js';\nimport { updateSubgraphInterfaces } from '../core/NodeFactory.js';\nimport { ir } from '../core/interfaceRegistry.ts';\n\nexport default function CreateCustomGraphNodeType(template, type) {\n    const nt = createGraphNodeType(template);\n\n    return class customGraphNodeType extends nt {\n        type = `${GRAPH_NODE_TYPE_PREFIX}${type}`;\n\n        title = type;\n\n        save() {\n            const state = super.save();\n\n            const newInterfaces = [];\n            const thisInterfaces = Object.values(this.inputs).concat(Object.values(this.outputs));\n            thisInterfaces.forEach((io) => {\n                newInterfaces.push({\n                    name: io.name,\n                    externalName: io.externalName,\n                    id: io.id,\n                    direction: io.direction,\n                    side: io.side,\n                    sidePosition: io.sidePosition,\n                });\n            });\n\n            state.interfaces = newInterfaces;\n            delete state.inputs;\n            delete state.outputs;\n\n            state.subgraph = state.graphState.id;\n\n            state.name = state.type;\n            state.name = state.name.slice(GRAPH_NODE_TYPE_PREFIX.length);\n\n            delete state.type;\n\n            state.instanceName = state.title === '' ? undefined : state.title;\n            delete state.title;\n\n            return state;\n        }\n\n        /* eslint-disable no-param-reassign */\n        load(state) {\n            this.hooks.beforeLoad.execute(state);\n\n            const out = parseInterfaces(state.interfaces ?? [], [], []);\n            if (Array.isArray(out) && out.length) {\n                return out;\n            }\n            let { inputs, outputs } = out;\n\n            inputs = Object.values(inputs);\n            outputs = Object.values(outputs);\n\n            delete state.graphState.interfaces;\n            delete state.subgraph;\n\n            // Loading the subgraph of the graph node first, before creating\n            // interfaces based on the nodes in the subgraph. Thanks to that\n            // the originally exposed interfaces (coming from regular nodes)\n            // are found first.\n            const errors = this.subgraph.load(state.graphState);\n            if (errors.length) {\n                return errors;\n            }\n\n            this.updateExposedInterfaces(inputs, outputs);\n\n            if (!this.subgraph) {\n                errors.push('Cannot load a graph node without a graph');\n            }\n            if (!this.template) {\n                errors.push('Unable to load graph node without graph template');\n            }\n            if (errors.length) {\n                return errors;\n            }\n\n            // Default position should be undefined instead of (0, 0) so that it can be set\n            // by autolayout\n            this.position = state.position;\n            this.title = state.instanceName ?? '';\n\n            this.events.loaded.emit(this);\n            return [];\n        }\n\n        /**\n         * Function used to update exposed interfaces of the graph node based on the\n         * nodes inside the graph, their interfaces and their external names.\n         *\n         * @param {Array} inputs inputs of the graph node. If not provided, the function\n         * will use the current inputs of the graph node.\n         * @param {Array} outputs outputs of the graph node. If not provided, the function\n         * will use the current outputs of the graph node.\n         */\n        updateExposedInterfaces(inputs = undefined, outputs = undefined) {\n            // Update interfaces based on subgraph interfaces and their external names\n            const evaluatedIntf = updateSubgraphInterfaces(\n                this.subgraph.nodes,\n                inputs ?? Object.values(this.inputs),\n                outputs ?? Object.values(this.outputs),\n            );\n            if (Array.isArray(evaluatedIntf) && evaluatedIntf.length) {\n                throw new Error(\n                    `Internal error occurred while exposing an interface.\\n` +\n                    `Reason: ${evaluatedIntf.join('. ')}`,\n                );\n            }\n\n            // After resolving exposed interfaces, the graph node is updated accordingly.\n            this.updateInterfaces(evaluatedIntf.inputs, evaluatedIntf.outputs);\n        }\n\n        /**\n         * Function called when the node is created using the nodePalette\n         */\n        onPlaced() {\n            this.initialize();\n        }\n\n        /**\n         * Creates a new graph node instance based on the template, loads its graph state\n         * and updates exposed interfaces based on the nodes in the subgraph.\n         */\n        initialize() {\n            if (this.subgraph) {\n                this.subgraph.destroy();\n            }\n            const graph = new Graph(this.template.editor);\n\n            const state = this.prepareSubgraphInstance();\n            const errors = graph.load(state);\n            if (errors.length) {\n                throw new Error(\n                    `Internal error occurred while initializing ${graph.type} graph. ` +\n                    `Reason: ${errors.join('. ')}`,\n                );\n            }\n\n            graph.template = this.template;\n            this.subgraph = graph;\n            graph.graphNode = this;\n\n            this.updateExposedInterfaces([], []);\n\n            this._title = this.template.name; // eslint-disable-line no-underscore-dangle\n            this.events.update.emit(null);\n        }\n\n        /**\n         * Function used to update interfaces of the graph node. It makes use of InterfaceRegistry\n         * object to create interfaces that share part of the state of the exposed interfaces.\n         *\n         * @param {Array} newInputs inputs to be added to the graph node\n         * @param {Array} newOutputs outputs to be added to the graph node\n         */\n        updateInterfaces(newInputs, newOutputs) {\n            const newInterfaces = [...newInputs, ...newOutputs];\n            const currentInterfaces = { ...this.inputs, ...this.outputs };\n\n            Object.entries(currentInterfaces).forEach(([nodeKey, nodeIntf]) => {\n                // If current interface cannot be found in `newInterfaces`, it means that\n                // it was removed.\n                if (newInterfaces.find((intf) => intf.id === nodeIntf.id) === undefined) {\n                    const container = nodeIntf.direction === 'output' ? 'output' : 'input';\n                    this.removeInterface(container, nodeKey);\n                }\n            });\n\n            newInterfaces.forEach((nodeIntf) => {\n                // If new interface cannot be found in the current interfaces, it means that\n                // it has to be created\n                const foundIntf = Object.values(currentInterfaces).find(\n                    (intf) => intf.id === nodeIntf.id,\n                );\n\n                if (foundIntf === undefined) {\n                    const ni = new NodeInterface(nodeIntf.name);\n                    Object.assign(ni, nodeIntf);\n                    ir.pushGraphIdToRegistry(ni.id, this.graph.id);\n                    ir.createSharedInterface(ni);\n\n                    const container = nodeIntf.direction === 'output' ? 'output' : 'input';\n                    this.addInterface(container, `${nodeIntf.direction}_${nodeIntf.name}`, ni);\n                } else {\n                    Object.assign(foundIntf, nodeIntf);\n                }\n            });\n        }\n\n        /**\n         * The function uses its internal static template to create a new graph state\n         * based on the template. It creates a new graph node ID and maps all interfaces\n         * to new IDs. The function is used to create a new graph state that can be loaded\n         * by the graph node.\n         *\n         * @returns graph state ready to be loaded\n         */\n        prepareSubgraphInstance() {\n            const idMap = new Map();\n\n            const createNewId = (oldId) => {\n                const newId = uuidv4();\n                idMap.set(oldId, newId);\n                return newId;\n            };\n\n            const getNewId = (oldId) => {\n                const newId = idMap.get(oldId);\n                if (!newId) {\n                    throw new Error(`Unable to create graph from template: Could not map old id ${oldId} to new id`);\n                }\n                return newId;\n            };\n\n            const mapValues = (obj, fn) =>\n                Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, fn(v)]));\n\n            const mapNodeInterfaceIds = (interfaceStates) => mapValues(\n                interfaceStates, (intf) => {\n                    const clonedIntf = {\n                        ...intf,\n                        id: createNewId(intf.id),\n                    };\n                    return clonedIntf;\n                },\n            );\n\n            const newGraphNodeId = uuidv4();\n\n            const nodes = this.template.nodes.map((n) => ({\n                ...n,\n                id: createNewId(n.id),\n                inputs: mapNodeInterfaceIds(n.inputs),\n                outputs: mapNodeInterfaceIds(n.outputs),\n            }));\n\n            const connections = this.template.connections.map((c) => ({\n                id: createNewId(c.id),\n                from: getNewId(c.from),\n                to: getNewId(c.to),\n            }));\n\n            const clonedState = {\n                id: newGraphNodeId,\n                nodes,\n                connections,\n            };\n\n            return clonedState;\n        }\n    };\n}\n","/*\n * Copyright (c) 2022-2023 Antmicro <www.antmicro.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nconst elListeners = {};\n\nconst longPressFactory = (pointerDownAction, pointerUpAction) => ({\n    beforeMount: (el, binding) => {\n        const data = {\n            timeout: null,\n            newEvent: null,\n            longPress: false,\n            moveEvents: 0,\n        };\n        elListeners[el] = {\n            pointerdown: (ev) => {\n                if (ev.pointerType === 'touch' && data.timeout === null) {\n                    data.moveEvents = 0;\n                    data.longPress = false;\n                    pointerDownAction(el, binding, ev, data);\n                    data.timeout = setTimeout(() => { data.longPress = true; }, binding.arg ?? 500);\n                }\n            },\n            pointermove: () => { data.moveEvents += 1; },\n            pointerup: (ev) => {\n                if (ev.pointerType !== 'touch') return;\n                // If long press is valid send right click to element\n                if (data.longPress && data.moveEvents < 10) {\n                    pointerUpAction(el, binding, ev, data);\n                }\n                if (data.timeout) {\n                    clearTimeout(data.timeout);\n                    data.timeout = null;\n                }\n            },\n        };\n        el.addEventListener('pointerdown', elListeners[el].pointerdown);\n        el.addEventListener('pointermove', elListeners[el].pointermove);\n        el.addEventListener('pointerup', elListeners[el].pointerup);\n    },\n    unmounted: (el) => {\n        el.removeEventListener('pointerdown', elListeners[el].pointerdown);\n        el.removeEventListener('pointermove', elListeners[el].pointermove);\n        el.removeEventListener('pointerup', elListeners[el].pointerup);\n    },\n});\n\nexport const longPress = longPressFactory(\n    // eslint-disable-next-line no-param-reassign\n    (_el, _binding, ev, data) => { data.newEvent = ev; },\n    (_el, binding, _ev, data) => { setTimeout(() => binding.value(data.newEvent), 50); },\n);\n\nexport const longPressToRight = longPressFactory(\n    (_el, _binding, ev, data) => {\n        // eslint-disable-next-line no-param-reassign\n        data.newEvent = new PointerEvent('pointerdown', {\n            button: 2, // Right click\n            clientX: ev.clientX,\n            clientY: ev.clientY,\n            screenX: ev.screenX,\n            screenY: ev.screenY,\n            pointerType: 'mouse',\n            relatedTarget: ev.relatedTarget,\n        });\n    },\n    (el, _binding, _ev, data) => { setTimeout(() => { el.dispatchEvent(data.newEvent); }, 50); },\n);\n"],"names":["useDragMove","positionRef","gridSnapperInstance","undefined","nodeId","graph","viewModel","calculateSnappedPosition","gridSize","value","settings","background","backgroundGridSnapper","nodeSnappers","x","y","draggingStartPoint","draggingStartPosition","movementStepEnabled","dragging","calculatePosition","pos","kind","align","gridSnap","alignedCoord","selectedNodes","map","node","id","onPointerDown","ev","shiftKey","pageX","pageY","onPointerMove","ctrlKey","dx","dy","scaling","onPointerUp","extends","NodeInterface","props","highlighted","Boolean","picked","switchSides","toggleGroup","default","required","updateDynamicInterfaces","tabindexValue","components","Arrow","setup","el","isConnected","showComponent","startHover","endHover","openSidebar","intf","events","beforeSetValue","unsubscribe","subscribe","prevent","editor","readonly","min","max","group","setValue","name","endsWith","hovered","onMouseDown","doubleClick","displayArrow","port","direction","arrowRotation","side","newClasses","__readonly","isExposed","externalName","setPort","componentName","editExternalName","externalNameInputIncorrect","externalNameInput","externalNames","inputExternalName","enableExternalNameEdit","e","splice","length","push","obtainExposedNames","indexOf","preventDefault","then","focus","select","isIncorrectExternalName","endHoverWrapper","externalNameInputCallback","target","externalNameFocusOutCallback","newExternalName","resolveNewExposedName","exposeInterface","startHoverWrapper","ref","class","type","spellcheck","autocomplete","placeholder","blur","stopPropagation","noninteractable","color","scale","rotate","component","tabindex","Cross","CustomInterface","CheckboxInterface","Tooltip","emits","_props","emit","editorManager","EditorManager","getEditorManagerInstance","baklavaView","displayedGraph","converter","smartIndentationFix","simpleLineBreaks","width","sidebar","nodes","find","category","nodeTypes","get","prettyCategory","split","join","desc","html","makeHtml","description","match","forEach","hrefParts","newEnd","newHref","replace","nodeIcon","getNodeIconPath","nodeURLs","getNodeURLs","getIconPath","cache","nodeIconPath","sidebarVisible","visible","newValue","tooltipRef","tooltip","sidebarRef","top","left","text","styles","onMouseMove","movementX","displayedInputs","Object","values","inputs","filter","ni","hidden","displayedProperties","interfaceGroups","outputs","interfaces","interfaceGroupsOutput","interfaceGroupsButtonClasses","interfaceGroupsCheckboxes","checkboxes","intfG","checkbox","this","errors","enabledInterfaceGroups","parsedIntfName","intfDirection","groupName","enabledInterfaceGroupsCheckboxes","interfaceGroupsButton","toggleInterfaceGroup","replacementButtons","list","buttons","eName","button","newNode","replaceNode","replacementParents","replacementChildren","extending","replacementSiblings","siblings","displayedName","title","startsWith","slice","startResize","offsetWidth","window","addEventListener","removeEventListener","once","close","onPointerOver","right","clientX","offsetX","currentTarget","$el","clientWidth","clientY","offsetY","offsetHeight","innerWidth","onPointerLeave","getOptionName","style","src","url","key","href","draggable","icon","alt","parent","child","sibling","input","output","ContextMenu","urls","context","classes","itemsWithHoverProperty","justOpened","closeContextMenu","modelValue","document","elementsFromPoint","includes","onClick","item","index","submenu","disabled","label","movementStep","contextMenuStyle","transform","nodeRef","titleRef","renaming","renameField","tempName","displayNoResources","nodeURLsEmpty","displayedOutputs","externalApplicationManager","entries","backendAvailable","firstWatch","async","notifyWhenChanged","data","graph_id","graphInstance","node_id","properties","new_value","notifyAboutChange","notifyPositionChanged","position","startPositionWatcher","stopPositionWatcher","showContextMenuTitle","contextMenuTitleX","contextMenuTitleY","contextMenuTitleItems","items","icons","Sidebar","Pencil","at","endSection","Disconnect","Bin","onContextMenuTitleClick","action","concat","connections","c","i","from","to","removeConnection","switchToSubgraph","Array","isArray","terminalLog","canOpenContextMenu","showContextMenuInterface","openContextMenuTitle","offsetTop","groupDragMove","dragRootNodePosition","dragRootNodeId","groupPointerMove","groupPositionCoords","useGroupDragMove","selected","twoColumn","greyedOut","nodeTitle","highlightedTitle","highlightedType","event","abortDrag","stopDrag","cleanEvents","doneRenaming","findNodeById","onRender","hooks","renderNode","execute","openDoubleClick","displayedLeftSockets","sort","intf1","intf2","sidePosition","displayedRightSockets","getRows","sockets","numOfLines","Math","numOfSocket","rows","displayedRightRows","displayedLeftRows","prop","setComponent","InputInterface","ListInterface","SliderInterface","HexInterface","path","iconPath","newSocketIndex","chosenInterface","leftSocketsRefs","rightSocketsRefs","interfaceCursorStyle","display","nodeTitleStyle","cursor","isPickedInterface","dragInterface","socket","children","findIndex","socketRef","getBoundingClientRect","bottom","dropInterface","pickInterface","contextMenuInterfaceX","contextMenuInterfaceY","createContextMenuInterfaceItems","intfMode","contextMenuInterfaceItems","onContextMenuInterfaceClick","privatizeInterface","comparison","a","b","openContextMenuInterface","offsetLeft","startDrag","Connection","isHighlighted","connection","Anchor","interfaceTypes","connectionStyle","getConnectionStyle","cssClasses","interfaceConnectionPattern","interfaceConnectionColor","panning","newD","tx1","ty1","x1","y1","tx2","ty2","x2","y2","connectionRenderer","render","parsedNewD","d","parsedArray","onMouseCtrlDown","newAnchor","Date","now","addAnchor","trunc","hasAnchors","anchors","removeAnchor","idx","pointerType","anchor","rightclickCallback","getDomElements","interfaceDOM","getElementById","portDOM","getElementsByClassName","closest","interface","ConnectionWrapper","ConnectionView","conn","resizeObserver","state","isInDanger","fromNodePosition","toNodePosition","fromNode","toNode","fromNodeInterfacesSide","io","toNodeInterfacesSide","getPortCoordinates","resolved","clientHeight","updateCoords","ResizeObserver","observe","deep","disconnect","containsPoint","elements","firstChild","TemporaryConnection","status","swappedD","isInput","URLs","parseCategories","categoriesNames","categoryTree","toParse","rest","keys","Set","setDefaultNames","hitSubstring","categoryNode","nodeType","subcategories","subTree","setMasksToTrue","mask","categorizeNodes","prefix","nodeTree","_a","hitNodes","n","categoryName","categoryNames","nameNodeType","isCategory","allNames","nonCategoryNodes","nodeName","updateMasks","treeNode","forceMask","categoryMatches","categoryResult","score","entryMatches","nt","entryResult","unWatch","TOP_LEVEL_NODES_NAMES","LinkMenu","VerticalEllipsis","onDragStart","depth","Number","defaultCollapse","nodeSearch","String","DOMPurify","notEmptyCategory","fill","storedMask","oldValue","showMenu","specificationLoaded","isTopLevelNode","padding","forceZero","getRotation","sortedEntries","obj","sortSubcategories","aNode","bNode","toLowerCase","localeCompare","isCategoryNode","showMenuClick","menu","closeMenu","nodeEntryClasses","__entry","sanitize","role","computed","titleSanitized","PaletteCategory","PaletteEntry","Magnifier","mouseX","mouseY","paletteRef","editorEl","draggedNode","draggedNodeStyles","dragEndPlaceNode","instance","nodeInformation","addNode","rect","dragEndDeselectNode","scroll","nameFilterRef","nodeTypeEntries","topLevelCategories","nodeTypesInCategory","nodesURLs","fromEntries","nodesIconPath","topLevelNodes","_","assign","nodeCategories","parsedTree","topCategory","topSubcategory","All","newNameFilter","getNodeTree","collapse","collapseSidebar","querySelector","scrollTop","iconMenus","translate","toString","$isMobile","isDragged","selecting","selectionBegin","selectionEnd","boundingRect","xBegin","yBegin","xEnd","yEnd","visibility","abs","height","nodeInsideSelection","nodeHTMLelement","selectionBoundingRect","panningX","panningY","nodeX","nodeY","nodeWidth","nodeHeight","CustomNode","PipelineManagerConnection","NodePalette","RectangleSelection","counter","nodeContainerStyle","keyDown","keyUp","connRefs","panZoom","pointerCache","prevDiff","midpoint","panningRef","dragMove","applyZoom","centerX","centerY","newScale","currentPoint","newPoint","diff","editorHeight","innerHeight","editorWidth","size","graphWidth","graphHeight","getCoordsFromCache","ax","ay","bx","by","sqrt","pointerId","curDiff","p","onMouseWheel","scrollAmount","deltaY","deltaMode","usePanZoom","temporaryConnection","hoveringOver","hoveringOverElement","checkConnectionResult","checkConnection","connectionAllowed","ids","connectionsInDanger","element","elementFromPoint","dispatchEvent","PointerEvent","classList","contains","mx","my","onMouseUp","addConnection","useTemporaryConnection","highlightConnections","highlightInterfaces","hideHud","rectangleSelection","selectedNodesCtrlBackup","searchQuery","greyedOutNodes","pressStartTime","editorStyle","unselectAllNodes","appendSelectMultipleNodes","pointersDown","onRightPointerUp","onRightPointerUpCtrl","onRightPointerDownCtrl","onRightPointerDown","clearHighlight","it","ignoredLayers","ignorableLayers","layers","ignoredInterfacesTypes","temp","layer","nodeInterfaces","has","add","ignoredNodesTypes","nodeLayers","visibleNodes","ignoredNodes","ignoredNodesId","visibleConnections","some","t","old","newIds","oldIds","nodesAdded","save","nodesDeleted","added","deleted","connectionsAdded","connectionsDeleted","nodeTitles","matchingNodes","query","isGraphNode","resultTitle","resultType","nonMatchingNodes","defaultSpecification","VUE_APP_SPECIFICATION_PATH","defaultDataflow","VUE_APP_DATAFLOW_PATH","updateEditorSpecification","specification","warnings","validateSpecification","updateDataflow","dataflow","result","loadDataflow","messageTitle","content","setShowNotification","updateMetadata","escapedsearch","location","search","urlParams","URLSearchParams","setting","preview","specText","ret","include","restoreShowNotification","onDrop","dataTransfer","dropEffect","files","getAsFile","showToast","reader","FileReader","file","JSON","parse","SyntaxError","graphs","onerror","er","message","readAsText","selectNode","commandHandler","pressedKeys","mouseWheel","changeHoveredConnections","hoveredHtml","htmlEl","hov","removeHighlight","$event","oncontextmenu","webpackEmptyContext","req","Error","code","resolve","module","exports","optionType","updateInterfacePosition","newSide","newSidePosition","swap","editNode","oldSidePosition","found","intfToMove","occupiedPositions","proposedPosition","removeNode","unwrapGraph","unwrapSubgraph","PipelineManagerEditor","_hideHud","val","_readonly","allowLoopbacks","nodeIcons","Map","baseURLs","baseIconUrls","layoutManager","LayoutManager","subgraphStack","registerGraph","customGraph","graphNode","error","tmp","maxConnectionsCount","connectionCount","fromTypes","toTypes","prevented","hr","dummyConnection","anchorToAdd","oldNode","newNodeName","oldPosition","newNodeInstance","prototype","hasOwnProperty","call","connectionsToRestore","newConn","internalAddConnection","beforeAddNode","nodeEvents","addTarget","nodeHooks","template","newState","stringify","_nodes","onPlaced","destroy","load","subgraph","nodeErrors","fromIf","findNodeInterface","toIf","connectionToRemove","sizes","HTMLelement","margin","rightmostX","leftmostX","bottommostY","topmostY","removeSelectedNodes","beforeRemoveNode","onDestroy","removeTarget","removeNodeOnly","exposedNames","sameNames","suffix","tmpName","createPipelineManagerGraph","super","currentGraphId","_graph","stackCopy","backFromSubgraph","bind","currentGraphState","dataflowState","recurrentSubgraphSave","graphState","entryGraph","subgraphNode","deepCleanEditor","suppressHistory","cleanEditor","graphName","unregisterGraphs","unregisterGraph","unregisterNodes","nodeKey","unregisterNodeType","registerNodeType","options","beforeRegisterNodeType","nodeInstance","_nodeTypes","set","preventCentering","loadOnly","ir","clearRegistry","usedInstances","recurrentSubgraphLoad","fittingTemplate","structuredClone","readonlySetting","usedGraphs","rootGraph","err","loaded","dfs","returnedPath","layoutEngine","activeAlgorithm","applyAutolayout","centerZoom","graphId","g","graphIds","sharedInterface","getRegisteredInterface","graphIdIdx","updateExposedInterfaces","deleteRegisteredInterface","editorSize","terminalHeight","navbarHeight","nodePalette","sideBarWidth","paletteRect","scalingY","scalingX","translationX","translationY","fullUrls","urlName","addGraphTemplate","beforeAddGraphTemplate","_graphTemplates","graphTemplateEvents","graphTemplateHooks","customGraphNodeType","newInterfaces","instanceName","beforeLoad","out","evaluatedIntf","updateInterfaces","initialize","prepareSubgraphInstance","_title","update","newInputs","newOutputs","currentInterfaces","nodeIntf","container","removeInterface","foundIntf","pushGraphIdToRegistry","createSharedInterface","addInterface","idMap","createNewId","oldId","newId","getNewId","mapNodeInterfaceIds","interfaceStates","mapValues","fn","k","v","CreateCustomGraphNodeType","switchGraph","_switchGraph","computeLayout","updateNodesPosition","newGraph","pop","findInterface","intfId","subgraphNodes","meanX","reduce","sum","meanY","addedNode","subgraphNodeConnections","fromInterface","toInterface","createdConnection","isInSubgraph","resetLocations","updatedGraph","updatedState","updateCurrentSubgraphName","elListeners","longPressFactory","pointerDownAction","pointerUpAction","beforeMount","binding","timeout","newEvent","longPress","moveEvents","pointerdown","setTimeout","arg","pointermove","pointerup","clearTimeout","unmounted","_el","_binding","_ev","longPressToRight","screenX","screenY","relatedTarget"],"sourceRoot":""}